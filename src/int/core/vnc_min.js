var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(n,B,D){if(null==n)throw new TypeError("The 'this' value for String.prototype."+D+" must not be null or undefined");if(B instanceof RegExp)throw new TypeError("First argument to String.prototype."+D+" must not be a regular expression");return n+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(n,B,D){if(n==Array.prototype||n==Object.prototype)return n;n[B]=D.value;return n};
$jscomp.getGlobal=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var B=0;B<n.length;++B){var D=n[B];if(D&&D.Math==Math)return D}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(n,B){var D=$jscomp.propertyToPolyfillSymbol[B];if(null==D)return n[B];D=n[D];return void 0!==D?D:n[B]};$jscomp.polyfill=function(n,B,D,G){B&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(n,B,D,G):$jscomp.polyfillUnisolated(n,B,D,G))};
$jscomp.polyfillUnisolated=function(n,B,D,G){D=$jscomp.global;n=n.split(".");for(G=0;G<n.length-1;G++){var F=n[G];if(!(F in D))return;D=D[F]}n=n[n.length-1];G=D[n];B=B(G);B!=G&&null!=B&&$jscomp.defineProperty(D,n,{configurable:!0,writable:!0,value:B})};
$jscomp.polyfillIsolated=function(n,B,D,G){var F=n.split(".");n=1===F.length;G=F[0];G=!n&&G in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var X=0;X<F.length-1;X++){var ja=F[X];if(!(ja in G))return;G=G[ja]}F=F[F.length-1];D=$jscomp.IS_SYMBOL_NATIVE&&"es6"===D?G[F]:null;B=B(D);null!=B&&(n?$jscomp.defineProperty($jscomp.polyfills,F,{configurable:!0,writable:!0,value:B}):B!==D&&($jscomp.propertyToPolyfillSymbol[F]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(F):$jscomp.POLYFILL_PREFIX+F,
F=$jscomp.propertyToPolyfillSymbol[F],$jscomp.defineProperty(G,F,{configurable:!0,writable:!0,value:B})))};$jscomp.polyfill("String.prototype.startsWith",function(n){return n?n:function(B,D){var G=$jscomp.checkStringArgs(this,B,"startsWith");B+="";var F=G.length,X=B.length;D=Math.max(0,Math.min(D|0,G.length));for(var ja=0;ja<X&&D<F;)if(G[D++]!=B[ja++])return!1;return ja>=X}},"es6","es3");$jscomp.arrayIteratorImpl=function(n){var B=0;return function(){return B<n.length?{done:!1,value:n[B++]}:{done:!0}}};
$jscomp.arrayIterator=function(n){return{next:$jscomp.arrayIteratorImpl(n)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(n){if(n)return n;var B=function(F,X){this.$jscomp$symbol$id_=F;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:X})};B.prototype.toString=function(){return this.$jscomp$symbol$id_};var D=0,G=function(F){if(this instanceof G)throw new TypeError("Symbol is not a constructor");return new B("jscomp_symbol_"+(F||"")+"_"+D++,F)};return G},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(n){if(n)return n;n=Symbol("Symbol.iterator");for(var B="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),D=0;D<B.length;D++){var G=$jscomp.global[B[D]];"function"===typeof G&&"function"!=typeof G.prototype[n]&&$jscomp.defineProperty(G.prototype,n,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return n},"es6",
"es3");$jscomp.iteratorPrototype=function(n){n={next:n};n[Symbol.iterator]=function(){return this};return n};$jscomp.iteratorFromArray=function(n,B){n instanceof String&&(n+="");var D=0,G=!1,F={next:function(){if(!G&&D<n.length){var X=D++;return{value:B(X,n[X]),done:!1}}G=!0;return{done:!0,value:void 0}}};F[Symbol.iterator]=function(){return F};return F};$jscomp.polyfill("Array.prototype.keys",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(B){return B})}},"es6","es3");
var svManager={getInstance:function(){var n=window.$vnc;return n&&n.running&&n.running()?n:null}};function connvertServer(n){var B={};B.id=n.id;B.server=n.id;B.displayName=n.displayName||n.id;if(n=n.vnc){for(var D in n)B[D]=n[D];B.pwd=n.password||""}return B}
svGlobal.Vnc=function(n,B,D,G){function F(a){return"on"==a||"true"==a||1==a}function X(a){h.loadbalanceToken||(N.randomAppId&&(a=hi5.tool.uuid()),h.loadbalanceToken=N.loadbalanceTokenName?N.loadbalanceTokenName+"="+a:"")}function ja(a,b){function c(f){!C&&f-H>t&&0<k.width&&(w.repaint(k.x,k.y,k.width,k.height),k.width=0,H=f);I=requestAnimationFrame(c)}var d=[],e=null,g=null,k=new hi5.graphic.Rectangle(0,0,0,0),p="Uint8ClampedArray"in window;this.width=a;this.height=b;var t=N.animation||62,x=null,C=
!1,w=this,z=null,H=0,I=0;this.pause=function(f){(C=f)?(window.OffscreenCanvas?x=new OffscreenCanvas(a,b):(x=document.createElement("canvas"),x.width=a,x.height=b),g=e,f=x.getContext("2d",{alpha:!1}),f.drawImage(e.canvas,0,0),w.setContext(f)):g&&(g.drawImage(e.canvas,0,0),w.setContext(g))};this.release=function(){cancelAnimationFrame(I);z=d=e=w=null};this.isPaused=function(){return C};this.setContext=function(f){f!=e&&(e||!f||f.createImageData(1,1).data.buffer||(p=!1),e=f,null!=e&&(z=e.createImageData(a,
b)))};this.getContext=function(){return e};this.resize=function(f,l){for(var m=0;m<l;m++)d[m]=new Uint32Array(f);w.width=a=f;w.height=b=l;null!=e&&(z=e.createImageData(a,b))};w.resize(a,b);this.getBuffer=function(){return d};this.setRGB=function(f,l,m){d[l][f]=m|4278190080};this.getRGB=function(f,l){return d[l][f]};this.setRGBs=function(f,l,m,q,r,v,u){var A=f+m;q=l+q;if(r.subarray)for(;l<q;l++,v+=u)d[l].set(r.subarray(v,v+m),f);else for(var P;l<q;l++,v+=u){var L=v;P=d[l];for(m=f;m<A;m++)P[m]=r[L++]}};
this.moveArea=function(f,l,m,q,r,v){if(0<v)for(r=f+r,v=l+v,--q;0<=q;q--)d[v+q].set(d[l+q].subarray(f,f+m),r);else if(0>v){r=f+r;v=l+v;for(var u=0;u<q;u++)d[v+u].set(d[l+u].subarray(f,f+m),r)}else if(0<r){r=f+r;v=l+v;u=d;var A;for(--m;0<=m;m--){var P=r+m;var L=f+m;for(A=0;A<q;A++)u[v+A][P]=u[l+A][L]}}else for(r=f+r,v=l+v,u=d,A=0;A<m;A++){L=r+A;var Z=f+A;for(P=0;P<q;P++)u[v+P][L]=u[l+P][Z]}};this.getRGBs=function(f,l,m,q){var r=_Uint32Array(m*q);r[0]=0;var v=d;m=f+m;q=l+q;for(var u=0,A=l;A<q;A++)for(l=
f;l<m;l++)r[u++]=v[A][l];return r};this.repaint=function(f,l,m,q){var r=z.data,v=0,u,A;0>f&&(m+=f,f=0);0>l&&(q+=l,l=0);f+m>a&&(m=a-f);l+q>b&&(q=b-l);var P=f+m;var L=l+q;if(p)for(r=new Uint32Array(r.buffer),A=l;A<L;A++)r.set(d[A].subarray(f,P),v),v+=a;else{var Z=4*(a-m)|0;for(A=l;A<L;A++){for(u=f;u<P;u++){var E=d[A][u];r[v++]=E&255;r[v++]=E>>8&255;r[v++]=E>>16&255;r[v++]=255}v+=Z}}e.putImageData(z,f,l,0,0,m,q)};this.postPaint=function(f,l,m,q){0<k.width?k.union(f,l,m,q):(k.x=f,k.y=l,k.width=m,k.height=
q)};this.commitPaint=function(){0<k.width&&(this.repaint(k.x,k.y,k.width,k.height),k.width=0)};this.startAnimation=function(){I=requestAnimationFrame(c)};this.fillRect=function(f,l,m,q,r){m=f+m;q=l+q;for(var v=l;v<q;v++)if(d[v].fill)d[v].fill(r,f,m);else{var u=d[v];for(l=f;l<m;l++)u[l]=r}}}function Da(){var a=n.indexOf("://"),b=n.substring(a+3);a=b.indexOf("/");0<a&&(b=b.substring(0,a));return location.protocol+"//"+b}function K(a){T&&Q.send(a)}function ib(a){if(!xa)return"";a=hi5.browser.httpGet(Da()+
"/CLIP?s="+xa+"&t="+Date.now(),!1);setTimeout(function(){Q.send("883")},999);return a}function ya(){return y.displayName||y.server||y.symlink||y.id||"undefined"}function Ea(a){h.setTitle&&(document.title=a)}function U(a,b,c){this.need=a;this.handler=b;this.repeat=c||1}function Ta(a){var b=0,c=0,d=new Uint8Array(a),e=this,g=new U(0,null,0);this.release=function(){e=d=g=null};this.getHandler=function(){return g};this.getData=function(){return d};this.getPosition=function(){return b};this.setPosition=
function(k){b=k};this.getEnd=function(){return c};this.set=function(k,p,t){d=k;b=p;c=t};this.handle=function(){g.handler(e,g)};this.setHandler=function(k){k&&1>k.need&&svGlobal.logger.warn("need < 1");(g=k)&&c-b>=k.need&&k.handler(e,k)};this.getByte=function(){return d[b++]};this.peekByte=function(){return d[b]};this.getBE32=function(){return d[b++]<<24|d[b++]<<16|d[b++]<<8|d[b++]};this.getBE16=function(){return d[b++]<<8|d[b++]};this.skip=function(k){b+=k};this.skipBack=function(k){b-=k};this.getBytes=
function(k,p){if(p)for(var t=0;t<k;t++)p[t]=d[b++];else return p=b,b+=k,d.subarray(p,b)};this.copyToByteArray=function(k,p,t,x){hi5.Arrays.arraycopy(d,t,k,p,x)};this.getString16LE=function(k,p){for(var t="";k<p;){var x=d[k++]|d[k++]<<8;t+=String.fromCharCode(x)}return t}}function Ua(){var a="";y&&F(y.connectif)&&y.symlink&&"sessionStorage"in window&&(a="SV_"+y.symlink,y.user&&(a+=y.user));return a}function Va(){if(!T){if(za)Q=za,ra(y.width,y.height);else{var a=h.getRuntimeURL(!0);Q=h.oncreatewebsocket?
h.oncreatewebsocket(a):new WebSocket(a,"vnc");Q.binaryType="arraybuffer"}ka.ws=Q;Q.onopen=jb;var b=new hi5.DataBuffer([],0,0);Q.onmessage=function(c){c=c.data;if("string"!=typeof c){var d=new Uint8Array(c);null!=da&&da.add(new RecordingObj(d,0,c.byteLength));switch(d[0]){case 48:O.set(d,2,d.length-2);O.handle();break;case 56:b.attach(d,2,d.length-2);Wa(b.getUnicodeString(b.getEnd()-b.getPosition(),!1));break;case 60:if(Aa||Ba)switch(b.attach(d,2,d.length-2),b.getByte()){case 32:if(M&&!M.isPaused()){c=
b.getLittleEndian16();d=b.getLittleEndian16();var e=b.getLittleEndian16();var g=b.getLittleEndian32(),k=h.sessionInfo.appInfo?h.sessionInfo.appInfo.sessions[g]:null;J&&J.moveCursor(d,e,!0,k,g,c)}}break;case 62:b.attach(d,2,d.length-2);Fa(b.getUnicodeString(b.getEnd()-b.getPosition(),!1));break;case 146:b.attach(d,2,d.length-2);switch(b.getByte()){case 0:c=new Uint8Array(2);c[0]=146;c[1]=1;K(c.buffer);break;case 1:ba&&ba.check();break;case 6:ka.remoteLockFlags=b.getLittleEndian32(),ka.checkLockFlags=
!0}break;default:svGlobal.logger.warn("invalid type:"+d[0])}}else switch(e=parseInt(c.substring(0,2),16),d=c.substring(2),e){case 0:c=h.getRuntimeURL(!1);c=c.substring(c.indexOf("?")+1);Q.send("00"+c);break;case 26:c=JSON.parse(d);if(c.name){svGlobal.logger.info("msg="+d);if(h.onerror)h.onerror(c);d=__svi18n.errorCode["S"+c.name]||"";d+=c.message||c.msg;h.showMessage(d)}else 0<svGlobal.log&&console.erro("No error code for message:"+d);break;case 27:0!=N.drawLicense&&J.drawLicense(d);break;case 56:Wa(d);
break;case 59:c=hi5.Base64.dec(d,0);Ga=c[3]<<24|c[2]<<16|c[1]<<8|c[0];Ga&64&&h.showMessage(__svi18n.info.recording);J.setFeature(Ga);break;case 61:c=JSON.parse(d);switch(c.type){case 0:ra(c.width,c.height);S=c.color/8|0;"ignoreCursor"in c&&(Ha=c.ignoreCursor);"trackCursorLocally"in c&&(Aa=c.trackCursorLocally,Xa(J));c.server&&(h.server=c.server,Ea(ya()));Ya=c.length;J&&1!=h.mode&&J.setAutoScale(!0);if(h.onopened)h.onopened(c);break;case 1:c=c.duration;if(h.onprogress)h.onprogress(c,Ya);break;case 2:2==
c.status?(Ia(),T=!0):(d=0==c.status,M.pause(d),aa=M.getContext(),c.warn&&h.showMessage(d?__svi18n.info.sessionPaused:__svi18n.info.sessionResumed))}break;case 62:Fa(d);break;default:svGlobal.logger.warn("@TODO:"+c+"\n")}};Q.onclose=sa;Q.onerror=kb}}function lb(a,b){var c=0,d=!1;this.width=a;this.interval=b;var e=0;this.start=function(){d||(d=!0,c=setInterval(function(){if(J&&T){var g=J.getThumbnail(a);g&&g.length!=e&&(K("8E7"+g),e=g.length)}},b))};this.stop=function(){clearInterval(c)}}function mb(a,
b){!Y||Y.width==a&&Y.interval==b||(Y.stop(),Y=null);Y||(Y=new lb(a,b));Y.start()}function nb(a){var b=N.page&&N.page.join||"";if(b.startsWith("http://")||b.startsWith("https://"))return b;if(b.startsWith("/"))return location.origin+b;var c=location.href,d=c.lastIndexOf("/");if(b)return c.substring(0,d+1)+b;b=Da();c.toLowerCase().startsWith(b.toLowerCase())&&(b=c.substring(0,d));return b+"/"+a}function Wa(a){var b=a.indexOf('"sessions":{,');0<b&&(b+=13,a=a.substring(0,b-1)+a.substring(b));a=JSON.parse(a);
xa=a.session;X(a.appId);a.server||(a.server=ya());if(b=hi5.$("joinSelect"))b.value=a.joinMode;if(b=hi5.$("requestControl"))b.disabled=a.hasControl;a.joined||Ba||(h.mode=0,O.setHandler(Ca),la=new Ja);b=nb("joinvnc.html")+"?id="+a.numericId;b=h.modifyURL(b);var c=a.webAddress;if(c&&0<c.length){var d=c.indexOf("://");c=c.substring(d+3);d=c.indexOf("/");0<d&&(c=c.substring(0,d));c.toLowerCase()!=location.host.toLowerCase()&&(b+="&gateway="+c)}a.joinLink=b;h.sessionInfo.appInfo=a;a.ver&&a.ver!=svGlobal.version&&
svGlobal.logger.info("Client:"+svGlobal.version+" server:"+a.ver);if(h.onsessionstart)h.onsessionstart(h.sessionInfo)}function Xa(a){Aa?Ha&&a.setCursor({system:"default",none:!1,result:"default"}):hi5.browser.isIE?a.setCursor({system:"none",none:!0,result:"none"}):a.setCursor({result:"url(data:image/x-icon;base64,AAACAAEAICACAAAAAAAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAgAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAABQUFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAOAAAADgAAAA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8f////H////x////8=) 0 0, none"})}
function Za(a,b){var c=__svi18n.errorCode[a];c||(c="Error "+a,b&&(c+=", "+b));if(h.onerror)h.onerror({name:a,message:c});h.displayMsg&&h.showMessage(c);0<svGlobal.log&&console.error(c)}function jb(a){svGlobal.logger.info("opened...");T=!0;K("87"+navigator.userAgent);if(h.onopen)h.onopen()}function kb(a){svGlobal.logger.warn(a)}function sa(a){if(h&&(svGlobal.logger.warn("closed ..."),(a=Ua())&&h.sessionInfo.appInfo&&0==h.mode&&(sessionStorage[a]=h.sessionInfo.appInfo.session),O&&O.getHandler()&&O.getHandler().handler==
ta&&h.onautherror&&h.onautherror(),oa=T=!1,ba&&(ba.stop(),ba=null),!Ka)){if(h)if(h.onclose)h.onclose($a);else if(hi5.appcfg&&hi5.appcfg.returnUrl){window.location.href=hi5.appcfg.returnUrl;return}try{null!=da&&(da.exit(),da=null),J&&(J.onclipdata=null,J.close(),J=null)}catch(b){}ab=bb=y=La=cb=V=ha=n=null;Y&&(Y.stop(),Y=null);ea=za=null;hi5.browser.isChromeApp?chrome.runtime.onSuspend.remvoeListener(sa):window.removeEventListener("unload",sa,!1);Q&&(Q.onopen=null,Q.onmessage=null,Q.onclose=null,Q=
Q.onerror=null);O&&(O.release(),O=null);ca&&(ca.release(),ca=null);la&&(la.release(),la=null);J=ka=Ma=Ca=R=V=null;M&&(M.release(),M=null);aa=null;h&&(h=null);window&&window.$vnc&&(window.$vnc=null);null!=da&&(da.exit(),da=null)}}function ob(){Ka=!0;var a=document.getElementById("authDialog");if(!a)return"";hi5.browser.initDialog(a,function(b){var c=b.indexOf("=");b=b.substring(c+1);y.pwd=b;O.setHandler(Ca);Ka=!1;setTimeout(Va,300)});a.showModal()}function db(a){svGlobal.logger.info("vnc auth");var b=
new Uint8Array(17);b[0]=32;a.copyToByteArray(b,1,a.getPosition(),16);a.skip(16);a=y.pwd||"";8<a.length&&(a=a.substring(0,8));for(var c=[0,0,0,0,0,0,0,0],d=a.length,e=0;e<d;e++)c[e]=a.charCodeAt(e);a=new DesCipher(c);a.encrypt(b,1,b,1);a.encrypt(b,9,b,9);K(b.buffer);O.setHandler(new U(4,ta))}function Na(){var a=new Uint8Array(2);a[0]=147;a[1]=void 0==y.share||F(y.share)?1:0;K(a.buffer);O.setHandler(new U(24,function(b){if(h.onloggedin)h.onloggedin();K("8D");if(T){var c=h.sessionInfo;c.width=ma=b.getBE16();
c.height=na=b.getBE16();c.bpp=b.getByte();c.depth=b.getByte();c.bigEndian=0!=b.getByte();c.trueColor=0!=b.getByte();c.redMax=b.getBE16();c.greenMax=b.getBE16();c.blueMax=b.getBE16();c.redShift=b.getByte();c.greenShift=b.getByte();c.blueShift=b.getByte();b.skip(3);for(var d=b.getBE32(),e="",g=0;g<d;g++)e+=String.fromCharCode(b.getByte());c.name=e;svGlobal.logger.info("server name:"+e);y.displayName||y.server||Ea(e);ra(ma,na);b=[];if(y){c=y.encoding;8==y.color&&"Tight"==c&&(c="ZRLE");switch(c){case "Tight":b.push(7);
b.push(16);b.push(5);b.push(0);break;case "Raw":b.push(0);b.push(16);b.push(7);b.push(5);b.push(0);16==y.color&&(y.color=32);break;case "Hextile":b.push(5);b.push(16);b.push(7);b.push(0);16==y.color&&(y.color=32);break;default:b.push(16),b.push(7),b.push(5),b.push(0),16==y.color&&(y.color=32)}b.push(1);Aa&&(b.push(4294967057),b.push(4294967064));N.vnc&&!1===N.vnc.qemuExtKey||b.push(4294967038);b.push(4294967035);"0"!=y.compression&&b.push(4294967040+parseInt(y.compression||6));"0"!=y.quality&&b.push(4294967264+
parseInt(y.quality||5));b.push(4294967073);b.push(4294966988);c=b.length;d=new Uint8Array(5+4*c);d[0]=147;d[1]=2;d[3]=c>>8&255;d[4]=c&255;for(e=0;e<c;e++)d[5+4*e]=b[e]>>24&255,d[6+4*e]=b[e]>>16&255,d[7+4*e]=b[e]>>8&255,d[8+4*e]=b[e]&255;K(d.buffer);b=parseInt(y.color);switch(b){case 32:Oa(32,24,!1,!0,255,255,255,0,8,16);break;case 16:Oa(16,16,!1,!0,31,63,31,11,5,0);break;case 8:Oa(8,8,!1,!0,7,7,3,0,3,6);break;default:svGlobal.logger.warn("invliad color depath:"+b)}S=b/8|0;ca&&ca.setBytesPerPixel(S);
Pa(0,0,ma,na,!1);O&&O.setHandler(Ma);oa=!0;void 0!=y.recording&&"on"==y.recording&&(b=y,da=new RecordingManager,da.setHeader({name:"rec",width:b.width,height:b.height,color:b.server_bpp,namesuffix:".vncv",filetag:"VNCV",duration:0}));if(h&&(N.pingInterval&&h.startPing(N.pingInterval),h.onready))h.onready()}}}))}function ta(a){a=a.getBE32();svGlobal.logger.info("sec rst: "+a);var b={code:a,message:""};switch(a){case 0:Na();return;case 1:b.message=__svi18n.vnc.authError;h.close();ob();return;case 2:b.message=
"Too many failed authentication";break;default:b.message="Unknown auth error"+a}O.setHandler(null);h.onautherror&&h.onautherror(b)||(h.showMessage(b.message),h.close())}function Oa(a,b,c,d,e,g,k,p,t,x){var C=new Uint8Array(21);C[0]=35;C[1]=0;C[5]=a;C[6]=b;C[7]=c?1:0;C[8]=d?1:0;C[9]=e>>8&255;C[10]=e&255;C[11]=g>>8&255;C[12]=g&255;C[13]=k>>8&255;C[14]=k&255;C[15]=p;C[16]=t;C[17]=x;K(C.buffer)}function Pa(a,b,c,d,e){var g=new Uint8Array(11);g[0]=147;g[1]=3;g[2]=e?1:0;g[3]=a>>8&255;g[4]=a&255;g[5]=b>>
8&255;g[6]=b&255;g[7]=c>>8&255;g[8]=c&255;g[9]=d>>8&255;g[10]=d&255;K(g.buffer)}function Ja(){var a=new TINF;a.init(2==h.mode?120:0);var b=new Ta(0),c=new Uint32Array(4096),d=new Uint32Array(128);this.release=function(){d=c=null;a.release();a=null;b.release();b=null};this.getHistory=function(){var e=[90],g=a.getHistory().length,k=g&255;e.push(g>>8&255);e.push(k);return e=e.concat(a.getHistory())};this.setHistory=function(e){a.setHistory(e)};this.decode=function(e,g,k,p,t,x){var C=e.getBE32();e=e.getBytes(C);
e=a.uncompress(e,0);var w;b.set(e.dest,0,e.destIndex);var z=d,H=b.getByte,I=c;2==S&&(S=4);for(e=k;e<k+t;e+=64){var f=Math.min(k+t-e,64);for(C=g;C<g+p;C+=64){var l=Math.min(g+p-C,64);var m=H();var q=0!=(m&128);m&=127;if(1==S)for(w=0;w<m;w++)z[w]=ea[H()];else for(w=0;w<m;w++)z[w]=H()|H()<<8|H()<<16|4278190080;if(1!=m||x){if(q)if(0==m)for(q=0,w=q+l*f;q<w;){var r=1==S?ea[H()]:H()|H()<<8|H()<<16|4278190080;var v=1;do m=H(),v+=m;while(255==m);if(I.fill)I.fill(r,q,q+v),q+=v;else for(;0<v--;)I[q++]=r}else for(q=
0,w=q+l*f;q<w;){r=H();v=1;if(0!=(r&128)){do m=H(),v+=m;while(255==m)}r&=127;r=z[r];if(I.fill)I.fill(r,q,q+v),q+=v;else for(;0<v--;)I[q++]=r}else if(q=l*f,0==m)if(1==S)for(w=0;w<q;w++)I[w]=ea[H()];else for(w=0;w<q;w++)I[w]=H()|H()<<8|H()<<16|4278190080;else for(v=16<m?8:4<m?4:2<m?2:1,w=q=0;w<f;w++){r=q+l;for(var u=m=0;q<r;)0==u&&(m=H(),u=8),u-=v,I[q++]=z[m>>u&(1<<v)-1&127]}x||M.setRGBs(C,e,l,f,I,0,l)}else M.fillRect(C,e,l,f,z[0])}}x||M.postPaint(g,k,p,t)}}function eb(){function a(f,l,m,q,r){this.draw=
function(){aa.fillStyle=r;aa.fillRect(f,l,m,q)};this.type=0;this.ready=function(){return!0}}function b(f,l,m){this.draw=function(){aa.putImageData(m,f,l)};this.type=1;this.ready=function(){return!0}}function c(f,l,m){this.draw=function(){aa.drawImage(m,f,l);URL.revokeObjectURL(m.src)};this.type=2;this.ready=function(){return!!m.src&&m.complete};this.image=m}function d(f,l,m,q){var r=null;m=new Blob([m],{type:"image/jpeg"});var v=!1;this.draw=function(){r&&(aa.drawImage(r,f,l),r.close())};this.type=
3;this.ready=function(){return v};createImageBitmap(m).then(function(u){r=u;v=!0;q()}).catch(function(u){v=!0;svGlobal.logger.warn("Failed to load JPEG:"+u)})}function e(){var f=x[p];f||(f=new TINF,f.init(2==h.mode?120:0),x[p]=f);return f}function g(f){var l=f.getByte(),m=l&127;l&128&&(l=f.getByte(),m|=(l&127)<<7,l&128&&(m|=f.getByte()<<14));return m}function k(f){var l=f>>8&248,m=f>>3&252;f=f<<3&255;return l|l>>5|(m|m>>6)<<8|(f|f>>5)<<16|4278190080}var p=0,t=3,x={},C={data:[0],length:0},w=Array(256);
w[0]=0;this.inUse=!1;var z=this,H=!!window.createImageBitmap;this.setBytesPerPixel=function(f){t=3<f?3:f};var I=new function(){function f(){for(;0<l.length;){var m=l[0];if(!m.ready())break;m.draw();l.shift()}}var l=[];this.check=f;this.push=function(m){l.push(m);2==m.type?m.image.onload=f:f()};this.release=function(){l=[]}};this.release=function(){I.release();x=C=w=z=I=null};this.getHistory=function(){var f=[84],l=Object.keys(x).length;f.push(l);for(var m in x)if(x.hasOwnProperty(m)){f.push(parseInt(m));
l=x[m].getHistory();var q=l.length,r=q&255;f.push(q>>8&255);f.push(r);f=f.concat(l)}return f};this.setHistory=function(f){for(var l=0,m=f[l++],q=0;q<m;q++){var r=f[l++],v=f[l++],u=f[l++];u=(v&255)<<8|u&255;v=f.slice(l,l+u);l+=u;u=x[r];u||(u=new TINF,u.init(2==h.mode?120:0),x[r]=u);u.setHistory(v)}};this.drawImageData=function(f,l,m){I.push(new b(l,m,f))};this.decode=function(f,l,m,q,r,v){z.inUse||(z.inUse=!0);var u=f.getByte();switch(u>>4){case 8:if(v)f.skip(t);else{v=I;u=v.push;if(3==t)f="rgb("+
f.getByte()+","+f.getByte()+","+f.getByte()+")";else{var A=f.getByte()|f.getByte()<<8;f=A>>8&248;var P=A>>3&252;A=A<<3&255;f="rgb("+(f|f>>5)+","+(P|P>>6)+","+(A|A>>5)+")"}u.call(v,new a(l,m,q,r,f))}break;case 9:u=g(f);v?f.skip(u):H?I.push(new d(l,m,f.getBytes(u),I.check)):(q=f.getBytes(u),q=new Blob([q],{type:"image/jpeg"}),q=URL.createObjectURL(q),r=new Image,I.push(new c(l,m,r)),r.src=q);break;default:if(p=(u&48)>>4,u=u&64?f.getByte():0,1==u){u=f.getByte;var L=u()+1,Z=2!=L?q*r:r*((q+7)/8|0),E=0;
if(3==t)for(;E<L;E++)w[E]=u()|u()<<8|u()<<16|4278190080;else for(;E<L;E++)w[E]=k(u()|u()<<8);12>Z?(C.data=f.getBytes(Z),C.length=Z):(u=g(f),f=e().uncompress(f.getBytes(u),0),C.data=f.dest,C.length=f.destIndex);u=C.data;P=aa.createImageData(q,r);if("Uint8ClampedArray"in window)if(A=new Uint32Array(P.data.buffer),2!=L)for(E=0;E<Z;E++)A[E]=w[u[E]];else{f=0;Z=(q+7)/8|0;for(var ua,pa=0;pa<r;pa++){ua=pa*Z;for(var ia=0;ia<(q/8|0);ia++)for(L=u[ua+ia],E=7;0<=E;E--)A[f++]=w[L>>E&1];L=8-q%8;for(E=7;E>=L;E--)A[f++]=
w[u[ua+ia]>>E&1]}}else if(A=P.data,f=0,2!=L)for(E=0;E<Z;E++)L=w[u[E]],A[f++]=L&255,A[f++]=L>>8&255,A[f++]=L>>16&255,A[f++]=255;else for(f=0,Z=(q+7)/8|0,pa=0;pa<r;pa++){ua=pa*Z;for(ia=0;ia<(q/8|0);ia++)for(L=u[ua+ia],E=7;0<=E;E--){var qa=w[L>>E&1];A[f++]=qa&255;A[f++]=qa>>8&255;A[f++]=qa>>16&255;A[f++]=255}L=8-q%8;for(E=7;E>=L;E--)qa=w[u[ua+ia]>>E&1],A[f++]=qa&255,A[f++]=qa>>8&255,A[f++]=qa>>16&255,A[f++]=255}v||I.push(new b(l,m,P))}else if(0==u){u=q*r*t;11<u&&(u=g(f));L=q*r;P=L*t;u=11<P?e().uncompress(f.getBytes(u),
0).dest:f.getBytes(P);P=aa.createImageData(q,r);A=P.data;q=f=0;if(3==t)for(E=0;E<L;E++)A[f++]=u[q++],A[f++]=u[q++],A[f++]=u[q++],A[f++]=255;else for(E=0;E<L;E++)r=k(u[q++]|u[q++]<<8),A[f++]=r&255,A[f++]=r>>8&255,A[f++]=r>>16&255,A[f++]=255;v||I.push(new b(l,m,P))}else svGlobal.logger.info("xx filter:"+u)}}}function Fa(a){var b=parseInt(a.substring(0,1),16),c=a.substring(1),d=!1;var e=h.sessionInfo.appInfo;switch(b){case 0:var g=JSON.parse(c);Ia();T=!0;d=g.width;e=g.height;if(d==ma&&e==na)break;ra(d,
e);break;case 1:h.reconnectOnResize=!1;g=JSON.parse(c);e.sessions[g.numericId]=g.name||g.__ip;h.onsessionjoin&&(d=h.onsessionjoin(g));if(d)break;h.showMessage(__svi18n.info.joinsession.applyArgs([g.numericId,g.__ip,g.name]));break;case 2:g=JSON.parse(c);delete e.sessions[g.numericId];h.onsessionexit&&(d=h.onsessionexit(g));if(d)break;h.showMessage(__svi18n.info.exitsession.applyArgs([g.numericId,g.__ip,g.name]));break;case 3:g=JSON.parse(c);e.joinMode!=g.mode&&(e.joinMode=g.mode,a=hi5.$("joinSelect"))&&
(a.value=g.mode);if(e.hasControl)break;J.setReadOnly(!1,2==g.mode);if(e=hi5.$("requestControl"))e.disabled=!0;h.ongivecontrol&&(d=h.ongivecontrol());if(d)break;h.showMessage(__svi18n.info.givecontrol);break;case 4:g=JSON.parse(c);J.setReadOnly(!0,2==g.mode);e.hasControl=!1;if(e=hi5.$("requestControl"))e.disabled=!1;h.ontakebackcontrol&&(d=h.ontakebackcontrol());if(d)break;h.showMessage(__svi18n.info.nocontrol);break;case 5:g=JSON.parse(c);h.onrequirecontrol&&(d=h.onrequirecontrol(g));if(d)break;d=
__svi18n.info.title.applyArgs([g.name,g.numericId,g.__ip]);h.showMessage({title:d,msg:__svi18n.info.recontrol,cbYes:function(){h.giveControl(g.numericId);this.destroy()},cbNo:function(){h.refuseControl(g.numericId);this.destroy()}});break;case 9:g=JSON.parse(c);0<g.interval&&0<g.width?mb(g.width,g.interval):Y&&(Y.stop(),Y=null);break;case 10:if(1==a.length)K("8E8"+hi5.Base64.enc(pb()));else if(qb(hi5.Base64.dec(a.substring(1),0)),h.refreshOutput(),oa=!0,h.onloggedin)h.onloggedin();ba&&ba.check(15555);
break;case 11:g=JSON.parse(c),h.onrequirejoin&&(d=h.onrequirejoin(g)),d||(d=__svi18n.info.title.applyArgs([g.name,g.numericId,g.__ip]),h.showMessage({title:d,msg:__svi18n.info.reqjoin,cbYes:function(){h.allowJoin(g.numericId,!0);this.destroy()},cbNo:function(){h.allowJoin(g.numericId,!1);this.destroy()}}))}}function pb(){var a=la.getHistory(),b=ca.getHistory();return a.concat(b)}function qb(a){var b=0,c=a[b++];if(90==c){c=a[b++];var d=a[b++];if(c=(c&255)<<8|d&255)la.setHistory(a.slice(b,b+c)),b+=
c}c=a[b++];84==c&&ca.setHistory(a.slice(b))}function rb(a){if(!h.openLink)return!1;var b=a;a=a.toLowerCase();var c=0==a.indexOf("http://")||0==a.indexOf("https://")||0==a.indexOf("ftp://")||0==a.indexOf("mailto:")||0==a.indexOf("tel:")||0==a.indexOf("callto:");c||(0==a.indexOf("www.")?(c=!0,a="http://"+a):0==a.indexOf("ftp.")&&(c=!0,a="ftp://"+a));if(c){if(0<a.indexOf("\r")||0<a.indexOf("\n"))return!1;if(h.onurlredirection&&h.onurlredirection(c))return!0;J.processLink(b);return!0}return!1}function sb(a,
b,c,d,e,g,k,p,t){this.cache_idx=a;this.rawData=b;this.none=!b;this.hotX=c;this.hotY=d;this.width=e;this.height=g;this.xorSize=p;this.andSize=t;this.result="";this.distance=0;this.bpp=k;this.system="";this.init=function(){if(this.distance){var w=0;if(b)for(var z=0,H=b.length;z<H;z++)0!=b[z]&&(w+=z%e+(z/e|0));this.distance=w}this.system||(w=507==this.distance?"text":"",this.system=w)};a="";if(!this.system&&b){var x=e*g*4;k=62+x+p+t;var C=new Uint8Array(k);k=new hi5.DataBuffer(C,0,k);k.setLittleEndian16(0);
k.setLittleEndian16(2);k.setLittleEndian16(1);k.setByte(e);k.setByte(g);k.setByte(0);k.setByte(0);k.setLittleEndian16(c);k.setLittleEndian16(d);k.setLittleEndian32(40+x+p+t);k.setLittleEndian32(22);k.setLittleEndian32(40);k.setLittleEndian32(e);k.setLittleEndian32(2*g);k.setLittleEndian16(1);k.setLittleEndian16(32);k.setLittleEndian32(0);k.setLittleEndian32(p+t);k.setLittleEndian32(0);k.setLittleEndian32(0);k.setLittleEndian32(0);k.setLittleEndian32(0);for(c=g-1;0<=c;c--)for(d=0;d<e;d++)g=b[e*c+d],
k.setByte(g&255),k.setByte(g>>8&255),k.setByte(g>>16&255),k.setByte(g>>24&255);hi5.browser.isIE||(a="data:image/x-icon;base64,"+hi5.Base64.enc(k.getData()))}this.url=a}function fb(a,b,c,d,e){var g=null,k=d*e,p=0,t=a.getPosition(),x=a.getData();if(ca.inUse){e=aa.createImageData(d,e);if(4==S){if("Uint8ClampedArray"in window)for(d=new Uint32Array(e.data.buffer),p=0;p<k;p++)d[p]=x[t++]<<16|x[t++]<<8|x[t++]|4278190080,t++;else for(d=e.data,g=4*k;p<g;)d[p++]=x[t+2],d[p++]=x[t+1],d[p++]=x[t],d[p++]=255,
t+=4;a.skip(4*k)}else if(1==S){if("Uint8ClampedArray"in window)for(d=new Uint32Array(e.data.buffer),p=0;p<k;p++)d[p]=ea[x[t++]];else{d=e.data;g=4*k;for(var C;p<g;)C=ea[x[t++]],d[p++]=C&255,d[p++]=C>>8&255,d[p++]=C>>16&255,d[p++]=255}a.skip(k)}ca.drawImageData(e,b,c)}else{switch(S){case 4:if(0==t%4){t+=3;for(p=0;p<k;p++)x[t]=255,t+=4;g=new Uint32Array(a.getData().buffer,a.getPosition(),k)}else for(g=new Uint32Array(k),p=0;p<k;p++)g[p]=x[t++]|x[t++]<<8|x[t++]<<16|4278190080,t++;a.skip(4*k);break;case 1:g=
new Uint32Array(k);for(p=0;p<k;p++)g[p]=ea[x[t++]];a.skip(k)}M.setRGBs(b,c,d,e,g,0,d);M.postPaint(b,c,d,e)}}function ra(a,b){if(a&&b){if(ma=a,na=b,y.width=a,y.height=b,M.resize(a,b),J&&J.setSize(a,b),h.onresolutionchange)h.onresolutionchange(a,b)}else Za("C_1","Invalid monitor size, width:"+a+" h:"+b)}function tb(a){if(oa&&a&&(a=a.getData("text/plain"))){var b=a.length,c=new Int8Array(9+b);c[0]=147;c[1]=6;c[5]=b>>24&255;c[6]=b>>16&255;c[7]=b>>8&255;c[8]=b&255;for(var d=0;d<b;d++)c[9+d]=a.charCodeAt(d);
K(c.buffer)}}function Ia(){T=!1;ca=new eb;la=new Ja}function Qa(a,b,c,d){oa&&(gb=a,(a?1<<b:0)!=V[1]||c!=(V[2]<<8|V[3])||d!=(V[4]<<8|V[5]))&&(V[2]=a?1<<b:0,V[3]=c>>8&255,V[4]=c&255,V[5]=d>>8&255,V[6]=d&255,K(V.buffer))}function fa(a,b,c){if(Ra&&0<c){var d=c;170!=d&&(183==d?d=84:197==d&&(d=198),W[4]=a?1:0,W[5]=b>>24,W[6]=b>>16,W[7]=b>>8,W[8]=b,W[9]=d>>24,W[10]=d>>16,W[11]=d>>8,W[12]=d,K(W.buffer))}else{if(1>b)return;ha[2]=a?1:0;ha[5]=b>>24;ha[6]=b>>16;ha[7]=b>>8;ha[8]=b;K(ha.buffer)}if(h.onkey)h.onkey(a,
b,c)}function hb(a,b){var c=cb[b.toLowerCase()];c?h.writeScancode(a,c):(c=b.length,0!=c&&(1==c?h.writeKeyCode(a,b.toUpperCase().charCodeAt(0)):a&&h.writeText(b)))}this.displayMsg=!0;this.reconnectTimes=0;this.setTitle=this.openLink=!0;this.mode=0;this.CAP_QEMU_KEY=1;var Ka=!1,za="object"==typeof n?n:null,Ba="object"==typeof n||0<n.indexOf("/PLAY?");Ba?(this.mode=1,za&&(n=""),n+="&touchpad=on"):0<n.indexOf("/JOIN?")&&(this.mode=2,this.reconnectOnResize=!1);hi5.appcfg||(hi5.appcfg={img:{},toolbar:{fadable:!0},
displayMsg:!0});var N=hi5.appcfg,y=hi5.tool.queryToObj(n.substring(n.indexOf("?")+1)),ba=null,$a=!1,xa="",Ra=!1;!y.width&&B&&(y.width=B,n+="&width="+B);!y.wHeight&&D&&(y.height=D,n+="&height="+D);!y.color&&G&&(y.color=G,n+="&color="+G);y.color||(y.color=32);var Ha=void 0==y.ignoreCursor||F(y.ignoreCursor),Aa=void 0==y.trackCursorLocally||F(y.trackCursorLocally),h=this;this.server=y.server;this.port=parseInt(y.port,10);this.loadbalanceToken="";N.loadbalanceTokenName&&y[N.loadbalanceTokenName]&&X(y[N.loadbalanceTokenName]);
this.sessionInfo={major:0,minor:0,width:0,height:0,bpp:0,bigEndian:!0,trueColor:!0};this.modifyURL=function(a){h.loadbalanceToken&&(a+="&"+h.loadbalanceToken);return a};var J=null,T=!1,oa=!1,Ga=0,Sa=!1,va=0,wa=0,da=null;window.$vnc=this;var O=new Ta(4194304);this.setLinks=function(a){};this.running=function(){return T};var Q=null,S=4,ma=1024,na=768,ea=[-16777216,-16777180,-16777143,-16777107,-16777070,-16777034,-16776997,-16776961,-16768E3,-16767964,-16767927,-16767891,-16767854,-16767818,-16767781,
-16767745,-16758528,-16758492,-16758455,-16758419,-16758382,-16758346,-16758309,-16758273,-16749312,-16749276,-16749239,-16749203,-16749166,-16749130,-16749093,-16749057,-16739840,-16739804,-16739767,-16739731,-16739694,-16739658,-16739621,-16739585,-16730624,-16730588,-16730551,-16730515,-16730478,-16730442,-16730405,-16730369,-16721152,-16721116,-16721079,-16721043,-16721006,-16720970,-16720933,-16720897,-16711936,-16711900,-16711863,-16711827,-16711790,-16711754,-16711717,-16711681,-11206656,-11206620,
-11206583,-11206547,-11206510,-11206474,-11206437,-11206401,-11197440,-11197404,-11197367,-11197331,-11197294,-11197258,-11197221,-11197185,-11187968,-11187932,-11187895,-11187859,-11187822,-11187786,-11187749,-11187713,-11178752,-11178716,-11178679,-11178643,-11178606,-11178570,-11178533,-11178497,-11169280,-11169244,-11169207,-11169171,-11169134,-11169098,-11169061,-11169025,-11160064,-11160028,-11159991,-11159955,-11159918,-11159882,-11159845,-11159809,-11150592,-11150556,-11150519,-11150483,-11150446,
-11150410,-11150373,-11150337,-11141376,-11141340,-11141303,-11141267,-11141230,-11141194,-11141157,-11141121,-5636096,-5636060,-5636023,-5635987,-5635950,-5635914,-5635877,-5635841,-5626880,-5626844,-5626807,-5626771,-5626734,-5626698,-5626661,-5626625,-5617408,-5617372,-5617335,-5617299,-5617262,-5617226,-5617189,-5617153,-5608192,-5608156,-5608119,-5608083,-5608046,-5608010,-5607973,-5607937,-5598720,-5598684,-5598647,-5598611,-5598574,-5598538,-5598501,-5598465,-5589504,-5589468,-5589431,-5589395,
-5589358,-5589322,-5589285,-5589249,-5580032,-5579996,-5579959,-5579923,-5579886,-5579850,-5579813,-5579777,-5570816,-5570780,-5570743,-5570707,-5570670,-5570634,-5570597,-5570561,-65536,-65500,-65463,-65427,-65390,-65354,-65317,-65281,-56320,-56284,-56247,-56211,-56174,-56138,-56101,-56065,-46848,-46812,-46775,-46739,-46702,-46666,-46629,-46593,-37632,-37596,-37559,-37523,-37486,-37450,-37413,-37377,-28160,-28124,-28087,-28051,-28014,-27978,-27941,-27905,-18944,-18908,-18871,-18835,-18798,-18762,
-18725,-18689,-9472,-9436,-9399,-9363,-9326,-9290,-9253,-9217,-256,-220,-183,-147,-110,-74,-37,-1],M;M?M.resize(1024,768):M=new ja(1024,768);var aa=M.getContext();this.getDesktop=function(){return M};this.writeKeyComb=function(a){a=a.split("+");var b=a.length;if(0!=b){for(var c=null,d=0;d<b;d++){var e=a[d];""==e&&""==c&&(e="Add");""!=e&&hb(!0,e);c=e}for(d=b-1;0<=d;d--)e=a[d],""==e&&""==c&&(e="Add"),""!=e&&hb(!1,e),c=e}};var ka=new function(){this.ws=null;this.capsLock=this.numLock=!1;this.setJoinMode=
h.setJoinMode;this.requestControl=h.requestControl;this.writeKeyComb=h.writeKeyComb;this.remoteLockFlags=this.localLockFlags=0;this.checkLockFlags=!0;var a=0;this.getAppMode=function(){return h.mode};this.send=function(b){T&&this.ws.send(b)};this.sendInput=function(b){h.writeRawInput(b);if(h.onactivity)h.onactivity(b)};this.getAppInfo=function(){return h.sessionInfo.appInfo};this.onresize=function(b){if(b=b.target.svSurface){var c=b.getFreeSpace();b=c.width;c=c.height;a&&(clearTimeout(a),a=0);var d=
setTimeout;if(Sa){var e=new Int8Array(25);e[0]=147;e[1]=251;e[2]=0;e[3]=b>>8;e[4]=b;e[5]=c>>8;e[6]=c;e[7]=1;e[8]=0;e[9]=va>>24;e[10]=va>>16;e[11]=va>>8;e[12]=va;e[13]=0;e[14]=0;e[15]=0;e[16]=0;e[17]=b>>8;e[18]=b;e[19]=c>>8;e[20]=c;e[21]=wa>>24;e[22]=wa>>16;e[23]=wa>>8;e[24]=wa;K(e.buffer)}a=d(void 0,555)}else console.warn("==== no surface for browser resizing")};this.onorientationchange=function(b){};this.getClipData=ib;this.onfocus=function(b){};this.fileCallback=[];this.getShareFiles=function(b,
c){this.ws.send("3A5"+b);this.fileCallback.push(c)};this.notifyFiles=function(b){for(var c=this.fileCallback,d=0,e=c.length;d<e;d++)c[d](b)};this.getFile=function(b){window.open(h.getFileUrl(b))};this.removeFile=function(b){uploadMgr&&uploadMgr.fileService.remove(b)};this.getFileLink=function(b){return Da()+"/DOWNLOAD?s="+xa+"&f="+b};this.getGateway=function(){return n};this.reconnect=function(b,c,d){};this.sendKeyboardSyncFlags=function(b){if(T){var c=this.remoteLockFlags;(c&7)!=b&&((c&4)!=(b&4)&&
(fa(!0,65549,58),fa(!1,65549,58)),(c&2)!=(b&2)&&(fa(!0,65407,69),fa(!1,65407,69)),(c&1)!=(b&1)&&(fa(!0,65300,70),fa(!1,65300,70)));this.remoteLockFlags=this.localLockFlags=b;return!0}return!1}};void 0!=N.displayMsg?this.displayMsg=N.displayMsg:N.displayMsg=this.displayMsg;void 0!=N.reconnectTimes&&(this.reconnectTimes=N.reconnectTimes);void 0!=N.openLink&&(this.openLink=N.openLink);void 0!=N.setTitle&&(this.setTitle=N.setTitle);"boolean"==typeof N.useWSS&&(n=(N.useWSS?"wss":"ws")+n.substring(n.indexOf("://")));
this.getURL=function(){return n};this.getRuntimeURL=function(a){var b=hi5.tool.replaceQuery(n,"pwd","x"),c=Ua(),d="";c&&(d=sessionStorage[c]||"")&&(d="&preSymJoin="+d);b=b+d+"&binary=on";if(d=window.opener){c=null;try{c=d.__sparkUser}catch(e){}c&&(d=c.account,c=c.session,d&&(b+="&account="+d),c&&(b+="&session="+c))}b+="&pasteCap="+(hi5.browser.isChrome&&hi5.browser.isDesktop?3:0);a&&0==h.mode&&N.wsPost&&(b=n.substring(0,n.indexOf("?"))+"?_METHOD=post");b=h.modifyURL(b);(a=hi5.browser.cookie.get("__SV_TOKEN_A"))&&
(b+="&__SV_TOKEN_A="+encodeURIComponent(a));return b};var ub=parseInt(y.server_bpp||y.color||24);this.getColor=function(){return ub};this.getDisplayName=ya;Ea(ya());this.sendPing=function(a){var b=new Uint8Array(a?2+a.length:2);b[0]=146;b[1]=0;a&&b.set(a,2);K(b.buffer)};this.startPing=function(a,b){b=b||0;ba||(ba=new hi5.tool.ResponseMonitor(function(){h.sendPing()},function(){if(T&&h.onnoresponse)return h.onnoresponse()}));ba.setInterval(a,b);var c=new Uint8Array(4);c[0]=146;c[1]=2;c[2]=a;c[3]=b;
K(c.buffer);h.sendPing()};this.stopPing=function(){ba&&ba.stop()};var Y=null;this.setJoinMode=function(a){K("8E1"+a)};this.refuseControl=function(a){K("8E3"+a)};this.giveControl=function(a){K("8E4"+a)};this.requestControl=function(){K("8E2")};this.allowJoin=function(a,b){K("8EA"+a+"\t"+(b?1:0))};this.play=function(){K("F3")};this.pause=function(){K("F2")};this.scan=function(a){K("F4"+(a?"1":"0"))};this.seek=function(a){J&&T&&(K("F4"+(a?"1":"0")+"\t"+(a/J.getScale().x|0)),M.pause(!0))};var Ya=0;this.run=
function(){Va();M.startAnimation()};this.hide=function(){J&&J.hide()};this.showMessage=function(a,b){h.displayMsg&&a&&(J?J.showMessage(a,b):("string"==typeof a&&(a={msg:a,timeout:b||0}),hi5.notifications.notify(a)))};this.close=function(){$a=!0;if(Q&&T)for(;Q&&Q.readyState!=WebSocket.CLOSING&&Q.readyState!=WebSocket.CLOSED;)K("85"),Q.close();else sa()};hi5.browser.isChromeApp?chrome.runtime.onSuspend.addListener(sa):window.addEventListener("unload",sa,!1);var Ca=new U(12,function(a){if(82!=a.getByte()||
70!=a.getByte()||66!=a.getByte())h.showMessage(__svi18n.vnc.notvnc),h.close();else if(a.skip(1),h.sessionInfo.major=100*(a.getByte()-48)+10*(a.getByte()-48)+(a.getByte()-48),a.skip(1),h.sessionInfo.minor=100*(a.getByte()-48)+10*(a.getByte()-48)+(a.getByte()-48),svGlobal.logger.info("RFB major: "+h.sessionInfo.major+" minor: "+h.sessionInfo.minor),a.skip(1),37<=10*h.sessionInfo.major+h.sessionInfo.minor){a="\u0093RFB 003.008\n";for(var b=new Uint8Array(13),c=0;13>c;c++)b[c]=a.charCodeAt(c);K(b.buffer);
O.setHandler(new U(1,function(d){switch(d.getByte()){case 1:8>h.sessionInfo.minor?Na():O.setHandler(new U(4,ta));break;case 2:O.setHandler(new U(16,db));break;case 113:O.setHandler(new U(24,function(t){svGlobal.logger.info("NTLM auth");var x=new Uint8Array(345);x[0]=33;t.copyToByteArray(x,1,t.getPosition(),24);t.skip(24);t=y.user;var C=25,w=t.length;if(t)for(c=0;c<w;c++){var z=t.charCodeAt(c);x[C++]=z&255;x[C++]=z>>8&255}if(178<w)h.showMessage("User name is too long: > 178"),h.close();else{C=281;
if(t=y.pwd){w=t.length;if(32<w){h.showMessage("Password is too long: > 32");h.close();return}for(c=0;c<w;c++)z=t.charCodeAt(c),x[C++]=z&255,x[C++]=z>>8&255}Q.send(x.buffer);O.setHandler(new U(4,ta))}}));break;case 19:break;case 30:svGlobal.logger.info("Apple auth");d=new Uint8Array(321);d[0]=34;var e=y.user,g=0,k=1,p=e.length;if(e){if(178<p){h.showMessage("User name is too long: > 178");h.close();break}for(c=0;c<p;c++)g=e.charCodeAt(c),d[k++]=g&255,d[k++]=g>>8&255}k=257;if(e=y.pwd){p=e.length;if(32<
p){h.showMessage("Password is too long: > 32");h.close();break}for(c=0;c<p;c++)g=e.charCodeAt(c),d[k++]=g&255,d[k++]=g>>8&255}Q.send(d.buffer);O.setHandler(new U(4,ta));break;default:h.showMessage(__svi18n.vnc.securityError),h.close()}}))}else{a="\u0093RFB 003.003\n";b=new Uint8Array(13);for(c=0;13>c;c++)b[c]=a.charCodeAt(c);K(b.buffer);O.setHandler(new U(4,function(d){d=d.getBE32();var e=0,g=0;svGlobal.logger.info("sec type:"+d);switch(d){case 1:Na();break;case 2:O.setHandler(new U(12,db));break;
case -6:O.setHandler(new U(24,function(k){svGlobal.logger.info("NTLM auth");var p=new Uint8Array(345);p[0]=33;k.copyToByteArray(p,1,k.getPosition(),24);k.skip(24);k=y.user;var t=25;if(k)for(e=0,g=k.length;e<g;e++){var x=k.charCodeAt(e);p[t++]=x&255;p[t++]=x>>8&255}t=281;if(k=y.pwd)for(e=0,g=k.length;e<g;e++)x=k.charCodeAt(e),p[t++]=x&255,p[t++]=x>>8&255;K(p.buffer);O.setHandler(new U(4,ta))}));break;default:h.showMessage(__svi18n.vnc.securityError),h.close()}}))}});O.setHandler(Ca);this.refreshOutput=
function(a,b,c,d){a=a||0;b=b||0;Pa(a,b,c?c-a+1:ma,d?d-b+1:na,!1)};var Ma=new U(1,function(a){var b=a.getByte();switch(b){case 0:a.skip(1);b=a.getBE16();for(var c=0;c<b;c++){var d=a.getBE16();var e=a.getBE16();var g=a.getBE16();var k=a.getBE16();var p=a.getBE32()>>>0;switch(p){case 4294967073:ra(g,k);break;case 4294966988:p=a;var t=p.getByte();p.skip(3);for(var x=0;x<t;x++)0==x?(va=p.getBE32(),p.skip(8),wa=p.getBE32()):p.skip(16);if(1==d&&0!=e){switch(e){case 1:p="Resize is administratively prohibited";
break;case 2:p="Out of resources";break;case 3:p="Invalid screen layout";break;default:p="Unknown reason"}Za("C_2","Resize request has been rejected by the server:"+p);Sa=!1}else ra(g,k),Sa=!0;break;case 240:case 4294967056:0!=g*k&&a.skip(((g+7)/8|0)*k*2+6);break;case 4294967057:if(0!=g*k)if(Ha)a.skip(g*k*S+((g+7)/8|0)*k);else{var C;var w=a;p=d;d=(g+7)/8|0;var z=d*k;t=g*k;x=new Uint32Array(t);var H=w.getBytes(t*S),I=w.getBytes(z),f=0,l=0;for(z=0;z<k;z++){for(C=0;C<g/8;C++){var m=I[z*d+C];for(w=7;0<=
w;w--)0!=(m>>w&1)?1!=S&&(f=4278190080|(H[4*l+2]&255)<<16|(H[4*l+1]&255)<<8|H[4*l]&255):f=0,x[l++]=f}for(w=7;w>=8-g%8;w--)f=0!=(I[z*d+C]>>w&1)?1==S?0:4278190080|(H[4*l+2]&255)<<16|(H[4*l+1]&255)<<8|H[4*l]&255:0,x[l++]=f}p=new sb(0,x,p,e,g,k,4,4*t,t/8|0);J.setCursor(p)}break;case 4294967064:break;case 0:0<g*k&&fb(a,d,e,g,k);break;case 1:p=a.getBE16();t=a.getBE16();ca.inUse?aa.putImageData(aa.getImageData(p,t,g,k),d,e):(M.moveArea(p,t,g,k,d-p,e-t),M.postPaint(d,e,g,k));break;case 5:ab.decode(a,d,e,g,
k);break;case 7:ca.decode(a,d,e,g,k,!1);break;case 16:la.decode(a,d,e,g,k,!1);break;case 4294967035:p=a.getByte();e=0!=(p&4);g=0!=(p&2);k=0!=(p&1);ka.remoteLockFlags=p;ka.checkLockFlags=!0;if(h.onLockKeyState)h.onLockKeyState({capsLock:e,numLock:g,scrollLock:k});svGlobal.logger.info("LED state, capsLock:"+e+" numLock:"+g+" scrollLock:"+k);break;case 4294967038:W=new Uint8Array(13);W[0]=147;W[1]=255;W[2]=0;W[3]=0;Ra=!0;J.setUnicode(!1);if(h.oncapability)h.oncapability(h.CAP_QEMU_KEY);svGlobal.logger.warn("QEMU Ext Key enabled");
break;default:svGlobal.logger.warn("Encoding "+p+" is not supported")}}Pa(0,0,ma,na,!0);break;case 1:svGlobal.logger.warn("xxx color map");break;case 2:break;case 3:a.skip(3);b=a.getBE32();0<b&&(a=a.getBytes(b),b=String.fromCharCode.apply(null,a),h.onservercopy&&h.onservercopy(b)||rb(b)||J.copyToClip("text/plain;"+b));break;case 48:b=a.getString16LE(0,a.getEnd());Fa(b);a.skip(a.getEnd()-a.getPosition());break;default:svGlobal.logger.warn("XX PDU:"+b)}});2!=h.mode&&1!=h.mode||O.setHandler(Ma);var ca=
new eb,la=new Ja,ab=new function(){var a=0,b=0;this.decode=function(c,d,e,g,k){var p=d+g,t=e+k;b=a=0;for(var x=e;x<t;x+=16)for(var C=Math.min(16,t-x),w=d;w<p;w+=16){var z=c,H=w,I=x,f=Math.min(16,p-w),l=C,m=z.getByte();if(0!=(m&1))fb(z,H,I,f,l,!1);else if(0!=(m&2)&&(1==S?a=ea[z.getByte()]:(a=z.getByte()|z.getByte()<<8|z.getByte()<<16|4278190080,z.skip(1))),M.fillRect(H,I,f,l,a),0!=(m&4)&&(1==S?b=ea[z.getByte()]:(b=z.getByte()|z.getByte()<<8|z.getByte()<<16|4278190080,z.skip(1))),0!=(m&8)){f=z.getByte();
var q;if(0!=(m&16))if(1==S)for(q=0;q<f;q++){b=ea[z.getByte()];var r=z.getByte();m=r>>4;l=r&15;r=z.getByte();var v=1+(r>>4);r=1+(r&15);M.fillRect(H+m,I+l,v,r,b)}else for(q=0;q<f;q++)b=z.getByte()|z.getByte()<<8|z.getByte()<<16|4278190080,z.skip(1),r=z.getByte(),m=r>>4,l=r&15,r=z.getByte(),v=1+(r>>4),r=1+(r&15),M.fillRect(H+m,I+l,v,r,b);else for(q=0;q<f;q++)r=z.getByte(),m=r>>4,l=r&15,r=z.getByte(),v=1+(r>>4),r=1+(r&15),M.fillRect(H+m,I+l,v,r,b)}}M.postPaint(d,e,g,k)}};this.resetStatus=Ia;this.addSurface=
function(a){J=a;Ba&&a.setPlayerMode();M.setContext(J.context);aa=M.getContext();a.setSize(ma,na);a.setController(ka);a.setFastCopy(F(y.fastCopy));a.setTouchpad(F(y.touchpad));a.setClipboard(F(y.mapClipboard));var b=void 0!=y.ctrlToWin?F(y.ctrlToWin):void 0!=N.ctrlToWin?N.ctrlToWin:!0;a.run(99997,b);J.setImageCursor(!1);Xa(J);a.onclipdata=tb};var V=new Uint8Array(7);V[0]=147;V[1]=5;var gb=!1,R=new Uint8Array(13);R[0]=147;R[1]=5;R[7]=5;R[8]=0;this.mouseDown=function(a,b,c){Qa(!0,c,a,b)};this.mouseMove=
function(a,b){Qa(gb,0,a,b)};this.mouseUp=function(a,b,c){Qa(!1,c,a,b)};this.writeKeyCode=function(a,b){h.writeRawInput("8B"+(a?0:49152)+"\t"+b)};this.writeScancode=function(a,b){T&&("number"==typeof a?(h.writeRawInput("840\t"+a),h.writeRawInput("8449152\t"+a)):h.writeRawInput("84"+(a?0:49152)+"\t"+b))};this.writeText=function(a){h.writeRawInput("86"+a)};var La={57:32,201:65365,209:65366,207:65367,199:65360,203:65361,200:65362,205:65363,208:65364,183:65377,84:65377,197:65299,198:65299,210:65379,211:65535,
184:65514,219:65515,220:65516,1:65307,14:65288,15:65289,28:65293,29:65507,42:65505,54:65506,56:65513,59:65470,60:65471,61:65472,62:65473,63:65474,64:65475,65:65476,66:65477,67:65478,68:65479,87:65480,88:65481,55:65450,69:65407,70:65300,71:65429,72:65431,73:65434,74:65453,75:65430,76:65437,77:65432,78:65451,79:65436,80:65433,81:65435,82:65438,83:65439,156:65421,157:65508,181:65455,toKeySym:function(a){a=La[a];if(ka.localLockFlags&2)switch(a){case 65429:a=55;break;case 65431:a=56;break;case 65434:a=
57;break;case 65430:a=52;break;case 65437:a=53;break;case 65432:a=54;break;case 65436:a=49;break;case 65433:a=50;break;case 65435:a=51;break;case 65438:a=48;break;case 65439:a=46}return a||0}},bb={260:417,728:418,321:419,317:421,346:422,352:425,350:426,356:427,377:428,381:430,379:431,261:433,731:434,322:435,318:437,347:438,711:439,353:441,351:442,357:443,378:444,733:445,382:446,380:447,340:448,258:451,313:453,262:454,268:456,280:458,282:460,270:463,272:464,323:465,327:466,336:469,344:472,366:473,
368:475,354:478,341:480,259:483,314:485,263:486,269:488,281:490,283:492,271:495,273:496,324:497,328:498,337:501,345:504,367:505,369:507,355:510,729:511,294:673,292:678,304:681,286:683,308:684,295:689,293:694,305:697,287:699,309:700,266:709,264:710,288:725,284:728,364:733,348:734,267:741,265:742,289:757,285:760,365:765,349:766,312:930,342:931,296:933,315:934,274:938,290:939,358:940,343:947,297:949,316:950,275:954,291:955,359:956,330:957,331:959,256:960,302:967,278:972,298:975,325:977,332:978,310:979,
370:985,360:989,362:990,257:992,303:999,279:1004,299:1007,326:1009,333:1010,311:1011,371:1017,361:1021,363:1022,8254:1150,12290:1185,12300:1186,12301:1187,12289:1188,12539:1189,12530:1190,12449:1191,12451:1192,12453:1193,12455:1194,12457:1195,12515:1196,12517:1197,12519:1198,12483:1199,12540:1200,12450:1201,12452:1202,12454:1203,12456:1204,12458:1205,12459:1206,12461:1207,12463:1208,12465:1209,12467:1210,12469:1211,12471:1212,12473:1213,12475:1214,12477:1215,12479:1216,12481:1217,12484:1218,12486:1219,
12488:1220,12490:1221,12491:1222,12492:1223,12493:1224,12494:1225,12495:1226,12498:1227,12501:1228,12504:1229,12507:1230,12510:1231,12511:1232,12512:1233,12513:1234,12514:1235,12516:1236,12518:1237,12520:1238,12521:1239,12522:1240,12523:1241,12524:1242,12525:1243,12527:1244,12531:1245,12443:1246,12444:1247,1548:1452,1563:1467,1567:1471,1569:1473,1570:1474,1571:1475,1572:1476,1573:1477,1574:1478,1575:1479,1576:1480,1577:1481,1578:1482,1579:1483,1580:1484,1581:1485,1582:1486,1583:1487,1584:1488,1585:1489,
1586:1490,1587:1491,1588:1492,1589:1493,1590:1494,1591:1495,1592:1496,1593:1497,1594:1498,1600:1504,1601:1505,1602:1506,1603:1507,1604:1508,1605:1509,1606:1510,1607:1511,1608:1512,1609:1513,1610:1514,1611:1515,1612:1516,1613:1517,1614:1518,1615:1519,1616:1520,1617:1521,1618:1522,1106:1697,1107:1698,1105:1699,1108:1700,1109:1701,1110:1702,1111:1703,1112:1704,1113:1705,1114:1706,1115:1707,1116:1708,1118:1710,1119:1711,8470:1712,1026:1713,1027:1714,1025:1715,1028:1716,1029:1717,1030:1718,1031:1719,1032:1720,
1033:1721,1034:1722,1035:1723,1036:1724,1038:1726,1039:1727,1102:1728,1072:1729,1073:1730,1094:1731,1076:1732,1077:1733,1092:1734,1075:1735,1093:1736,1080:1737,1081:1738,1082:1739,1083:1740,1084:1741,1085:1742,1086:1743,1087:1744,1103:1745,1088:1746,1089:1747,1090:1748,1091:1749,1078:1750,1074:1751,1100:1752,1099:1753,1079:1754,1096:1755,1101:1756,1097:1757,1095:1758,1098:1759,1070:1760,1040:1761,1041:1762,1062:1763,1044:1764,1045:1765,1060:1766,1043:1767,1061:1768,1048:1769,1049:1770,1050:1771,1051:1772,
1052:1773,1053:1774,1054:1775,1055:1776,1071:1777,1056:1778,1057:1779,1058:1780,1059:1781,1046:1782,1042:1783,1068:1784,1067:1785,1047:1786,1064:1787,1069:1788,1065:1789,1063:1790,1066:1791,902:1953,904:1954,905:1955,906:1956,938:1957,908:1959,910:1960,939:1961,911:1963,901:1966,8213:1967,940:1969,941:1970,942:1971,943:1972,970:1973,912:1974,972:1975,973:1976,971:1977,944:1978,974:1979,913:1985,914:1986,915:1987,916:1988,917:1989,918:1990,919:1991,920:1992,921:1993,922:1994,923:1995,924:1996,925:1997,
926:1998,927:1999,928:2E3,929:2001,931:2002,932:2004,933:2005,934:2006,935:2007,936:2008,937:2009,945:2017,946:2018,947:2019,948:2020,949:2021,950:2022,951:2023,952:2024,953:2025,954:2026,955:2027,956:2028,957:2029,958:2030,959:2031,960:2032,961:2033,963:2034,962:2035,964:2036,965:2037,966:2038,967:2039,968:2040,969:2041,9143:2209,9484:2210,9472:2211,8992:2212,8993:2213,9474:2214,9121:2215,9123:2216,9124:2217,9126:2218,9115:2219,9117:2220,9118:2221,9120:2222,9128:2223,9132:2224,8804:2236,8800:2237,
8805:2238,8747:2239,8756:2240,8733:2241,8734:2242,8711:2245,8764:2248,8771:2249,8660:2253,8658:2254,8801:2255,8730:2262,8834:2266,8835:2267,8745:2268,8746:2269,8743:2270,8744:2271,8706:2287,402:2294,8592:2299,8593:2300,8594:2301,8595:2302,9670:2528,9618:2529,9225:2530,9228:2531,9229:2532,9226:2533,9252:2536,9227:2537,9496:2538,9488:2539,9492:2541,9532:2542,9146:2543,9147:2544,9148:2546,9149:2547,9500:2548,9508:2549,9524:2550,9516:2551,8195:2721,8194:2722,8196:2723,8197:2724,8199:2725,8200:2726,8201:2727,
8202:2728,8212:2729,8211:2730,8230:2734,8229:2735,8531:2736,8532:2737,8533:2738,8534:2739,8535:2740,8536:2741,8537:2742,8538:2743,8453:2744,8210:2747,9001:2748,9002:2750,8539:2755,8540:2756,8541:2757,8542:2758,8482:2761,9747:2762,9665:2764,9655:2765,9675:2766,9647:2767,8216:2768,8217:2769,8220:2770,8221:2771,8478:2772,8242:2774,8243:2775,10013:2777,9644:2779,9664:2780,9654:2781,9679:2782,9646:2783,9702:2784,9643:2785,9645:2786,9651:2787,9661:2788,9734:2789,8226:2790,9642:2791,9650:2792,9660:2793,
9756:2794,9758:2795,9827:2796,9830:2797,9829:2798,10016:2800,8224:2801,8225:2802,10003:2803,10007:2804,9839:2805,9837:2806,9794:2807,9792:2808,9742:2809,8981:2810,8471:2811,8248:2812,8218:2813,8222:2814,60:2979,62:2982,175:3008,8869:3010,8970:3012,95:3014,8728:3018,9109:3020,8868:3022,8968:3027,8866:3036,8867:3068,8215:3295,1488:3296,1489:3297,1490:3298,1491:3299,1492:3300,1493:3301,1494:3302,1495:3303,1496:3304,1497:3305,1498:3306,1499:3307,1500:3308,1501:3309,1502:3310,1503:3311,1504:3312,1505:3313,
1506:3314,1507:3315,1508:3316,1509:3317,1510:3318,1511:3319,1512:3320,1513:3321,1514:3322,3585:3489,3586:3490,3587:3491,3588:3492,3589:3493,3590:3494,3591:3495,3592:3496,3593:3497,3594:3498,3595:3499,3596:3500,3597:3501,3598:3502,3599:3503,3600:3504,3601:3505,3602:3506,3603:3507,3604:3508,3605:3509,3606:3510,3607:3511,3608:3512,3609:3513,3610:3514,3611:3515,3612:3516,3613:3517,3614:3518,3615:3519,3616:3520,3617:3521,3618:3522,3619:3523,3620:3524,3621:3525,3622:3526,3623:3527,3624:3528,3625:3529,3626:3530,
3627:3531,3628:3532,3629:3533,3630:3534,3631:3535,3632:3536,3633:3537,3634:3538,3635:3539,3636:3540,3637:3541,3638:3542,3639:3543,3640:3544,3641:3545,3642:3546,3647:3551,3648:3552,3649:3553,3650:3554,3651:3555,3652:3556,3653:3557,3654:3558,3655:3559,3656:3560,3657:3561,3658:3562,3659:3563,3660:3564,3661:3565,3664:3568,3665:3569,3666:3570,3667:3571,3668:3572,3669:3573,3670:3574,3671:3575,3672:3576,3673:3577,12593:3745,12594:3746,12595:3747,12596:3748,12597:3749,12598:3750,12599:3751,12600:3752,12601:3753,
12602:3754,12603:3755,12604:3756,12605:3757,12606:3758,12607:3759,12608:3760,12609:3761,12610:3762,12611:3763,12612:3764,12613:3765,12614:3766,12615:3767,12616:3768,12617:3769,12618:3770,12619:3771,12620:3772,12621:3773,12622:3774,12623:3775,12624:3776,12625:3777,12626:3778,12627:3779,12628:3780,12629:3781,12630:3782,12631:3783,12632:3784,12633:3785,12634:3786,12635:3787,12636:3788,12637:3789,12638:3790,12639:3791,12640:3792,12641:3793,12642:3794,12643:3795,4520:3796,4521:3797,4522:3798,4523:3799,
4524:3800,4525:3801,4526:3802,4527:3803,4528:3804,4529:3805,4530:3806,4531:3807,4532:3808,4533:3809,4534:3810,4535:3811,4536:3812,4537:3813,4538:3814,4539:3815,4540:3816,4541:3817,4542:3818,4543:3819,4544:3820,4545:3821,4546:3822,12653:3823,12657:3824,12664:3825,12671:3826,12673:3827,12676:3828,12678:3829,12685:3830,12686:3831,4587:3832,4592:3833,4601:3834,8361:3839,8364:5028,338:5052,339:5053,376:5054},ha=new Uint8Array(9);ha[0]=147;ha[1]=4;var W=null;this.writeRawInput=function(a){if(oa){var b=
parseInt(a.substring(0,2),16);a=a.substring(2).split("\t");switch(b){case 128:h.mouseDown(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]));break;case 129:h.mouseUp(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]));break;case 130:h.mouseMove(parseInt(a[0]),parseInt(a[1]));break;case 131:b=0!=parseInt(a[2]);var c=parseInt(a[0]);a=parseInt(a[1]);oa&&(R[2]=b?16:8,R[3]=c>>8&255,R[4]=c&255,R[5]=a>>8&255,R[6]=a&255,R[9]=R[3],R[10]=R[4],R[11]=R[5],R[12]=R[6],K(R.buffer));break;case 132:b=La.toKeySym(a[1]);0==b&&
a[2]&&(b=a[2].charCodeAt(0));c=0==a[0];fa(c,b,parseInt(a[1],10));break;case 139:c=0==a[0];b=parseInt(a[1]);b=String.fromCharCode(b).toLocaleLowerCase().charCodeAt(0);fa(c,b,parseInt(a[2]));break;case 134:if(!Ra){c=0;for(var d=a[0].length;c<d;c++){b=a[0].charCodeAt(c);if(255<b){var e=bb[b];b=e?e:b|16777216}fa(!0,b,0);fa(!1,b,0)}}}}};var cb={" ":57,space:57,pageup:201,pagedown:209,end:207,home:199,left:203,up:200,right:205,down:208,printscreen:183,insert:210,del:211,"delete":211,altgr:184,windows:219,
windowsright:220,context:221,esc:1,backspace:14,tab:15,enter:28,meta:29,command:29,ctrl:29,shift:42,alt:56,capslock:58,f1:59,f2:60,f3:61,f4:62,f5:63,f6:64,f7:65,f8:66,f9:67,f10:68,f11:87,f12:88,numlock:69,scrolllock:70,add:78}};
