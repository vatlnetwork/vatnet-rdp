var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(K,M,S){if(K==Array.prototype||K==Object.prototype)return K;K[M]=S.value;return K};
$jscomp.getGlobal=function(K){K=["object"==typeof globalThis&&globalThis,K,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var M=0;M<K.length;++M){var S=K[M];if(S&&S.Math==Math)return S}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(K,M){var S=$jscomp.propertyToPolyfillSymbol[M];if(null==S)return K[M];S=K[S];return void 0!==S?S:K[M]};$jscomp.polyfill=function(K,M,S,X){M&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(K,M,S,X):$jscomp.polyfillUnisolated(K,M,S,X))};
$jscomp.polyfillUnisolated=function(K,M,S,X){S=$jscomp.global;K=K.split(".");for(X=0;X<K.length-1;X++){var U=K[X];if(!(U in S))return;S=S[U]}K=K[K.length-1];X=S[K];M=M(X);M!=X&&null!=M&&$jscomp.defineProperty(S,K,{configurable:!0,writable:!0,value:M})};
$jscomp.polyfillIsolated=function(K,M,S,X){var U=K.split(".");K=1===U.length;X=U[0];X=!K&&X in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var va=0;va<U.length-1;va++){var N=U[va];if(!(N in X))return;X=X[N]}U=U[U.length-1];S=$jscomp.IS_SYMBOL_NATIVE&&"es6"===S?X[U]:null;M=M(S);null!=M&&(K?$jscomp.defineProperty($jscomp.polyfills,U,{configurable:!0,writable:!0,value:M}):M!==S&&($jscomp.propertyToPolyfillSymbol[U]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(U):$jscomp.POLYFILL_PREFIX+
U,U=$jscomp.propertyToPolyfillSymbol[U],$jscomp.defineProperty(X,U,{configurable:!0,writable:!0,value:M})))};$jscomp.polyfill("Array.prototype.fill",function(K){return K?K:function(M,S,X){var U=this.length||0;0>S&&(S=Math.max(0,U+S));if(null==X||X>U)X=U;X=Number(X);0>X&&(X=Math.max(0,U+X));for(S=Number(S||0);S<X;S++)this[S]=M;return this}},"es6","es3");$jscomp.typedArrayFill=function(K){return K?K:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
var rdpcodecs=rdpcodecs||new function(){function K(){var ca=new Uint32Array(10240),aa=0,r=new Uint8Array(10240),B=0,A=new Uint8Array(10240),q=0,d=new Uint8Array(10240),y=0,p=new Uint8Array(0),l=0;this.getData=function(){return ca};this.getDataSize=function(){return aa};this.resetData=function(k){ca.length<k&&(ca=new Uint32Array(k));aa=k;return ca};this.resetLumaPlane=function(k){r.length<k&&(r=new Uint8Array(k));B=k;return r};this.getLumaPlanceSize=function(){return B};this.resetOrangeChromaPlane=
function(k){A.length<k&&(A=new Uint8Array(k));q=k;return A};this.getOrangeChromaPlane=function(){return q};this.resetGreenChromaPlane=function(k){d.length<k&&(d=new Uint8Array(k));y=k;return d};this.getGreenChromaPlane=function(){return y};this.resetAlphaPlane=function(k){p.length<k&&(p=new Uint8Array(k));l=k;return p};this.getAlphaPlane=function(){return l}}function M(ca,aa,r){var B=ca,A=r,q=0,d=8,y=aa;this.attach=function(p,l,k){B=p;A=k;q=0;d=8;y=l};this.getBits=function(p){for(var l,k=0;q<A&&0<
p;)l=p,l>d&&(l=d),0!=k&&(k<<=l),k|=B[q+y]>>d-l&(1<<l)-1,d-=l,p-=l,0==d&&(d=8,q++);return k};this.putBits=function(p,l){for(var k;q<A&&0<l;)k=l,k>d&&(k=d),B[q+y]|=(p>>l-k&(1<<k)-1)<<d-k,d-=k,l-=k,0==d&&(d=8,q++)};this.eos=function(){return q>=A};this.left=function(){return q>=A?0:8*(A-q-1)+d};this.getProcessBytes=function(){return 8>d?q+1:q}}function S(){this.y=this.x=this.CrLen=this.CbLen=this.YLen=this.quantIdxCr=this.quantIdxCb=this.quantIdxY=0;this.data=new Uint32Array(4096)}function X(){function ca(B,
A,q,d,y,p,l){q=B.et;var k=4096,h=B.bitStream,e=1,n=e<<3,x=1,g=x<<3,f=0;for(null==h?h=new M(d,y,p):h.attach(d,y,p);!h.eos()&&0<k;)if(0!=e){for(;!h.eos();){y=h.getBits(1);if(0!=y)break;d=e=1<<e;d>k&&(d=k);0<d&&(Ka(l,f,f+d,0),f+=d);k-=e;n+=4;80<n&&(n=80);0>n&&(n=0);e=n>>3}d=e=h.getBits(e);d>k&&(d=k);0<d&&(Ka(l,f,f+d,0),f+=d);k-=e;e=h.getBits(1);d=0;do if(y=h.getBits(1),1==y)d++;else break;while(1);y=h.getBits(x);y|=d<<x;0==d?(g+=-2,80<g&&(g=80),0>g&&(g=0),x=g>>3):1!=d&&(g+=d,80<g&&(g=80),0>g&&(g=0),
x=g>>3);d=y+1;0<k&&(l[f++]=0!=e?-d:d);k--;n+=-6;80<n&&(n=80);0>n&&(n=0);e=n>>3}else{d=0;do if(y=h.getBits(1),1==y)d++;else break;while(1);y=h.getBits(x);y|=d<<x;0==d?(g+=-2,80<g&&(g=80),0>g&&(g=0),x=g>>3):1!=d&&(g+=d,80<g&&(g=80),0>g&&(g=0),x=g>>3);d=y;if(1!=q){p=d;for(y=0;0!=p;)p>>=1,y++;y=h.getBits(y);d-=y;0!=y&&0!=d?(n+=-6,80<n&&(n=80),0>n&&(n=0),e=n>>3):0==y&&0==d&&(n+=6,80<n&&(n=80),0>n&&(n=0),e=n>>3);0<k&&(l[f++]=0!=(y&1)?-1*(y+1>>1):y>>1);k--;0<k&&(l[f++]=0!=(d&1)?-1*(d+1>>1):d>>1);k--}else 0==
d?(0<k&&(l[f++]=0),k--,n+=3):(0<k&&(l[f++]=0!=(d&1)?-1*(d+1>>1):d>>1),k--,n+=-3),80<n&&(n=80),0>n&&(n=0),e=n>>3}q=64;k=4032;for(h=4033;1<q;k++,h++,q--)l[h]+=l[k];r(l,0,4096,5);r(l,0,1024,A[8]-6);r(l,1024,1024,A[7]-6);r(l,2048,1024,A[9]-6);r(l,3072,256,A[5]-6);r(l,3328,256,A[4]-6);r(l,3584,256,A[6]-6);r(l,3840,64,A[2]-6);r(l,3904,64,A[1]-6);r(l,3968,64,A[3]-6);r(l,4032,64,A[0]-6);B=B.dwtBuffer;aa(l,3840,B,8);aa(l,3072,B,16);aa(l,0,B,32)}function aa(B,A,q,d){var y,p;var l=d<<1;var k=A+d*d*3;var h=A;
var e=0;var n=A+d*d;var x=A+d*d*2;var g=d*d*2;for(y=0;y<d;y++){q[e]=B[k]-(B[h]+B[h]+1>>1)<<16>>16;q[g]=B[n]-(B[x]+B[x]+1>>1)<<16>>16;for(p=1;p<d;p++){var f=p<<1;q[e+f]=B[k+p]-(B[h+p-1]+B[h+p]+1>>1)<<16>>16;q[g+f]=B[n+p]-(B[x+p-1]+B[x+p]+1>>1)<<16>>16}for(p=0;p<d-1;p++)f=p<<1,q[e+f+1]=(B[h+p]<<1)+(q[e+f]+q[e+f+2]>>1)<<16>>16,q[g+f+1]=(B[x+p]<<1)+(q[g+f]+q[g+f+2]>>1)<<16>>16;f=p<<1;q[e+f+1]=(B[h+p]<<1)+q[e+f]<<16>>16;q[g+f+1]=(B[x+p]<<1)+q[g+f]<<16>>16;k+=d;h+=d;e+=l;n+=d;x+=d;g+=l}for(f=0;f<l;f++){for(p=
0;p<d;p++)y=p<<1,e=A+y*l+f,g=p*l+f,h=g+d*l,B[e]=q[g]-((0<p?q[h-l]:q[h])+q[h]+1>>1)<<16>>16;for(p=0;p<d;p++)y=p<<1,e=A+y*l+f,g=p*l+f,h=g+d*l,B[e+l]=(q[h]<<1)+(B[e]+B[e+(p<d-1?2*l:0)]>>1)<<16>>16}}function r(B,A,q,d){if(0!=d)for(;0<q;A++,q--)B[A]<<=d}this.decodeRgb=function(B,A,q,d,y,p,l,k,h,e){ca(B,q,y,A.getData(),A.getPosition(),d,B.yrBuffer);A.skipPosition(d);ca(B,q,l,A.getData(),A.getPosition(),p,B.cbgBuffer);A.skipPosition(p);ca(B,q,h,A.getData(),A.getPosition(),k,B.crbBuffer);A.skipPosition(k);
A=B.yrBuffer;q=B.cbgBuffer;d=B.crbBuffer;for(p=0;4096>p;p++)l=A[p],k=q[p],h=d[p],l=l+4096<<16,y=l+91947*h,h=l-22544*k-46792*h,l+=115998*k,y>>=21,h>>=21,l>>=21,A[p]=0>y?0:255<y?255:y,q[p]=0>h?0:255<h?255:h,d[p]=0>l?0:255<l?255:l;A=B.yrBuffer;q=B.cbgBuffer;B=B.crbBuffer;for(d=0;4096>d;d++)e[d]=4278190080|B[d]<<16|q[d]<<8|A[d]}}function U(ca){var aa=[new hi5.graphic.Rectangle],r=[new S],B=0,A=0;this.resetRects=function(q){if(aa.length<q){var d=aa.length;for(aa.length=q;d<q;d++)aa[d]=new hi5.graphic.Rectangle}B=
q;return aa};this.resetTiles=function(q){var d=0;if(ca){if(r.length<q)for(d=r.length,r.length=q;d<q;d++)r[d]=new S}else for(;d<q;d++)r[d]=new S;A=q;return r};this.getRectSize=function(){return B};this.getTileSize=function(){return A};this.getRects=function(){return aa};this.getTiles=function(){return r}}function va(){this.ctxId=0;this.tileSize=64;this.qt=this.et=this.xft=this.cct=this.flags=0;this.yrBuffer=new Int32Array(4096);this.cbgBuffer=new Int32Array(4096);this.crbBuffer=new Int32Array(4096);
this.dwtBuffer=new Int32Array(4096);var ca=this;this.setProperties=function(aa){ca.flags=aa&7;ca.cct=aa>>3&3;ca.xft=aa>>5&15;ca.et=aa>>9&15};this.bitStream=new M}var N=hi5.Arrays.arraycopy,Ka=hi5.Arrays.fill;this.flipimage=function(ca,aa,r,B,A,q){q*=B;for(var d=0;d<A;d++)B=aa+(A-d-1)*q,N(ca,B,r,d*q,q)};this.Bitmap=function(ca,aa,r,B,A,q,d,y){this.data=ca;this.left=B;this.top=A;this.width=aa;this.height=r;this.bitsperpixel=q;this.bytesperpixel=Math.floor((q+7)/8);this.raw=d;this.codec=y||0};this.NSCodec=
function(){function ca(r,B,A,q,d){if(0==A)Ka(q,0,d,255);else if(A<d){var y=d;for(d=0;4<y;){var p=r[B++];5==y?(q[d++]=p,y--):p==r[B]?(B++,255>(r[B]&255)?(A=r[B++]&255,A+=2):(B++,A=(r[B+3]&255)<<24|(r[B+2]&255)<<16|(r[B+1]&255)<<8|r[B]&255,B+=4),Ka(q,d,d+A,p),d+=A,y-=A):(q[d++]=p,y--)}for(A=0;4>A;A++)q[d++]=r[B++]}else N(r,B,q,0,d)}var aa=new K;this.getData=function(){return aa.getData()};this.getDataSize=function(){return aa.getDataSize()};this.process=function(r,B,A,q){B=r.getLittleEndian32();var d=
r.getLittleEndian32(),y=r.getLittleEndian32();r.skipPosition(4);var p=r.getByte(),l=r.getByte();r.skipPosition(2);var k=r.getData(),h=r.getPosition(),e=aa.resetData(A*q),n=A+(~(A&7)+1&7),x=q+(~(q&1)+1&1);var g=n*x;var f=aa.resetLumaPlane(g),z=aa.resetOrangeChromaPlane(g);g=aa.resetGreenChromaPlane(g);var m=A*q;x=0<l?(n>>1)*(x>>1):m;var t=0<l?x:m;ca(k,h,B,f,0<l?n*q:m);h+=B;ca(k,h,d,z,x);ca(k,h+d,y,g,t);k=0;h=A+(~(A&7)+1&7);var L=p-1;for(n=0;n<q;n++)for(0<l?(m=n*h,x=(n>>1)*(h>>1),t=(n>>1)*(h>>1)):(m=
n*A,x=n*A,t=n*A),p=0;p<A;p++){var C=f[m]&255;var u=(z[x]&255)<<L<<24>>24;var G=g[t]<<L<<24>>24;var I=C+u-G;var D=C+G;C=C-u-G;C=0>C?0:255<C?255:C;D=0>D?0:255<D?255:D;I=0>I?0:255<I?255:I;e[k++]=4278190080|C<<16|D<<8|I;m++;x+=0<l?p%2:1;t+=0<l?p%2:1}r.skipPosition(B+d+y)}};this.RemoteFX=function(ca){var aa=new U(!ca);ca=new X;var r=new va;this.decode=function(A,q){for(q=A.getPosition()+q;A.getPosition()<q;){var d=A.getLittleEndian16();var y=A.getLittleEndian32();if(0==y)break;y=A.getPosition()-6+y;switch(d){case 52416:d=
A;d.getLittleEndian32();d.getLittleEndian16();break;case 52417:A.skipPosition(4);break;case 52418:d=A;for(var p=d.getByte(),l=0;l<p;l++){var k=d.getByte(),h=d.getLittleEndian16(),e=d.getLittleEndian16();svGlobal.logger.info("Channel, id:"+k+" width:"+h+" height:"+e)}break;case 52419:d=A;d.skipPosition(2);r.ctxId=d.getByte();r.tileSize=d.getLittleEndian16();r.setProperties(d.getLittleEndian16());break;case 52420:A.skipPosition(10);break;case 52421:A.skipPosition(2);break;case 52422:d=A;d.skipPosition(2);
d.skipPosition(1);p=d.getLittleEndian16();l=aa.resetRects(p);for(k=0;k<p;k++)h=l[k],h.x=d.getLittleEndian16(),h.y=d.getLittleEndian16(),h.width=d.getLittleEndian16(),h.height=d.getLittleEndian16();d.skipPosition(4);break;case 52423:d=A;p=r;d.skipPosition(6);l=d.getLittleEndian16();p.cct=l>>>4&3;p.xft=l>>>6&15;p.et=l>>>10&15;p.qt=l>>>14&3;var n=d.getByte();d.skipPosition(1);k=d.getLittleEndian16();d.skipPosition(4);h=Array(10*n);var x=0;for(l=0;l<n;l++)e=d.getByte(),h[x++]=e&15,h[x++]=e>>>4,e=d.getByte(),
h[x++]=e&15,h[x++]=e>>>4,e=d.getByte(),h[x++]=e&15,h[x++]=e>>>4,e=d.getByte(),h[x++]=e&15,h[x++]=e>>>4,e=d.getByte(),h[x++]=e&15,h[x++]=e>>>4;e=aa.resetTiles(k);for(l=0;l<k;l++){n=e[l];x=d;var g=n;x.skipPosition(6);g.quantIdxY=x.getByte();g.quantIdxCb=x.getByte();g.quantIdxCr=x.getByte();g.x=64*x.getLittleEndian16();g.y=64*x.getLittleEndian16();g.YLen=x.getLittleEndian16();g.CbLen=x.getLittleEndian16();g.CrLen=x.getLittleEndian16();B(p,d,h,n.YLen,10*n.quantIdxY,n.CbLen,10*n.quantIdxCb,n.CrLen,10*
n.quantIdxCr,n.data)}break;default:svGlobal.logger.warn("unknown blockType 0x%X"+d)}A.setPosition(y)}return aa};var B=ca.decodeRgb;this.getResult=function(){return aa}};this.RDP8BulkData=function(){function ca(f){for(;l<f;)p<<=8,A<q&&(p+=B[A++]),l+=8;y-=f;l-=f;d=p>>l;p&=(1<<l)-1}function aa(f,z,m){if(!(0>=m)){if(25E5<m){var t=m-25E5;m=25E5;z+=t;n=(n+t)%25E5}25E5>=n+m?(g(f,z,e,n,m),25E5==(n+=m)&&(n=0)):(t=25E5-n,g(f,z,e,n,t),g(f,z+t,e,0,m-t),n=m-t)}}var r=[[1,0,8,0,0],[5,17,5,1,0],[5,18,7,1,32],[5,
19,9,1,160],[5,20,10,1,672],[5,21,12,1,1696],[5,24,0,0,0],[5,25,0,0,1],[6,44,14,1,5792],[6,45,15,1,22176],[6,52,0,0,2],[6,53,0,0,3],[6,54,0,0,255],[7,92,18,1,54944],[7,93,20,1,317088],[7,110,0,0,4],[7,111,0,0,5],[7,112,0,0,6],[7,113,0,0,7],[7,114,0,0,8],[7,115,0,0,9],[7,116,0,0,10],[7,117,0,0,11],[7,118,0,0,58],[7,119,0,0,59],[7,120,0,0,60],[7,121,0,0,61],[7,122,0,0,62],[7,123,0,0,63],[7,124,0,0,64],[7,125,0,0,128],[8,188,20,1,1365664],[8,189,21,1,2414240],[8,252,0,0,12],[8,253,0,0,56],[8,254,0,0,
57],[8,255,0,0,102],[9,380,22,1,4511392],[9,381,23,1,8705696],[9,382,24,1,17094304],[0]],B=[],A=0,q=0,d=0,y=0,p=0,l=0,k=new Uint8Array(65536),h=0,e=new Uint8Array(25E5),n=0,x=new hi5.DataBuffer(k,0,65536);this.resetHistory=function(){n=d=0};this.release=function(){x=e=k=B=k=null};var g=hi5.Arrays.arraycopy;this.decompress=function(f,z,m){if(1>m)return null;var t=f[z++];m--;h=0;if(t&32)for(B=f,A=z,q=z+m-1,y=8*(m-1)-(B[q]&7),p=l=0;y;)for(f=m=z=0;0!=r[f][0];f++){for(;z<r[f][0];)ca(1),m=(m<<1)+d,z++;
if(m==r[f][1]){if(0==r[f][3])ca(r[f][2]),f=r[f][4]+d,e[n]=f,25E5==++n&&(n=0),k[h++]=f;else{ca(r[f][2]);var L=r[f][4]+d;if(0!=L){ca(1);if(0==d)f=3;else{f=4;z=2;for(ca(1);1==d;)f*=2,z++,ca(1);ca(z);f+=d}z=k;m=h;var C=m;if(!(0>=f)){t=f;var u=(n+25E5-L)%25E5;L=Math.min(t,L);if(25E5>=u+L)g(e,u,z,C,L);else{var G=25E5-u;g(e,u,z,C,G);g(e,0,z,C+G,L-G)}if(0!=(t-=L)){C+=L;u=L;do L=u,L>t&&(L=t),g(z,m,z,C,L),C+=L,u<<=1;while(0<(t-=L))}}aa(k,h,f)}else ca(15),f=d,y-=l,p=l=0,g(B,A,k,h,f),aa(B,A,f),A+=f,y-=8*f;h+=
f}break}}else aa(f,z,m),g(f,z,k,0,m),h=m;x.setPosition(0);x.markEnd(h);return x}};this.bitmap=new function(){function ca(r,B,A,q,d,y){for(var p,l=0,k,h,e,n,x=0,g,f=B,z=y;l<q;){y=z+A*q*4-(l+1)*A*4;e=0;g=y;p=0;if(0==x)for(;p<A;){k=r[B++];h=k&15;k=k>>4&15;n=h<<4|k;47>=n&&16<=n&&(h=n,k=0);for(;0<k;)e=r[B++],d[y]=e,y+=4,p++,k--;for(;0<h;)d[y]=e,y+=4,p++,h--}else for(;p<A;){k=r[B++];h=k&15;k=k>>4&15;n=h<<4|k;47>=n&&16<=n&&(h=n,k=0);for(;0<k;)n=r[B++],0!=(n&1)?(n>>=1,n+=1,e=-n):e=n>>=1,n=d[x+4*p]+e,d[y]=
n,y+=4,p++,k--;for(;0<h;)n=d[x+4*p]+e,d[y]=n,y+=4,p++,h--}l++;x=g}return B-f}function aa(r,B,A,q,d,y){var p,l;for(l=0;l<q;l++)for(p=0;p<A;p++)d[y+4*((q-l-1)*A+p)]=r[B+(l*A+p)]}this.decompressInt16=function(r,B,A,q,d){var y=-1,p=-1;A=d+A;for(var l,k,h,e=r,n=-1,x,g=0,f=0,z=0,m=4294967295,t,L=!1,C=!1,u=new Uint32Array(r*B);d<A;){x=0;k=q[d++];l=k>>4;switch(l){case 12:case 13:case 14:l-=6;k&=15;h=16;break;case 15:l=k&15;9>l?(k=q[d++],k|=q[d++]<<8):k=11>l?8:1;h=0;break;default:l>>=1,k&=31,h=32}0!=h&&(t=
2==l||7==l,0==k?k=t?q[d++]+1:q[d++]+h:t&&(k<<=3));switch(l){case 0:n!=l||e==r&&-1==y||(L=!0);break;case 8:t=q[d++]|q[d++]<<8,g=4278190080|t>>8&248|t>>13&7|(t>>3&252|t>>9&3)<<8|(t<<3&248|t>>2&7)<<16;case 3:t=q[d++]|q[d++]<<8;f=4278190080|t>>8&248|t>>13&7|(t>>3&252|t>>9&3)<<8|(t<<3&248|t>>2&7)<<16;break;case 6:case 7:t=q[d++]|q[d++]<<8;m=4278190080|t>>8&248|t>>13&7|(t>>3&252|t>>9&3)<<8|(t<<3&248|t>>2&7)<<16;l-=5;break;case 9:z=3;l=2;x=3;break;case 10:z=5,l=2,x=5}n=l;for(h=0;0<k;)switch(e>=r&&(e=0,B--,
y=p,p=B*r),l){case 0:L&&(u[p+e]=-1==y?m:u[y+e]^m|4278190080,L=!1,k--,e++);if(-1==y){for(;0!=(k&-8)&&e+8<r;)for(var G=0;8>G;G++)u[p+e]=4278190080,k--,e++;for(;0<k&&e<r;)u[p+e]=4278190080,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)u[p+e]=u[y+e],k--,e++;for(;0<k&&e<r;)u[p+e]=u[y+e],k--,e++}break;case 1:if(-1==y){for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)u[p+e]=m,k--,e++;for(;0<k&&e<r;)u[p+e]=m,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)u[p+e]=u[y+e]^m|4278190080,k--,e++;for(;0<k&&e<r;)u[p+
e]=u[y+e]^m|4278190080,k--,e++}break;case 2:if(-1==y){for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)h<<=1,h&=255,0==h&&(z=0!=x?x&255:q[d++],h=1),u[p+e]=0!=(z&h)?m:4278190080,k--,e++;for(;0<k&&e<r;)h<<=1,h&=255,0==h&&(z=0!=x?x&255:q[d++],h=1),u[p+e]=0!=(z&h)?m:4278190080,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)h<<=1,h&=255,0==h&&(z=0!=x?x&255:q[d++],h=1),u[p+e]=0!=(z&h)?u[y+e]^m|4278190080:u[y+e],k--,e++;for(;0<k&&e<r;)h<<=1,h&=255,0==h&&(z=0!=x?x&255:q[d++],h=1),u[p+e]=0!=(z&h)?u[y+e]^m|4278190080:
u[y+e],k--,e++}break;case 3:for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)u[p+e]=f,k--,e++;for(;0<k&&e<r;)u[p+e]=f,k--,e++;break;case 4:for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)t=q[d++]|q[d++]<<8,u[p+e]=4278190080|t>>8&248|t>>13&7|(t>>3&252|t>>9&3)<<8|(t<<3&248|t>>2&7)<<16,k--,e++;for(;0<k&&e<r;)t=q[d++]|q[d++]<<8,u[p+e]=4278190080|t>>8&248|t>>13&7|(t>>3&252|t>>9&3)<<8|(t<<3&248|t>>2&7)<<16,k--,e++;break;case 8:for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)C?(u[p+e]=f,C=!1):(u[p+e]=g,C=!0,k++),k--,e++;for(;0<k&&
e<r;)C?(u[p+e]=f,C=!1):(u[p+e]=g,C=!0,k++),k--,e++;break;case 13:for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)u[p+e]=4294967295,k--,e++;for(;0<k&&e<r;)u[p+e]=4294967295,k--,e++;break;case 14:for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)u[p+e]=4278190080,k--,e++;for(;0<k&&e<r;)u[p+e]=4278190080,k--,e++;break;default:k--,e++}}return u};this.byte2int=function(r,B,A){B||(B=r.length);A||(A=0);B=Math.floor(B/4);for(var q=new Uint32Array(B),d,y=0;y<B;y++)d=(y<<2)+A,q[y]=(r[d+3]&255)<<24|r[d+2]&255|(r[d+1]&255)<<8|(r[d+
0]&255)<<16;return q};this.decompressInt32=function(r,B,A,q,d){A=q[d];d+=1;var y=r*B,p=new Uint32Array(4*y);if(0==(A&32)){for(var l=d,k,h,e=0,n,x,g,f=l,z=3;e<B;){k=z+r*B*4-(e+1)*r*4;for(h=0;h<r;){n=q[l++];x=n&15;n=n>>4&15;g=x<<4|n;47>=g&&16<=g&&(x=g,n=0);for(;0<n;)l++,p[k]=255,k+=4,h++,n--;for(;0<x;)p[k]=255,k+=4,h++,x--}e++}d+=l-f}else for(k=0;k<y;k++)l=k<<2,p[l+3]=255;0!=(A&16)?(A=ca(q,d,r,B,p,2),d+=A,A=ca(q,d,r,B,p,1),ca(q,d+A,r,B,p,0)):(aa(q,d,r,B,p,2),d+=y,aa(q,d,r,B,p,1),aa(q,d+y,r,B,p,0));
return rdpBitmap.byte2int(p)};this.decompressInt24=function(r,B,A,q,d){var y=-1,p=-1;A=d+A;for(var l,k,h,e=r,n=-1,x,g=0,f=0,z=0,m=4294967295,t=!1,L=!1,C,u=new Uint32Array(r*B);d<A;){x=0;k=q[d++];l=k>>4;switch(l){case 12:case 13:case 14:l-=6;k&=15;h=16;break;case 15:l=k&15;9>l?(k=q[d++],k|=q[d++]<<8):k=11>l?8:1;h=0;break;default:l>>=1,k&=31,h=32}0!=h&&(C=2==l||7==l,0==k?k=C?q[d++]+1:q[d++]+h:C&&(k<<=3));switch(l){case 0:n!=l||e==r&&-1==y||(t=!0);break;case 8:g=4278190080|q[d++]<<16|q[d++]<<8|q[d++];
case 3:f=4278190080|q[d++]<<16|q[d++]<<8|q[d++];break;case 6:case 7:m=4278190080|q[d++]<<16|q[d++]<<8|q[d++];l-=5;break;case 9:z=3;l=2;x=3;break;case 10:z=5,l=2,x=5}n=l;for(h=0;0<k;)switch(e>=r&&(e=0,B--,y=p,p=B*r),l){case 0:t&&(u[p+e]=-1==y?m:u[y+e]^m|4278190080,t=!1,k--,e++);if(-1==y){for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)u[p+e]=4278190080,k--,e++;for(;0<k&&e<r;)u[p+e]=4278190080,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)u[p+e]=u[y+e],k--,e++;for(;0<k&&e<r;)u[p+e]=u[y+e],k--,e++}break;
case 1:if(-1==y){for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)u[p+e]=m,k--,e++;for(;0<k&&e<r;)u[p+e]=m,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)u[p+e]=u[y+e]^m|4278190080,k--,e++;for(;0<k&&e<r;)u[p+e]=u[y+e]^m|4278190080,k--,e++}break;case 2:if(-1==y){for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)h<<=1,h&=255,0==h&&(z=0!=x?x&255:q[d++],h=1),u[p+e]=0!=(z&h)?m:4278190080,k--,e++;for(;0<k&&e<r;)h<<=1,h&=255,0==h&&(z=0!=x?x&255:q[d++],h=1),u[p+e]=0!=(z&h)?m:4278190080,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(C=
0;8>C;C++)h<<=1,h&=255,0==h&&(z=0!=x?x&255:q[d++],h=1),u[p+e]=0!=(z&h)?u[y+e]^m|4278190080:u[y+e],k--,e++;for(;0<k&&e<r;)h<<=1,h&=255,0==h&&(z=0!=x?x&255:q[d++],h=1),u[p+e]=0!=(z&h)?u[y+e]^m|4278190080:u[y+e],k--,e++}break;case 3:for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)u[p+e]=f,k--,e++;for(;0<k&&e<r;)u[p+e]=f,k--,e++;break;case 4:for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)u[p+e]=4278190080|q[d++]<<16|q[d++]<<8|q[d++],k--,e++;for(;0<k&&e<r;)u[p+e]=4278190080|q[d++]<<16|q[d++]<<8|q[d++],k--,e++;break;case 8:for(;0!=
(k&-8)&&e+8<r;)for(C=0;8>C;C++)L?(u[p+e]=f,L=!1):(u[p+e]=g,L=!0,k++),k--,e++;for(;0<k&&e<r;)L?(u[p+e]=f,L=!1):(u[p+e]=g,L=!0,k++),k--,e++;break;case 13:for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)u[p+e]=4294967295,k--,e++;for(;0<k&&e<r;)u[p+e]=4294967295,k--,e++;break;case 14:for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)u[p+e]=4278190080,k--,e++;for(;0<k&&e<r;)u[p+e]=4278190080,k--,e++}}return u};this.decompress=function(r,B,A,q,d){var y=-1,p=0;A+=d;var l=r,k=-1,h=0,e=0,n=0,x=4294967295,g=!1,f=!1,z=new Uint8Array(r*
B);for(z[0]=0;d<A;){var m=0;var t=q[d++];var L=t>>4;switch(L){case 12:case 13:case 14:L-=6;t&=15;var C=16;break;case 15:L=t&15;9>L?(t=q[d++],t|=q[d++]<<8):t=11>L?8:1;C=0;break;default:L>>=1,t&=31,C=32}if(0!=C){var u=2==L||7==L;0==t?t=u?q[d++]+1:q[d++]+C:u&&(t<<=3)}switch(L){case 0:k!=L||l==r&&-1==y||(g=!0);break;case 8:h=q[d++];case 3:e=q[d++];break;case 6:case 7:x=q[d++];L-=5;break;case 9:n=3;L=2;m=3;break;case 10:n=5,L=2,m=5}k=L;for(C=0;0<t;)switch(l>=r&&(l=0,B--,y=p,p=B*r),L){case 0:g&&(z[p+l]=
-1==y?x:z[y+l]^x,g=!1,t--,l++);if(-1==y){for(;0!=(t&-8)&&l+8<r;)for(u=0;8>u;u++)z[p+l]=0,t--,l++;for(;0<t&&l<r;)z[p+l]=0,t--,l++}else{for(;0!=(t&-8)&&l+8<r;)for(u=0;8>u;u++)z[p+l]=z[y+l],t--,l++;for(;0<t&&l<r;)z[p+l]=z[y+l],t--,l++}break;case 1:if(-1==y){for(;0!=(t&-8)&&l+8<r;)for(u=0;8>u;u++)z[p+l]=x,t--,l++;for(;0<t&&l<r;)z[p+l]=x,t--,l++}else{for(;0!=(t&-8)&&l+8<r;)for(u=0;8>u;u++)z[p+l]=z[y+l]^x,t--,l++;for(;0<t&&l<r;)z[p+l]=z[y+l]^x,t--,l++}break;case 2:if(-1==y){for(;0!=(t&-8)&&l+8<r;)for(u=
0;8>u;u++)C<<=1,C&=255,0==C&&(n=0!=m?m:q[d++],C=1),z[p+l]=0!=(n&C)?x:0,t--,l++;for(;0<t&&l<r;)C<<=1,C&=255,0==C&&(n=0!=m?m:q[d++],C=1),z[p+l]=0!=(n&C)?x:0,t--,l++}else{for(;0!=(t&-8)&&l+8<r;)for(u=0;8>u;u++)C<<=1,C&=255,0==C&&(n=0!=m?m:q[d++],C=1),z[p+l]=0!=(n&C)?z[y+l]^x:z[y+l],t--,l++;for(;0<t&&l<r;)C<<=1,C&=255,0==C&&(n=0!=m?m:q[d++],C=1),z[p+l]=0!=(n&C)?z[y+l]^x:z[y+l],t--,l++}break;case 3:for(;0!=(t&-8)&&l+8<r;)for(u=0;8>u;u++)z[p+l]=e,t--,l++;for(;0<t&&l<r;)z[p+l]=e,t--,l++;break;case 4:for(;0!=
(t&-8)&&l+8<r;)for(u=0;8>u;u++)z[p+l]=q[d++],t--,l++;for(;0<t&&l<r;)z[p+l]=q[d++],t--,l++;break;case 8:for(;0!=(t&-8)&&l+8<r;)for(u=0;8>u;u++)f?(z[p+l]=e,f=!1):(z[p+l]=h,f=!0,t++),t--,l++;for(;0<t&&l<r;)f?(z[p+l]=e,f=!1):(z[p+l]=h,f=!0,t++),t--,l++;break;case 13:for(;0!=(t&-8)&&l+8<r;)for(u=0;8>u;u++)z[p+l]=255,t--,l++;for(;0<t&&l<r;)z[p+l]=255,t--,l++;break;case 14:for(;0!=(t&-8)&&l+8<r;)for(u=0;8>u;u++)z[p+l]=0,t--,l++;for(;0<t&&l<r;)z[p+l]=0,t--,l++;break;default:t--,l++}}return z}}};
function RdpGeneral(K,M,S,X,U,va,N){function Ka(){return Ga.displayName||Ga.server||Ga.symlink||Ga.id||"undefined"}function ca(a){return 4278190080|(a<<3&248|a>>2&7)<<16|(a>>3&252|a>>9&3)<<8|a>>8&248|a>>13&7}function aa(a){return 4278190080|ta.paletteRdp[2][a]<<16|ta.paletteRdp[1][a]<<8|ta.paletteRdp[0][a]}function r(a){return 4278190080|a}function B(a){return 4278190080|a}function A(a,v){switch(a){case 16:Ra=ca;dc=rdpBitmap.decompressInt16;break;case 8:Ra=aa;break;case 24:Ra=B;dc=rdpBitmap.decompressInt24;
break;case 32:Ra=r;dc=rdpBitmap.decompressInt32;break;case 15:return Ga.invitation||console.log("15 bit color is not supported anymore."),!1;default:return!1}X=a;db=(a+7)/8>>0;if(v&&Y.onColorChange)Y.onColorChange(a);return!0}function q(a,v,w){M=a;S=v;Q=oa=0;fa=M-1;na=S-1;if(Y.onresolutionchange&&w)Y.onresolutionchange(a,v)}function d(a){hc||Rb&&Z.send(a)}function y(){this.style=this.yOrigin=this.xOrigin=0;this.pattern=Array(8);this.toStream=function(a){a.setByte(this.xOrigin);a.setByte(this.yOrigin);
a.setByte(this.style);a.setBytes(this.pattern)};this.fromStream=function(a){this.xOrigin=a.getByte();this.yOrigin=a.getByte();this.style=a.getByte();this.pattern=a.getBytes(8)};this.byteLength=function(){return 11}}function p(){this.bottom=this.top=this.right=this.left=0;this.toStream=function(a){a.setLittleEndian16(this.left);a.setLittleEndian16(this.right);a.setLittleEndian16(this.top);a.setLittleEndian16(this.bottom)};this.fromStream=function(a){this.left=a.getLittleEndian16();this.right=a.getLittleEndian16();
this.top=a.getLittleEndian16();this.bottom=a.getLittleEndian16()};this.byteLength=function(){return 8}}function l(){this.action=this.offset=this.bottom=this.top=this.right=this.left=0;this.toStream=function(a){a.setLittleEndian16(this.left);a.setLittleEndian16(this.right);a.setLittleEndian16(this.top);a.setLittleEndian16(this.bottom);a.setLittleEndian32(this.offset);a.setByte(this.action)};this.fromStream=function(a){this.left=a.getLittleEndian16();this.right=a.getLittleEndian16();this.top=a.getLittleEndian16();
this.bottom=a.getLittleEndian16();this.offset=a.getLittleEndian32();this.action=a.getByte()};this.byteLength=function(){return 13}}function k(){this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=
a.getByte()};this.byteLength=function(){return 9}}function h(a,v,w,E,H){this.offset=a;this.baseLine=v;this.width=w;this.height=E;this.fontData=H}function e(){this.opcode=this.backgroundColor=this.endY=this.endX=this.startY=this.startX=this.mixmode=0;this.pen=new g;this.toStream=function(a){a.setLittleEndian16(this.mixmode);a.setLittleEndian16(this.startX);a.setLittleEndian16(this.startY);a.setLittleEndian16(this.endX);a.setLittleEndian16(this.endY);a.setLittleEndian32(this.backgroundColor);a.setByte(this.opcode);
this.pen.toStream(a)};this.fromStream=function(a){this.mixmode=a.getLittleEndian16();this.startX=a.getLittleEndian16();this.startY=a.getLittleEndian16();this.endX=a.getLittleEndian16();this.endY=a.getLittleEndian16();this.backgroundColor=a.getLittleEndian32();this.opcode=a.getByte();this.pen.fromStream(a)};this.byteLength=function(){return 15+this.pen.byteLength()}}function n(){this.cacheIDX=this.cacheID=this.colorTable=this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=
function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian16(this.srcX);a.setLittleEndian16(this.srcY);a.setByte(this.cacheID);a.setByte(this.colorTable);a.setLittleEndian16(this.cacheIDX)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.srcX=a.getLittleEndian16();this.srcY=
a.getLittleEndian16();this.cacheID=a.getByte();this.colorTable=a.getByte();this.cacheIDX=a.getLittleEndian16()};this.byteLength=function(){return 17}}function x(){this.foregroundColor=this.backgroundColor=this.opcode=this.cy=this.cx=this.y=this.x=0;this.brush=new y;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian32(this.backgroundColor);a.setLittleEndian32(this.foregroundColor);
this.brush.toStream(a)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.backgroundColor=a.getLittleEndian32();this.foregroundColor=a.getLittleEndian32();this.brush.fromStream(a)};this.byteLength=function(){return 17+this.brush.byteLength()}}function g(){this.color=this.width=this.style=0;this.toStream=function(a){a.setByte(this.style);a.setByte(this.width);a.setLittleEndian32(this.color)};
this.fromStream=function(a){this.style=a.getByte();this.width=a.getByte();this.color=a.getLittleEndian32()};this.byteLength=function(){return 6}}function f(){this.dataSize=this.opcode=this.lines=this.foregroundColor=this.flags=this.y=this.x=0;this.data=[];this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setByte(this.opcode);a.setLittleEndian32(this.foregroundColor);a.setByte(this.lines);a.setByte(this.dataSize);this.dataSize&&a.setBytes(this.data)};this.fromStream=
function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.opcode=a.getByte();this.foregroundColor=a.getLittleEndian32();this.lines=a.getByte();if(this.dataSize=a.getByte())this.data=a.getBytes(this.dataSize)};this.byteLength=function(){return 11+this.dataSize}}function z(){this.color=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setLittleEndian32(this.color)};
this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.color=a.getLittleEndian32()};this.byteLength=function(){return 12}}function m(){this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian16(this.srcX);a.setLittleEndian16(this.srcY)};
this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.srcX=a.getLittleEndian16();this.srcY=a.getLittleEndian16()};this.byteLength=function(){return 13}}function t(){this.length=this.opcode=this.boxBottom=this.boxRight=this.boxTop=this.boxLeft=this.clipBottom=this.clipRight=this.clipTop=this.clipLeft=this.font=this.unknown=this.y=this.x=this.backgroundColor=this.foregroundColor=
this.mixmode=this.flags=0;this.text=null;this.toStream=function(a){a.setByte(this.font);a.setByte(this.flags);a.setByte(this.opcode);a.setByte(this.mixmode);a.setLittleEndian32(this.foregroundColor);a.setLittleEndian32(this.backgroundColor);a.setLittleEndian16(this.clipLeft);a.setLittleEndian16(this.clipTop);a.setLittleEndian16(this.clipRight);a.setLittleEndian16(this.clipBottom);a.setLittleEndian16(this.boxLeft);a.setLittleEndian16(this.boxTop);a.setLittleEndian16(this.boxRight);a.setLittleEndian16(this.boxBottom);
a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setByte(this.length);this.length&&a.setBytes(this.text)};this.fromStream=function(a){this.font=a.getByte();this.flags=a.getByte();this.opcode=a.getByte();this.mixmode=a.getByte();this.foregroundColor=a.getLittleEndian32();this.backgroundColor=a.getLittleEndian32();this.clipLeft=a.getLittleEndian16();this.clipTop=a.getLittleEndian16();this.clipRight=a.getLittleEndian16();this.clipBottom=a.getLittleEndian16();this.boxLeft=a.getLittleEndian16();
this.boxTop=a.getLittleEndian16();this.boxRight=a.getLittleEndian16();this.boxBottom=a.getLittleEndian16();this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();if(this.length=a.getByte())this.text=a.getBytes(this.length)};this.byteLength=function(){return 33+this.length}}function L(){this.orderType=0;this.bounds=new p;this.destBlt=new k;this.patBlt=new x;this.screenBlt=new m;this.line=new e;this.rectangle=new z;this.deskSave=new l;this.memBlt=new n;this.polyLine=new f;this.text2=new t;this._line=
new hi5.graphic.Line;this.paletteRdp=null;this.toPDU=function(){var a=4+this.bounds.byteLength()+this.destBlt.byteLength()+this.patBlt.byteLength()+this.screenBlt.byteLength()+this.line.byteLength()+this.rectangle.byteLength()+this.deskSave.byteLength()+this.memBlt.byteLength()+this.polyLine.byteLength()+this.text2.byteLength()+14+10,v=new Uint8Array(a);v[0]=29;v[2]=1;v[3]=3;a=new hi5.DataBuffer(v,0,a);a.skipPosition(4);this.bounds.toStream(a);this.destBlt.toStream(a);this.patBlt.toStream(a);this.screenBlt.toStream(a);
this.line.toStream(a);this.rectangle.toStream(a);this.deskSave.toStream(a);this.memBlt.toStream(a);this.polyLine.toStream(a);this.text2.toStream(a);a.setLittleEndian16(oa);a.setLittleEndian16(Q);a.setLittleEndian16(fa);a.setLittleEndian16(na);a.setLittleEndian32(Sb);a.setByte(this.orderType);a.setByte(X);Ec.toStream(a);return v};this.fromStream=function(a){this.bounds.fromStream(a);this.destBlt.fromStream(a);this.patBlt.fromStream(a);this.screenBlt.fromStream(a);this.line.fromStream(a);this.rectangle.fromStream(a);
this.deskSave.fromStream(a);this.memBlt.fromStream(a);this.polyLine.fromStream(a);this.text2.fromStream(a);oa=a.getLittleEndian16();Q=a.getLittleEndian16();fa=a.getLittleEndian16();na=a.getLittleEndian16();Sb=a.getLittleEndian32();this.orderType=a.getByte();A(a.getByte(),!0);Ec.fromStream(a)}}function C(){var a=Rb;Mc=Rb=!1;hb();ta=new L;Sb=0;Sa&&Sa.reset();Na&&Na.reset();a&&(Rb=a)}function u(){if(!Rb){Mc=!1;if(hc)Z=hc;else{if(Y.oncreatewebsocket)Z=Y.oncreatewebsocket(K);else{var a=K;0==Y.mode&&N&&
(a=K.substring(0,K.indexOf("?"))+"?_METHOD=post",Ga.loadbalanceTokenName&&Ga[Ga.loadbalanceTokenName]&&(a+="&loadbalanceTokenName="+Ga.loadbalanceTokenName+"&"+Ga.loadbalanceTokenName+"="+Ga[Ga.loadbalanceTokenName]));Z=new WebSocket(a,"rdp")}"binaryType"in Z&&(Z.binaryType="arraybuffer")}Z.onopen=function(v){Rb=!0;if(!N&&Y.onopen)Y.onopen()};"on"==Ga.recording&&(Tb=new RecordingManager,Tb.setHeader({name:"rec",width:M,height:S,color:X,namesuffix:".rdpv",filetag:"RDPV",duration:0}));Z.onmessage=G;
Z.onclose=V;Z.onerror=Y.onerror}}function G(a){var v=a.data;if("string"!=typeof v){var w=new Uint8Array(v);null!=Tb&&Tb.add(new RecordingObj(w,0,v.byteLength,-1));xb.attach(w,0,v.byteLength);var E=xb.getLittleEndian16();switch(E){case 29:D(xb);break;case 48:if(Y.onSlowPath)Y.onSlowPath();var H=xb;H.getLittleEndian16();var J=H.getByte(),P=H.getByte(),O=H.getLittleEndian16(),ba=0!=(P&32);ba&&(O-=18);if(ba)if(3==(P&15)){Na||(Na=new Bulk61Data);var ha=H.getByte(),xa=H.getByte();O-=2;if(0!=(ha&16)&&0!=
(xa&32)){Sa.dec5(H.getData(),H.getPosition(),O,xa);var eb=Sa.getData(),ya=Sa.getDecompressedLength();Na.dec(eb.getData(),eb.getPosition(),ya,ha)}else Na.dec(H.getData(),H.getPosition(),O,ha);var ua=Na.getData()}else Sa.dec(H.getData(),H.getPosition(),O,P),ua=Sa.getData();else ua=H;var R=ua;switch(J){case 2:var yb=R.getLittleEndian16();switch(yb){case 0:R.skipPosition(2);var ic=R.getLittleEndian16();R.skipPosition(2);Aa(R,ic);break;case 1:zb(R);break;case 2:Ha(R);break;case 3:break;default:svGlobal.logger.warn("Unimplemented Update type "+
yb)}break;case 20:break;case 31:Lb=!1;break;case 27:var Ab=R.getLittleEndian16();R.skipPosition(2);switch(Ab){case 3:var Mb=R.getLittleEndian16();var Ia=R.getLittleEndian16();Y.onMoveCursor(Mb,Ia,!0);break;case 6:W(R,24);break;case 7:U.setCursor(R.getLittleEndian16());break;case 1:var Ub=R.getLittleEndian16();switch(Ub){case 0:break;default:svGlobal.logger.warn("XXX system pointer message "+Ub)}break;case 8:var jc=R.getLittleEndian16();W(R,jc)}break;case 34:break;case 38:a:{var Vb=R.getLittleEndian32(),
Bb=Y.sessionInfo;if(3>Vb){var Cb=Y.sessionInfo;switch(Vb){case 0:R.skipPosition(4);Cb.domain=R.getUnicodeString(52,!0);R.skipPosition(4);Cb.userName=R.getUnicodeString(512,!0);Cb.sessionId=R.getLittleEndian32();break;case 1:Cb.version=R.getLittleEndian16();R.skipPosition(4);Cb.sessionId=R.getLittleEndian32();var kc=R.getLittleEndian32();var dd=R.getLittleEndian32();R.skipPosition(558);Cb.domain=R.getUnicodeString(kc,!0);Cb.userName=R.getUnicodeString(dd,!0)}}else if(3==Vb){R.skipPosition(2);var Nc=
R.getLittleEndian32();R.skipPosition(4);if(2==Nc)break a;R.getLittleEndian32();R.skipPosition(4);Bb.sessionId=R.getLittleEndian32();var wc=R.getBytes(16);for(var Zb=Array(16),Xa=0;16>Xa;Xa++)Zb[Xa]=wc[Xa]&255}if(!Mc&&Y.onloggedin)Y.onloggedin(Y.sessionInfo);Mc=!0;var ma="8D";Bb.sessionId&&(ma+=Bb.sessionId+"\t"+(wc?hi5.Base64.enc(wc):0)+"\t"+Bb.userName+"\t"+Bb.domain);xc||d(ma)}Lb=!1;break;case 40:Lb=!1;break;case 41:R.skipPosition(2);var mb=R.getLittleEndian16(),lc=0!=(mb&4),ec=0!=(mb&2),Db=0!=
(mb&1),Eb=0!=(mb&8);if(Y.onLockKeyState)Y.onLockKeyState({capsLock:lc,numLock:ec,scrollLock:Db,kanaLock:Eb});svGlobal.logger.info("LED state, capsLock:"+lc+" numLock:"+ec+" scrollLock:"+Db+" kanaLock:"+Eb);break;case 47:Lb=!0;var Nb=R.getLittleEndian32();svGlobal.logger.info("Disconnect:"+Nb);var ia=11==Nb&&Oc;if(ia)Y.onCloseSurface();if(!(1>Nb||ia)){!xc&&Rb&&d("85"+Nb);var Pc=Nb.toString(16).toUpperCase();if(Y.onerror)Y.onerror(Pc)}break;case 50:R.skipPosition(4);break;case 54:var Qc=R.getLittleEndian32().toString(16).toUpperCase();
svGlobal.logger.warn("server status code:"+Qc);break;case 55:for(var ea=R.getLittleEndian32(),da,Ya,Ob,$b,ja=0,mc=0,ib=0,T=0,la=0;la<ea;la++)da=R.getLittleEndian32(),Ya=R.getLittleEndian32(),Ob=R.getLittleEndian32(),$b=R.getLittleEndian32(),R.skipPosition(4),ja=Math.min(da,ja),mc=Math.max(mc,Ob),ib=Math.min(Ya,ib),T=Math.max(T,$b);da=mc-ja+1;Ya=T-ib+1;svGlobal.logger.warn("monitor, count:"+ea+" w:"+da+" h:"+Ya);q(da,Ya,!0);break;default:svGlobal.logger.warn("Unimplemented Data PDU type "+J)}break;
case 49:if(Y.onFastPath)Y.onFastPath();a:{var jb=xb,fc=jb.getByte(),La=fc&15,ra=fc>>4&3,nb=0;2==(fc>>6&3)&&(nb=jb.getByte());var ob=0!=(nb&32);var Za=jb.getLittleEndian16();if(ob)if(3==(nb&15)){Na||(Na=new Bulk61Data);var Ea=jb.getByte(),Fb=jb.getByte();Za-=2;if(0!=(Ea&16)&&0!=(Fb&32)){Sa.dec5(jb.getData(),jb.getPosition(),Za,Fb);var kb=Sa.getData(),Pb=Sa.getDecompressedLength();Na.dec(kb.getData(),kb.getPosition(),Pb,Ea)}else Na.dec(jb.getData(),jb.getPosition(),Za,Ea);var Ma=Na.getData();Za=Na.getDecompressedLength()}else Sa.dec(jb.getData(),
jb.getPosition(),Za,nb),Ma=Sa.getData(),Za=Sa.getDecompressedLength();else Ma=jb;if(0!=ra)switch(ra){case 2:case 3:Rc.addFragement(Ma,Za);break a;case 1:Rc.addFragement(Ma,Za),Ma=Rc.clearFragements()}var Ba=Ma;za&&za.begin("decodeFastPath");switch(La){case 0:var nc=Ba.getLittleEndian16();Aa(Ba,nc);break;case 1:Ba.skipPosition(2);zb(Ba);break;case 2:Ba.skipPosition(2);Ha(Ba);break;case 3:break;case 4:for(var Sc=Ba.getEnd(),gc,oc;Ba.getPosition()<Sc;){var Fc=Ba.getLittleEndian16();switch(Fc){case 1:case 6:gc=
Ba.getLittleEndian16();oc=Ba.getLittleEndian16();Ba.getLittleEndian16();Ba.getBigEndian16();var Gc=void 0,ab=void 0,qa=Ba,Ua=gc,$a=oc,Hc=qa.getByte();qa.skipPosition(2);var ac=qa.getByte(),Ca=qa.getLittleEndian16(),pb=qa.getLittleEndian16(),Wb=qa.getLittleEndian32(),yc=qa.getPosition()+Wb;switch(ac){case 0:var pc=rdpBitmap.byte2int(qa.getData(),Wb,qa.getPosition());ab=new Uint32Array(pc.length);rdpcodecs.flipimage(pc,0,ab,Ca,pb,1);U.setRGBs(Ua,$a,Ca,pb,ab,0,Ca);break;case 1:bc(qa,Hc,Ca,pb);var Ic=
qc.getData(),Gb=qc.getDataSize();ab=new Uint32Array(Gb);rdpcodecs.flipimage(Ic,0,ab,Ca,pb,1);U.setRGBs(Ua,$a,Ca,pb,ab,0,Ca);break;case 3:for(var Oa=ed.decode(qa,Wb),bb=Oa.getRects(),qb=Oa.getTiles(),zc=Oa.getTileSize(),Xb=Oa.getRectSize(),sa=Xb?new Hb(0,0,0,0):null,Ib=0;Ib<zc;Ib++){var cb=qb[Ib];if(Xb)for(var Ac=0;Ac<Xb;Ac++)bb[Ac].intersection(cb.x,cb.y,64,64,sa),sa.isEmpty()||(Gc=64*(sa.y-cb.y)+(sa.x-cb.x),sa.x+=Ua,sa.y+=$a,U.setRGBs(sa.x,sa.y,sa.width,sa.height,cb.data,Gc,64));else U.setRGBs(cb.x,
cb.y,64,64,cb.data,0,64)}}qa.setPosition(yc);break;case 4:var Tc=Ba,rc=Tc.getLittleEndian16(),Pa=Tc.getLittleEndian32();1==rc&&d("91"+Pa);break;default:svGlobal.logger.warn("Invalid surface cmd:"+Fc)}}break;case 5:break;case 6:break;case 8:break;case 9:W(Ba,24);break;case 10:U.setCursor(Ba.getLittleEndian16());break;case 11:var sc=Ba.getLittleEndian16();W(Ba,sc);break;default:svGlobal.logger.warn("XXX RDP5 opcode "+La)}za&&za.end("decodeFastPath")}break;case 65:var Ja=xb,tc=Ja.getPosition(),Yb=Ja.getByte(),
rb=Ja.getByte();seqNoLow=Ja.getByte();seqNoHigh=Ja.getByte();reqType=Ja.getLittleEndian16;out=null;payloadLen=0;payload=null;averageRTT=bandwidth=baseRTT=0;if(0!=rb)svGlobal.logger.warn("invalid msg channel data");else switch(reqType){case 1:case 4097:out=new Uint8Array(7);out[0]=65;out.set(Ja.getData().subarray(tc,tc+4),1);out[5]=0;out[6]=0;d(out.buffer);break;case 20:case 276:case 4116:break;case 2:8==Yb?(payloadLen=Ja.getLittleEndian16(),payload=Ja.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");
break;case 43:8==Yb?(payloadLen=Ja.getLittleEndian16(),payload=Ja.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");break;case 1065:case 1577:break;case 2112:baseRTT=Ja.getLittleEndian32();averageRTT=Ja.getLittleEndian32();break;case 2176:bandwidth=Ja.getLittleEndian32();averageRTT=Ja.getLittleEndian32();break;case 2240:baseRTT=Ja.getLittleEndian32();bandwidth=Ja.getLittleEndian32();averageRTT=Ja.getLittleEndian32();break;default:svGlobal.logger.warn("Invalid msg channel type:"+reqType)}break;
case 62:I(xb.getUnicodeString(xb.getEnd()-xb.getPosition(),!1));default:if(Y.onmessage)Y.onmessage(a)}}else{E=parseInt(v.substring(0,2),16);var Qa=v.substring(2);switch(E){case 0:var Da=K.substring(K.indexOf("?")+1);d("00"+Da);if(N&&Y.onopen)Y.onopen();break;case 15:if(Y){Uc=Lb=!1;ta=new L;if(Qa){var tb=JSON.parse(Qa);tb.capability&&Y&&(Y.sessionInfo.suppressOutput=!!tb.capability.suppressOutput)}if(!xc&&Y&&Y.onready)Y.onready()}break;case 26:Lb=!0;break;case 56:Y.sessionInfo.appInfo=JSON.parse(Qa);
break;case 62:I(Qa)}Y.onmessage(a)}}function I(a){var v=parseInt(a.substring(0,1),16);a=a.substring(1);switch(v){case 0:a=JSON.parse(a),C(),v=a.width,a=a.height,v==M&&a==S||q(v,a,!1,!1)}}function D(a){var v=a.getByte();if(0==v){svGlobal.logger.info("Send history...");var w=new Uint8Array(4);w[0]=29;w[2]=1;w[3]=1;Z.send(w.buffer);U.getHistory(d,function(){za&&za.begin("his_mppc");(w=Sa.toPDU())&&Z.send(w.buffer);za&&za.end("his_mppc");if(Na){za&&za.begin("his_mppc61");var E=Na.toPDU();E&&Z.send(E.buffer);
za&&za.end("his_mppc61")}za&&za.begin("his_order");Z.send(ta.toPDU().buffer);za&&za.end("his_order");w=new Uint8Array(5);w[0]=29;w[2]=1;w[3]=0;w[4]=1;Z.send(w.buffer)})}else switch(v=a.getByte(),v){case 0:svGlobal.logger.warn("Received history");Y.sessionInfo.suppressOutput&&Ga.monitorDef&&524292==Y.sessionInfo.appInfo.protocolVersion?(Y.suppressOutput(!0),Y.suppressOutput(!1)):Y.refreshOutput(0,0,M-1,S-1);if(Y.onHistoryReceived)Y.onHistoryReceived();break;case 1:break;case 2:za&&za.begin("his_mppc_dec");
Sa.fromStream(a);za&&za.end("his_mppc_dec");break;case 3:za&&za.begin("his_order_dec");ta.fromStream(a);za&&za.end("his_order_dec");break;case 9:Na||(Na=new Bulk61Data);za&&za.begin("his_mppc_dec61");Na.fromStream(a);za&&za.end("his_mppc_dec61");break;default:U.setHistory(v,a)}if(Y.onReqHistory)Y.onReqHistory()}function b(a,v,w,E,H,J,P,O){this.x=a;this.y=v;this.width=w;this.height=E;this.andmask=H;this.xormask=J;this.bpp=P;this.cache_idx=O}function W(a,v){if(!ka){var w=a.getLittleEndian16();var E=
a.getLittleEndian16();var H=a.getLittleEndian16();var J=a.getLittleEndian16();var P=a.getLittleEndian16();var O=a.getLittleEndian16();var ba=a.getLittleEndian16();var ha=a.getBytes(ba);a=a.getBytes(O);if(0>E||E>=J-1)E=0;0>H?H=0:H>=P&&(H=P-1);for(O=0;O<ba&&0==ha[O];O++);a=new b(E,H,J,P,a,ha,v,w);v=a.x;E=a.y;H=a.width;J=a.height;P=a.andmask;ba=a.xormask;ha=a.bpp;a=a.cache_idx;O=new Uint32Array(H*J);var xa=O[0]=0,eb=32==ha,ya,ua;for(ya=0;ya<J;ya++)for(ua=0;ua<H;ua++){O[xa]=wa(ua,ya,H,J,ha,ba);if(!eb){var R=
ya;1!=ha&&(R=J-R-1);R=8*R*((H+7)/8|0)+ua;R=0==(P[R/8>>0]&128>>R%8)?1:0;if(0==R&&0!=O[xa])O[xa]=~O[xa],O[xa]|=4278190080;else if(1==R||0!=O[xa])O[xa]|=4278190080}xa++}v=new pa(a,O,v,E,H,J,ha,ba.length,P.length);U.putCursor(a,v);U.setCursor(w)}}function wa(a,v,w,E,H,J){1!=H&&(v=E-v-1);v=(v*w+a)*H;w=v/8>>0;a=J[w]&255;switch(H){case 1:return 0==(a&128>>v%8)?0:4294967295;case 8:return 0==a?0:4294967295;case 15:return a|=(J[w+1]&255)<<8,H=Array(4),od(a,15,H,0),H[0]<<16|H[1]<<8|H[2];case 16:return a|=(J[w+
1]&255)<<8,H=Array(4),od(a,16,H,0),H[0]<<16|H[1]<<8|H[2];case 24:return(J[w+2]&255)<<16|(J[w+1]&255)<<8|a;case 32:return(J[w+3]&255)<<24|(J[w+2]&255)<<16|(J[w+1]&255)<<8|a}svGlobal.logger.warn("invalid bpp value for Xor Mask.");return 0}function pa(a,v,w,E,H,J,P,O,ba){function ha(){var ya=0;if(v)for(var ua=0,R=v.length;ua<R;ua++)0!=v[ua]&&(ya+=ua%H+(ua/H|0));return ya}function xa(ya){switch(ya){case 0:return"none";case 507:return"text";case 2046:case 4359:return"default";default:return""}}this.cache_idx=
a;this.rawData=v;this.none=!v;this.hotX=w;this.hotY=E;this.width=H;this.height=J;this.xorSize=O;this.andSize=ba;this.result="";this.distance=0;this.bpp=P;this.system="";v&&(this.distance||(this.distance=ha()),this.system||(this.system=xa(this.distance),"none"==this.system&&(v=null)));a="";if(!this.system&&v){P=H*J*4;a=62+P+O+ba;var eb=new Uint8Array(a);a=new hi5.DataBuffer(eb,0,a);a.setLittleEndian16(0);a.setLittleEndian16(2);a.setLittleEndian16(1);a.setByte(H);a.setByte(J);a.setByte(0);a.setByte(0);
a.setLittleEndian16(w);a.setLittleEndian16(E);a.setLittleEndian32(40+P+O+ba);a.setLittleEndian32(22);a.setLittleEndian32(40);a.setLittleEndian32(H);a.setLittleEndian32(2*J);a.setLittleEndian16(1);a.setLittleEndian16(32);a.setLittleEndian32(0);a.setLittleEndian32(O+ba);a.setLittleEndian32(0);a.setLittleEndian32(0);a.setLittleEndian32(0);a.setLittleEndian32(0);for(w=J-1;0<=w;w--)for(E=0;E<H;E++)J=v[H*w+E],a.setByte(J&255),a.setByte(J>>8&255),a.setByte(J>>16&255),a.setByte(J>>24&255);a="data:image/x-icon;base64,"+
hi5.Base64.enc(a.getData())}this.url=a}function Ha(a){var v=0;a.skipPosition(2);var w=a.getLittleEndian16();a.skipPosition(2);var E=Array(w);var H=Array(w);var J=Array(w);a=a.getBytes(3*w);for(var P=0;P<w;P++)E[P]=a[v],H[P]=a[v+1],J[P]=a[v+2],v+=3;256==w&&(ta.paletteRdp||(ta.paletteRdp=Array(3)),ta.paletteRdp[0]=E,ta.paletteRdp[1]=H,ta.paletteRdp[2]=J)}function Aa(a,v){for(var w=0,E,H;w<v;){E=a.getByte();H=E&3;switch(H){case 1:var J=a,P=E;0!=(P&8)&&(ta.orderType=J.getByte());var O=void 0,ba=J,ha=
fd[ta.orderType],xa=0;0!=(P&64)&&ha--;0!=(P&128)&&(ha=2>ha?0:ha-2);for(var eb=0;eb<ha;eb++)O=ba.getByte(),xa|=O<<8*eb;var ya=xa;if(0!=(P&4)){if(0==(P&32)){var ua=J,R=ta.bounds,yb=ua.getByte();0!=(yb&1)?R.left=F(ua,R.left,!1):0!=(yb&16)&&(R.left=F(ua,R.left,!0));0!=(yb&2)?R.top=F(ua,R.top,!1):0!=(yb&32)&&(R.top=F(ua,R.top,!0));0!=(yb&4)?R.right=F(ua,R.right,!1):0!=(yb&64)&&(R.right=F(ua,R.right,!0));0!=(yb&8)?R.bottom=F(ua,R.bottom,!1):0!=(yb&128)&&(R.bottom=F(ua,R.bottom,!0))}var ic=ta.bounds;oa=
ic.left;0>oa&&(oa=0);Q=ic.top;0>Q&&(Q=0);fa=ic.right;fa>=M&&(fa=M-1);na=ic.bottom;na>=S&&(na=S-1)}var Ab=0!=(P&16);switch(ta.orderType){case 0:var Mb=J,Ia=ta.destBlt,Ub=ya,jc=Ab;0!=(Ub&1)&&(Ia.x=F(Mb,Ia.x,jc));0!=(Ub&2)&&(Ia.y=F(Mb,Ia.y,jc));0!=(Ub&4)&&(Ia.cx=F(Mb,Ia.cx,jc));0!=(Ub&8)&&(Ia.cy=F(Mb,Ia.cy,jc));0!=(Ub&16)&&(Ia.opcode=Mb.getByte()&15);var Vb=Ia.x,Bb=Ia.y,Cb=Ia.cx,kc=Ia.cy,dd=Ia.opcode;if(!(Vb>M||Bb>S)){Vb<oa&&(Cb-=oa-Vb,Vb=oa);var Nc=Vb+Cb-1;Nc>fa&&(Cb-=Nc-fa);Bb<Q&&(kc-=Q-Bb,Bb=Q);var wc=
Bb+kc-1;wc>na&&(kc-=wc-na);1>Cb||1>kc||U.bitBlt(dd,M,Vb,Bb,Cb,kc,null,0,0,0)}break;case 1:var Zb=void 0,Xa=J,ma=ta.patBlt,mb=ya,lc=Ab;0!=(mb&1)&&(ma.x=F(Xa,ma.x,lc));0!=(mb&2)&&(ma.y=F(Xa,ma.y,lc));0!=(mb&4)&&(ma.cx=F(Xa,ma.cx,lc));0!=(mb&8)&&(ma.cy=F(Xa,ma.cy,lc));0!=(mb&16)&&(ma.opcode=Xa.getByte(),ma.opcode=ma.opcode&3|(ma.opcode&48)>>2);0!=(mb&32)&&(ma.backgroundColor=ub(Xa));0!=(mb&64)&&(ma.foregroundColor=ub(Xa));var ec=ma.brush,Db=mb>>7;0!=(Db&1)&&(ec.xOrigin=Xa.getByte());0!=(Db&2)&&(ec.yOrigin=
Xa.getByte());0!=(Db&4)&&(ec.style=Xa.getByte());var Eb=ec.pattern;0!=(Db&8)&&(Eb[0]=Xa.getByte());if(0!=(Db&16))for(var Nb=1;8>Nb;Nb++)Eb[Nb]=Xa.getByte();ec.pattern=Eb;var ia=ma.x,Pc=ma.y;if(!(ia>fa||Pc>na)){var Qc=ma.opcode,ea=ia,da=Pc,Ya=ma.cx,Ob=ma.cy,$b=ma.foregroundColor,ja=ma.backgroundColor,mc=ma.brush.xOrigin,ib=ma.brush.yOrigin,T=ma.brush.style,la=ma.brush.pattern;$b=Ra($b);ja=Ra(ja);if(!(ea>M||da>S)){ea<oa&&(Ya-=oa-ea,ea=oa);var jb=ea+Ya-1;jb>fa&&(Ya-=jb-fa);da<Q&&(Ob-=Q-da,da=Q);var fc=
da+Ob-1;fc>na&&(Ob-=fc-na);if(!(1>Ya||1>Ob))switch(T){case 0:Zb=new Uint32Array(Ya*Ob);for(var La=0;La<Zb.length;La++)Zb[La]=$b;U.bitBlt(Qc,M,ea,da,Ya,Ob,Zb,Ya,0,0);break;case 2:svGlobal.logger.warn("hatch");break;case 3:Zb=new Uint32Array(Ya*Ob);var ra=0;for(La=0;La<Ob;La++)for(var nb=0;nb<Ya;nb++)Zb[ra]=0==(la[(La+ib)%8]&1<<(nb+mc)%8)?$b:ja,ra++;U.bitBlt(Qc,M,ea,da,Ya,Ob,Zb,Ya,0,0);break;default:svGlobal.logger.warn("Unsupported brush style "+T)}}}break;case 2:var ob=void 0,Za=J,Ea=ta.screenBlt,
Fb=ya,kb=Ab;0!=(Fb&1)&&(Ea.x=F(Za,Ea.x,kb));0!=(Fb&2)&&(Ea.y=F(Za,Ea.y,kb));0!=(Fb&4)&&(Ea.cx=F(Za,Ea.cx,kb));0!=(Fb&8)&&(Ea.cy=F(Za,Ea.cy,kb));0!=(Fb&16)&&(Ea.opcode=Za.getByte()&15);0!=(Fb&32)&&(Ea.srcX=F(Za,Ea.srcX,kb));0!=(Fb&64)&&(Ea.srcY=F(Za,Ea.srcY,kb));var Pb=Ea.x,Ma=Ea.y;if(!(Pb>fa||Ma>na)){var Ba=Ea.cx,nc=Ea.cy,Sc=Ea.opcode,gc=Ea.srcX,oc=Ea.srcY;Pb<oa&&(ob=oa-Pb,Pb=oa,gc+=ob,Ba-=ob);var Fc=Pb+Ba-1;Fc>fa&&(ob=Fc-fa,Ba-=ob);Ma<Q&&(ob=Q-Ma,Ma=Q,oc+=ob,nc-=ob);var Gc=Ma+nc-1;Gc>na&&(ob=Gc-
na,nc-=ob);1>Ba||1>nc||(12==Sc?U.moveArea(gc,oc,Ba,nc,Pb-gc,Ma-oc):U.bitBlt(Sc,Ba,Pb,Ma,Ba,nc,null,Ba,gc,oc))}break;case 9:var ab=J,qa=ta.line,Ua=ya,$a=Ab;0!=(Ua&1)&&(qa.mixmode=ab.getLittleEndian16());0!=(Ua&2)&&(qa.startX=F(ab,qa.startX,$a));0!=(Ua&4)&&(qa.startY=F(ab,qa.startY,$a));0!=(Ua&8)&&(qa.endX=F(ab,qa.endX,$a));0!=(Ua&16)&&(qa.endY=F(ab,qa.endY,$a));0!=(Ua&32)&&(qa.backgroundColor=ub(ab));0!=(Ua&64)&&(qa.opcode=ab.getByte());var Hc=qa.pen,ac=Ua>>7;0!=(ac&1)&&(Hc.style=ab.getByte());0!=
(ac&2)&&(Hc.width=ab.getByte());0!=(ac&4)&&(Hc.color=ub(ab));var Ca=qa.startX,pb=qa.startY,Wb=qa.endX,yc=qa.endY,pc=qa.pen.color,Ic=qa.opcode-1;if(pb==yc){if(Ca>Wb){var Gb=Ca;Ca=Wb;Wb=Gb}Ca<oa&&(Ca=oa);Wb>fa&&(Wb=fa)}else Ca==Wb&&(pb>yc&&(Gb=pb,pb=yc,yc=Gb),pb<Q&&(pb=Q),pb>na&&(pb=na));Qb(Ca,pb,Wb,yc,pc,Ic);break;case 10:var Oa=J,bb=ta.rectangle,qb=ya,zc=Ab;0!=(qb&1)&&(bb.x=F(Oa,bb.x,zc));0!=(qb&2)&&(bb.y=F(Oa,bb.y,zc));0!=(qb&4)&&(bb.cx=F(Oa,bb.cx,zc));0!=(qb&8)&&(bb.cy=F(Oa,bb.cy,zc));0!=(qb&16)&&
(Sb=Sb&4294967040|Oa.getByte());0!=(qb&32)&&(Sb=Sb&4294902015|Oa.getByte()<<8);0!=(qb&64)&&(Sb=Sb&4278255615|Oa.getByte()<<16);bb.color=Sb;var Xb=bb.x,sa=bb.y,Ib=bb.cx,cb=bb.cy;if(!(Xb>fa||sa>na)){Xb<oa&&(Ib-=oa-Xb,Xb=oa);var Ac=Xb+Ib-1;Ac>fa&&(Ib-=Ac-fa);sa<Q&&(cb-=Q-sa,sa=Q);var Tc=sa+cb-1;Tc>na&&(cb-=Tc-na);1>Ib||1>cb||U.fillRect(Xb,sa,Ib,cb,Ra(bb.color))}break;case 11:var rc=J,Pa=ta.deskSave,sc=ya,Ja=Ab;0!=(sc&1)&&(Pa.offset=rc.getLittleEndian32());0!=(sc&2)&&(Pa.left=F(rc,Pa.left,Ja));0!=(sc&
4)&&(Pa.top=F(rc,Pa.top,Ja));0!=(sc&8)&&(Pa.right=F(rc,Pa.right,Ja));0!=(sc&16)&&(Pa.bottom=F(rc,Pa.bottom,Ja));0!=(sc&32)&&(Pa.action=rc.getByte());var tc=Pa.right-Pa.left+1,Yb=Pa.bottom-Pa.top+1;0==Pa.action?1>tc||1>Yb||U.saveDesktop(Pa.left,Pa.top,tc,Yb,Pa.offset):U.restoreDesktop(Pa.left,Pa.top,tc,Yb,Pa.offset);break;case 13:var rb=void 0,Qa=J,Da=ta.memBlt,tb=ya,uc=Ab;0!=(tb&1)&&(Da.cacheID=Qa.getByte(),Da.colorTable=Qa.getByte());0!=(tb&2)&&(Da.x=F(Qa,Da.x,uc));0!=(tb&4)&&(Da.y=F(Qa,Da.y,uc));
0!=(tb&8)&&(Da.cx=F(Qa,Da.cx,uc));0!=(tb&16)&&(Da.cy=F(Qa,Da.cy,uc));0!=(tb&32)&&(Da.opcode=Qa.getByte()&15);0!=(tb&64)&&(Da.srcX=F(Qa,Da.srcX,uc));0!=(tb&128)&&(Da.srcY=F(Qa,Da.srcY,uc));0!=(tb&256)&&(Da.cacheIDX=Qa.getLittleEndian16());var Jb=Da.x,Jc=Da.y;if(!(Jb>fa||Jc>na)){var Vc=Da.cx,Wc=Da.cy,Kc=Da.srcX,gd=Da.srcY;Jb<oa&&(rb=oa-Jb,Jb=oa,Kc+=rb,Vc-=rb);var lb=Jb+Vc-1;lb>fa&&(rb=lb-fa,Vc-=rb);Jc<Q&&(rb=Q-Jc,Jc=Q,gd+=rb,Wc-=rb);var Xc=Jc+Wc-1;Xc>na&&(rb=Xc-na,Wc-=rb);1>Vc||1>Wc||U.drawBitmap(Da.cacheID,
Da.cacheIDX,Jb,Jc,Vc,Wc,Kc,gd,Da.opcode)}break;case 22:var Va=J,fb=ta.polyLine,Kb=ya,Yc=Ab;0!=(Kb&1)&&(fb.x=F(Va,fb.x,Yc));0!=(Kb&2)&&(fb.y=F(Va,fb.y,Yc));0!=(Kb&4)&&(fb.opcode=Va.getByte());0!=(Kb&16)&&(fb.foregroundColor=ub(Va));0!=(Kb&32)&&(fb.lines=Va.getByte());if(0!=(Kb&64)){var c=Va.getByte();fb.dataSize=c;fb.data=Va.getBytes(c)}var Bc=fb.x,Zc=fb.y,he=fb.foregroundColor,Jd=fb.lines,ie=fb.dataSize,yd=fb.data,pd=Array(1);pd[0]=Math.floor((Jd-1)/4)+1;for(var $c=0,je=0,ke=fb.opcode-1,zd=0;zd<Jd&&
pd[0]<ie;zd++){var le=Bc,me=Zc;0==zd%4&&($c=yd[je++]);0==($c&192)&&($c|=192);0!=($c&64)&&(Bc+=ad(yd,pd));0!=($c&128)&&(Zc+=ad(yd,pd));Qb(le,me,Bc,Zc,he,ke);$c<<=2}break;case 27:var Ta=J,gb=ta.text2,Wa=ya;0!=(Wa&1)&&(gb.font=Ta.getByte());0!=(Wa&2)&&(gb.flags=Ta.getByte());0!=(Wa&4)&&(gb.opcode=Ta.getByte());0!=(Wa&8)&&(gb.mixmode=Ta.getByte());0!=(Wa&16)&&(gb.foregroundColor=ub(Ta));0!=(Wa&32)&&(gb.backgroundColor=ub(Ta));0!=(Wa&64)&&(gb.clipLeft=Ta.getLittleEndian16());0!=(Wa&128)&&(gb.clipTop=Ta.getLittleEndian16());
0!=(Wa&256)&&(gb.clipRight=Ta.getLittleEndian16());0!=(Wa&512)&&(gb.clipBottom=Ta.getLittleEndian16());0!=(Wa&1024)&&(gb.boxLeft=Ta.getLittleEndian16());0!=(Wa&2048)&&(gb.boxTop=Ta.getLittleEndian16());0!=(Wa&4096)&&(gb.boxRight=Ta.getLittleEndian16());0!=(Wa&8192)&&(gb.boxBottom=Ta.getLittleEndian16());0!=(Wa&16384)&&Ta.skipPosition(1);0!=(Wa&32768)&&Ta.skipPosition(1);0!=(Wa&65536)&&Ta.skipPosition(1);0!=(Wa&131072)&&Ta.skipPosition(1);0!=(Wa&262144)&&Ta.skipPosition(7);0!=(Wa&524288)&&(gb.x=Ta.getLittleEndian16());
0!=(Wa&1048576)&&(gb.y=Ta.getLittleEndian16());if(0!=(Wa&2097152)){var Kd=Ta.getByte();gb.length=Kd;gb.text=Ta.getBytes(Kd)}var sb=gb,ne=sb.font,oe=sb.flags,pe=sb.mixmode,qe=Ra(sb.foregroundColor),re=Ra(sb.backgroundColor),Ld=sb.clipLeft,Md=sb.clipTop,se=sb.clipRight,te=sb.clipBottom,qd=sb.boxLeft,Nd=sb.boxTop,ue=sb.boxBottom,ve=sb.x,we=sb.y,xe=sb.length,ye=sb.text,Ad=sb.boxRight-qd;qd+Ad>M&&(Ad=M-qd);U.drawText(ne,oe,pe,qe,re,Ld,Md,se-Ld,te-Md,qd,Nd,Ad,ue-Nd,ve,we,xe,ye,oa,Q,fa,na);break;default:svGlobal.logger.warn("XXX Order type "+
ta.orderType)}0!=(P&4)&&hb();break;case 2:var Od=a,Pd=E>>2;switch(Pd){case 11:var rd=Od,Qd=rd.getLittleEndian16()-3,ze=rd.getPosition()+Qd;Y.onAltSecWindows(rd,Qd);rd.setPosition(ze);break;case 13:Od.getLittleEndian32();break;default:svGlobal.logger.warn("Alt Sec order:"+Pd)}break;case 3:var cc=a;var Rd=cc.getLittleEndian16();var sd=cc.getLittleEndian16();var Sd=cc.getByte();var Ae=cc.getPosition()+Rd+7;if(cc.has(Rd+7)){switch(Sd){case 0:var Td=void 0,vc=cc,Be=vc.getByte();vc.skipPosition(1);var Bd=
vc.getByte(),td=vc.getByte(),ud=vc.getByte(),vd=Math.floor((ud+7)/8),Ce=vc.getLittleEndian16(),De=vc.getLittleEndian16(),Ee=vc.getPosition();vc.skipPosition(Ce);X!=ud&&(svGlobal.logger.warn("Server limited colour depth to "+ud+" bits"),A(ud,!0));var Cd=Array(Bd*td*vd);Cd[0]=0;for(var Dd=Bd*vd,wd=0;wd<td;wd++)Td=Ee+(td-wd-1)*Dd,vc.copyToByteArray(Cd,wd*Dd,Td,Dd);var Fe=bd(Cd,vd);U.putBitmap(Be,De,new rdpcodecs.Bitmap(Fe,Bd,td,0,0,8*vd,null,0));break;case 1:svGlobal.logger.info("TODO: color cache");
break;case 2:var Ud=void 0,hd=void 0,vb=cc,Ge=sd,He=vb.getByte();vb.getByte();var Ed=vb.getByte(),Fd=vb.getByte(),id=vb.getByte(),Ie=Math.floor((id+7)/8),Je=vb.getLittleEndian16(),Ke=vb.getLittleEndian16();X!=id&&(svGlobal.logger.warn("Server limited colour depth to "+id+" bits"),A(id,!0));0!=(Ge&1024)?hd=Je:(vb.skipPosition(2),hd=vb.getLittleEndian16(),vb.skipPosition(2),vb.skipPosition(2));Ud=1!=Ie?dc(Ed,Fd,hd,vb.getData(),vb.getPosition()):Cc(Ed,Fd,hd,vb.getData(),vb.getPosition());var Le=vb.getBytes(hd);
U.putBitmap(He,Ke,new rdpcodecs.Bitmap(Ud,Ed,Fd,0,0,id,Le,1));break;case 3:var Vd=void 0,Gd=void 0,Hd=void 0,Wd=void 0,Xd=void 0,Yd=void 0,Zd=void 0,$d=void 0,ae=void 0,Lc=cc;$d=Lc.getByte();Zd=Lc.getByte();for(var be=0;be<Zd;be++)Yd=Lc.getLittleEndian16(),Xd=Lc.getLittleEndian16(),Wd=Lc.getLittleEndian16(),Hd=Lc.getLittleEndian16(),Gd=Lc.getLittleEndian16(),Vd=Gd*Math.floor((Hd+7)/8)+3&-4,ae=new h(Xd,Wd,Hd,Gd,Lc.getBytes(Vd)),U.putFont($d,Yd,ae);break;case 4:Fa(cc,sd,!1);break;case 5:Fa(cc,sd,!0);
break;case 7:svGlobal.logger.info("CacheBrush...=");break;case 8:var cd=void 0,wb=cc,ce=sd&7,de=wb.getLittleEndian16();wb.skipPosition(8);var xd=wb.getByte();X!=xd&&(svGlobal.logger.warn("Server limited colour depth to "+xd+" bits"),A(xd,!0));wb.skipPosition(2);var Id=wb.getByte(),jd=wb.getLittleEndian16(),kd=wb.getLittleEndian16(),ee=wb.getLittleEndian32(),fe=wb.getPosition();if(1==Id){bc(wb,xd,jd,kd);var Me=qc.getData(),Ne=qc.getDataSize();cd=new Uint32Array(Ne);rdpcodecs.flipimage(Me,0,cd,jd,kd,
1);var Oe=wb.getPosition()-fe;wb.setPosition(fe);var Pe=wb.getBytes(Oe);U.putBitmap(ce,de,new rdpcodecs.Bitmap(cd,jd,kd,0,0,32,Pe,2))}else if(0==Id){var ge=rdpBitmap.byte2int(wb.getData(),ee,wb.getPosition());cd=new Uint32Array(ge.length);rdpcodecs.flipimage(ge,0,cd,jd,kd,1);U.putBitmap(ce,de,new rdpcodecs.Bitmap(cd,jd,kd,0,0,32,null,0))}else svGlobal.logger.warn("XXX invalid codec id:"+Id);wb.skipPosition(ee);break;default:svGlobal.logger.warn("invalid second Order, type="+Sd)}cc.setPosition(Ae)}}w++}}
function Fa(a,v,w){var E;var H=v&7;var J=((v&120)>>3)-2;v=(v&65408)>>7;db!=J&&(A(8*J,!0),svGlobal.logger.warn("Server limited colour depth to "+J+" bytes"));0!=(v&2)&&a.skipPosition(8);if(0!=(v&1))var P=E=Dc.readVar2Bytes(a);else E=Dc.readVar2Bytes(a),P=Dc.readVar2Bytes(a);var O=Dc.readVar4Bytes(a);var ba=Dc.readVar2Bytes(a);w&&0==(v&8)&&a.skipPosition(8);if(w){w=1!=J?dc(E,P,O,a.getData(),a.getPosition()):Cc(E,P,O,a.getData(),a.getPosition());a=a.getBytes(O);if(!w){svGlobal.logger.warn("Failed to decompress bitmap data");
return}E=new rdpcodecs.Bitmap(w,E,P,0,0,8*J,a,1)}else{w=Array(E*P*J);w[0]=0;var ha=a.getPosition(),xa=E*J;for(O=0;O<P;O++){var eb=ha+(P-O-1)*xa;a.copyToByteArray(w,O*xa,eb,xa)}a=bd(w,J);E=new rdpcodecs.Bitmap(a,E,P,0,0,8*J,null,0)}U.putBitmap(H,ba,E);0!=(v&2)&&svGlobal.logger.warn("XXX:TODO, persistent")}function F(a,v,w){return w?(a=a.getByte()<<24>>24,v+a):v=a.getLittleEndian16()<<16>>16}function ub(a){var v;var w=v=a.getByte();v=a.getByte();w|=v<<8;v=a.getByte();return w|v<<16}function zb(a){for(var v,
w,E,H,J,P,O,ba,ha,xa=a.getLittleEndian16(),eb=0;eb<xa;eb++)if(v=a.getLittleEndian16(),w=a.getLittleEndian16(),E=a.getLittleEndian16(),H=a.getLittleEndian16(),J=a.getLittleEndian16(),P=a.getLittleEndian16(),O=a.getLittleEndian16(),ba=a.getLittleEndian16(),ha=a.getLittleEndian16(),E=E-v+1,H=H-w+1,X!=O&&(svGlobal.logger.warn("Server limited colour depth to "+O+" bits"),A(O,!0)),0==ba){ba=J*db;ha=P*ba;O=new Uint8Array(ha);for(var ya=a.getPosition(),ua=0;ua<P;ua++)ld(a.getData(),ya,O,(P-ua-1)*ba,ba),ya+=
ba;a.skipPosition(ha);O=bd(O,db);U.setRGBs(v,w,E,H,O,0,J)}else 0!=(ba&1024)?O=ha:(a.skipPosition(2),O=a.getLittleEndian16(),a.skipPosition(4)),ba=a.getData(),ha=O,ya=a.getPosition(),ua=w,w=H,H=db,1>E*w*J*P||(1!=H?U.setRGBs(v,ua,E,w,dc(J,P,ha,ba,ya),0,J):(P=Cc(J,P,ha,ba,ya),ba=ua,H=bd(P,H),U.setRGBs(v,ba,E,w,H,0,J))),a.skipPosition(O)}function hb(){oa=0;fa=M-1;Q=0;na=S-1}function Qb(a,v,w,E,H,J){var P=Math.min(a,w),O=Math.max(a,w),ba=Math.min(v,E),ha=Math.max(v,E);H=Ra(H);if(!(P>=oa&&O<=fa&&ba>=Q&&
ha<=na)){if(P>fa||O<oa||ba>na||ha<Q)return;if(a==w)v>E&&(P=v,v=E,E=P),v<Q&&(v=Q),E>na&&(E=na);else if(v==E)a>w&&(P=a,a=w,w=P),a<oa&&(a=oa),w>fa&&(w=fa);else{P=ta._line;P.set(a,v,w,E);O=P.intersection(oa,Q,fa,Q);ba=[];O&&ba.push(O.x,O.y);(O=P.intersection(fa,Q,fa,na))&&ba.push(O.x,O.y);(O=P.intersection(oa,na,fa,na))&&ba.push(O.x,O.y);(O=P.intersection(oa,Q,oa,na))&&ba.push(O.x,O.y);2==ba.length&&(a>=oa&&a<=fa&&v>=Q&&v<=na?ba.push(a,v):w>=oa&&w<=fa&&E>=Q&&E<=na&&ba.push(w,E));if(4!=ba.length)return;
a=ba[0];v=ba[1];w=ba[2];E=ba[3]}}12==J?U.drawLine(a,v,w,E,H):U.drawLineExt(a,v,w,E,H,J)}function ad(a,v){var w=a[v[0]++]&255,E=w&128;w=0!=(w&64)?w|-64:w&63;0!=E&&(w=w<<8|a[v[0]++]&255);return w}function V(a){if(Y)if(svGlobal.logger.warn("closed "+(Y.sessionInfo.appInfo?Y.sessionInfo.appInfo.numericId:0)),Y&&(Rb=!1),Uc)svGlobal.logger.info("Req credential");else{ta=null;"undefined"!=typeof rdp8bulkData&&rdp8bulkData.release();qc=bc=ed=K=null;try{if(null!=Tb&&(Tb.exit(),Tb=null),Y.onclose)Y.onclose(Lb);
else svGlobal.logger.info("onclose: null")}catch(v){}xb=null;Z&&(Z.onopen=null,Z.onmessage=null,Z.onclose=null,Z=Z.onerror=null);Rc=null;Sa&&(Sa.release(),Sa=null);Na&&(Na.release(),Na=null);Y=null}}function od(a,v,w,E){switch(v){case 16:v=a>>8&248;var H=a>>3&252;a=a<<3&255;w[E]=v|v>>5;w[E+1]=H|H>>6;w[E+2]=a|a>>5;w[E+3]=255;break;case 15:v=a>>7&248;H=a>>2&248;a=a<<3&255;w[E]=v|v>>5;w[E+1]=H|H>>5;w[E+2]=a|a>>5;w[E+3]=255;break;case 8:w[E]=ta.paletteRdp[0][a];w[E+1]=ta.paletteRdp[1][a];w[E+2]=ta.paletteRdp[2][a];
w[E+3]=255;break;case 32:w[E]=a&255,w[E+1]=a>>8&255,w[E+2]=a>>16&255,w[E+3]=a>>24&255;default:w[E]=a&255,w[E+1]=a>>8&255,w[E+2]=a>>16&255,w[E+3]=255}}function bd(a,v){var w=a.length/v>>0,E=new Uint32Array(w),H=Ra;switch(v){case 1:for(var J=0;J<w;J++)E[J]=H(a[J]);break;case 2:for(J=0;J<w;J++)E[J]=H(a[2*J+1]<<8|a[2*J]);break;default:for(J=0;J<w;J++)E[J]=H(a[J*v+2]<<16)|a[J*v+1]<<8|a[J*v]}return E}this.sessionInfo={domain:"",userName:"",sessionId:0,joinedSessions:[],suppressOutput:!1,appInfo:null};this.mode=
0;this.remoteAppLogin=!0;var Y=this,Lb=!1,Uc=!1,hc="object"==typeof K?K:null,Ga=hc?{}:hi5.string.queryToObj(K.substring(K.indexOf("?")+1)),ld=hi5.Arrays.arraycopy,za=null,Sa=new BulkData,Na=function(a){return"on"==a||"true"==a}(Ga.decompressingRDP61)?new Bulk61Data:null;this.protocol=hc?"":K.substring(0,K.indexOf("://")).toLowerCase();this.setProfiler=function(a){za=a};this.getProfiler=function(){return za};this.gateway=function(){if(hc)return"";var a=K.lastIndexOf("/RDP?");-1==a&&(a=K.lastIndexOf("/JOIN?"));
-1==a&&(a=K.lastIndexOf("/PLAY?"));return K.substring(0,a).replace(/wss:\/\//ig,"https://").replace(/ws:\/\//ig,"http://")}();this.getGatewayAddr=function(){var a=Y.gateway;Y.ongetgatewayaddress&&(a=Y.ongetgatewayaddress(a));return a};var xc="object"==typeof K||0<K.indexOf("/PLAY?"),md=!xc&&0<K.indexOf("invitation=");if(xc)this.mode=1,hc?K="":(M=640,S=480);else if(0<K.indexOf("/JOIN?")||md)this.mode=2;Ga.symlink&&Ga.parameters&&hi5.string.queryToObj(Ga.parameters,Ga);Ga.gateway||(K+="&gateway="+encodeURIComponent(Y.gateway));
"useSSL"in Ga||(K+="&useSSL="+("wss"==Y.protocol));this.getDisplayName=Ka;this.server=Ka();this.port=parseInt(Ga.port,10);this.getURL=function(){return K};this.getColor=function(){return X};var Hb=hi5.graphic.Rectangle,ka=0<K.indexOf("nocurosr=on"),Oc=0<K.indexOf("startProgram=app");K.indexOf("mapDisk=on");this.isRemoteApp=function(){return Oc};var Z=null,Rb=!1,Mc=!1,oa=0,Q=0,fa=M-1,na=S-1,db=0,Tb=null,Ra=ca,dc=rdpBitmap.decompressInt16,Cc=rdpBitmap.decompress;A(X,!0);this.setColor=function(a){A(a,
!1)};this.setResolution=function(a,v){q(a,v,!1)};var Ec={tag:0,channels:0,bitsPerSample:0,samplePerSec:22050,toStream:function(a){a.setLittleEndian16(this.tag);a.setLittleEndian16(this.channels);a.setLittleEndian16(this.bitsPerSample);a.setLittleEndian32(this.samplePerSec)},fromStream:function(a){this.tag=a.getLittleEndian16();this.channels=a.getLittleEndian16();this.bitsPerSample=a.getLittleEndian16();this.samplePerSec=a.getLittleEndian32()}};this.setAudioFormat=function(a){Ec.tag=a.tag;Ec.channels=
a.channels;Ec.samplePerSec=a.samplePerSec;Ec.bitsPerSample=a.bitsPerSample};this.running=function(){return Rb};this.setJoinMode=function(a){d("8E1"+a)};this.setJoinCloseMode=function(a){d("8EB3\t"+a)};this.refuseControl=function(a){d("8E3"+a)};this.giveControl=function(a){d("8E4"+a)};this.pauseSession=function(a,v){d("8EB"+(v?1:0)+"\t"+a)};this.closeSession=function(a){d("8EB2\t"+a)};this.requestControl=function(){d("8E2")};this.saveSession=function(a){d("8E9"+(a.save?1:0)+"\t"+(a.timeout||0)+"\t"+
(a.id||0))};this.allowJoin=function(a,v){d("8EA"+a+"\t"+(v?1:0))};var nd=new function(){function a(){if(w&&0<w.length){var H=w.shift();nd.sendSingleKey(H.down,H.key);0<w.length?setTimeout(a,E):w=null}}var v={" ":57,space:57,pgup:201,pageup:201,pgdn:209,pagedown:209,end:207,home:199,left:203,up:200,right:205,down:208,printscreen:183,insert:210,del:211,"delete":211,altgr:184,windows:219,windowsright:220,context:221,esc:1,backspace:14,tab:15,enter:28,meta:29,command:29,ctrl:29,shift:42,alt:56,capslock:58,
f1:59,f2:60,f3:61,f4:62,f5:63,f6:64,f7:65,f8:66,f9:67,f10:68,f11:87,f12:88,numlock:69,scrolllock:70,add:78};this.sendSingleKey=function(H,J){var P=v[J.toLowerCase()];P?Y.writeScancode(H,P):(P=J.length,0!=P&&(1==P?Y.writeKeyCode(H,J.toUpperCase().charCodeAt(0)):H&&Y.writeText(J)))};var w=null,E=0;this.sendKeyComb=function(H,J){H=H.split("+");var P=H.length,O;if(0!=P){var ba=null,ha=[];for(O=0;O<P;O++){var xa=H[O];""==xa&&""==ba&&(xa="Add");""!=xa&&ha.push({key:xa,down:!0});ba=xa}P=ha.length;for(O=
P-1;0<=O;O--)ha.push({key:ha[O].key,down:!1});if(J)w=ha,E=J,a();else for(O=0,P=ha.length;O<P;O++)nd.sendSingleKey(ha[O].down,ha[O].key)}}};this.writeRawInput=function(a){d(a);if(Y.onactivity)Y.onactivity(a);if(Tb&&a.substring){var v=a.substring(0,2);a=a.substring(2);if("80"==v||"81"==v||"82"==v||"83"==v){a=a.split("\t");var w=new Uint8Array(7),E=0;var H=parseInt(a[0]);var J=parseInt(a[1]);switch(parseInt(v,16)){case 128:E=("0"==a[2]?4096:8192)|32768;break;case 129:E="0"==a[2]?4096:8192;break;case 130:E=
2048;break;case 131:E="0"==a[2]?33408:33664}w[0]=32;w[1]=E&255;w[2]=E>>8;w[3]=H&255;w[4]=H>>8;w[5]=J&255;w[6]=J>>8;Tb.add(new RecordingObj(w,0,7,60))}}};var ta=new L,Sb=0;this.resetStatus=C;this.notify=function(a,v){a="8E6"+a;v&&(a+="\t"+v.join(";"));d(a)};this.run=function(){u()};this.getDesktop=function(){return U};var xb=new hi5.DataBuffer([],0,0);this.suppressOutput=function(a){if(!Y.sessionInfo.suppressOutput)return!1;void 0==a&&(a=!0);var v=new Uint8Array(a?3:11);v[0]=146;v[1]=3;v[2]=a?1:0;
a||(v[3]=0,v[4]=0,v[5]=0,v[6]=0,v[7]=M-1,v[8]=M-1>>8,v[9]=S-1,v[10]=S-1>>8);Z.send(v.buffer);return!0};this.refreshOutput=function(a,v,w,E){var H=new Uint8Array(w?11:3);H[0]=146;H[1]=3;H[2]=2;w&&(H[3]=a,H[4]=a>>8,H[5]=v,H[6]=v>>8,H[7]=w,H[8]=w>>8,H[9]=E,H[10]=E>>8);Z.send(H.buffer)};var Rc=new function(){var a=0,v=0,w=[0],E=new hi5.DataBuffer(w,0,0);this.addFragement=function(H,J){ld(H.getData(),H.getPosition(),w,v,J);v+=J;a+=J};this.clearFragements=function(){E.setPosition(0);E.markEnd(a);v=a=0;
return E}},ed=new rdpcodecs.RemoteFX(va),qc=new rdpcodecs.NSCodec,bc=qc.process,fd=[1,2,1,0,0,0,0,1,1,2,1,1,0,2,3,1,2,2,2,2,1,2,1,0,2,1,2,3],Dc={readVar4Bytes:function(a){var v=a.getByte(),w=0;switch((v&192)>>6){case 0:w=v&63;break;case 1:w=(v&63)<<8|a.getByte();break;case 2:w=(v&63)<<16;v=a.getByte();w|=v<<8;v=a.getByte();w|=v;break;case 3:w=(v&63)<<24,v=a.getByte(),w|=v<<16,v=a.getByte(),w|=v<<8,v=a.getByte(),w|=v}return w},readVar2Bytes:function(a){var v=a.getByte();return 0!=(v&128)?(v&127)<<
8|a.getByte():v}};this._unload=V;this.close=function(){Lb=!0;svGlobal.logger.info("closing...");if(Z&&Z.readyState!=WebSocket.CLOSING&&Z.readyState!=WebSocket.CLOSED)try{for(;Z&&Z.readyState!=WebSocket.CLOSING&&Z.readyState!=WebSocket.CLOSED;)xc||Z.readyState!=WebSocket.OPEN||d("85-1"),Z.close()}finally{V()}else V()}}
function BulkData(){function K(e){e=(e&1431655765)<<1|e>>>1&1431655765;e=(e&858993459)<<2|e>>>2&858993459;e=(e&252645135)<<4|e>>>4&252645135;if(0==e>>>8)return e;e=(e&16711935)<<8|e>>>8&16711935;return 0==e>>>16?e:(e&65535)<<16|e>>>16&65535}function M(e,n,x,g){var f=0,z=0,m,t,L=0!=(g&1),C=X;if(0==(g&32))return va=0,N=x,0;0!=(g&64)&&(S=0);if(0!=(g&128)){for(g=65536;0<=--g;)C[g]=0;S=0}N=va=0;va=t=m=g=S;if(0==x)return 0;x+=z;do{if(0==f){if(z>=x)break;g=e[n+z++]<<24;f=8}if(0<=g){if(8>f){if(z>=x){if(0!=
g)return-1;break}g|=e[n+z++]<<24-f;f+=8}if(65536<=m)return-1;C[m++]=g>>>24&255;g<<=8;f-=8}else{g<<=1;if(0==--f){if(z>=x)return-1;g=e[n+z++]<<24;f=8}if(0<=g){if(8>f){if(z>=x)return-1;g|=e[n+z++]<<24-f;f+=8}if(65536<=m)return-1;C[m++]=(g>>>24|128)&255;g<<=8;f-=8}else{g<<=1;if(--f<(L?3:2)){if(z>=x)return-1;g|=e[n+z++]<<24-f;f+=8}if(L)switch(g>>>29){case 7:for(;9>f;f+=8){if(z>=x)return-1;g|=e[n+z++]<<24-f}g<<=3;var u=g>>>26;g<<=6;f-=9;break;case 6:for(;11>f;f+=8){if(z>=x)return-1;g|=e[n+z++]<<24-f}g<<=
3;u=(g>>>24)+64;g<<=8;f-=11;break;case 5:case 4:for(;13>f;f+=8){if(z>=x)return-1;g|=e[n+z++]<<24-f}g<<=2;u=(g>>>21)+320;g<<=11;f-=13;break;default:for(;17>f;f+=8){if(z>=x)return-1;g|=e[n+z++]<<24-f}g<<=1;u=(g>>>16)+2368;g<<=16;f-=17}else switch(g>>>30){case 3:if(8>f){if(z>=x)return-1;g|=e[n+z++]<<24-f;f+=8}g<<=2;u=g>>>26;g<<=6;f-=8;break;case 2:for(;10>f;f+=8){if(z>=x)return-1;g|=e[n+z++]<<24-f}g<<=2;u=(g>>>24)+64;g<<=8;f-=10;break;default:for(;14>f;f+=8){if(z>=x)return-1;g|=e[n+z++]<<24-f}u=(g>>>
18)+320;g<<=14;f-=14}if(0==f){if(z>=x)return-1;g=e[n+z++]<<24;f=8}if(0<=g){var G=3;g<<=1;f--}else{var I=L?14:11;do{g<<=1;if(0==--f){if(z>=x)return-1;g=e[n+z++]<<24;f=8}if(0<=g)break;if(0==--I)return-1}while(1);G=(L?16:13)-I;g<<=1;if(--f<G)for(;f<G;f+=8){if(z>=x)return-1;g|=e[n+z++]<<24-f}I=G;G=g>>>32-I&~(-1<<I)|1<<I;g<<=I;f-=I}if(65536<=m+G)return-1;u=m-u&(L?65535:8191);do C[m++]=C[u++];while(0!=--G)}}}while(1);S=m;va=t;N=m-t;return 0}var S=0,X=new Uint8Array(65536),U=new Int32Array(8),va=0,N=0,Ka=
[6,6,6,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,9,8,9,9,9,9,8,8,9,9,9,9,9,9,8,9,9,10,9,9,9,9,9,9,9,10,9,10,10,10,9,9,10,9,10,9,10,9,9,9,10,10,9,10,9,9,8,9,9,9,9,10,10,10,9,9,10,10,10,10,10,10,9,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,9,7,9,9,10,9,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,10,10,10,10,10,10,11,10,10,10,10,10,10,10,10,10,10,10,10,
10,9,10,10,10,10,10,9,10,10,10,10,10,9,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,8,9,9,10,9,10,10,10,9,10,10,10,9,9,8,7,13,13,7,7,10,7,7,6,6,6,6,5,6,6,6,5,6,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,8,5,6,7,7],ca=[123,65311,65293,65063,65024,65285,65303,65128,197,65031,65299,65216,65288,65048,65307,65203,65027,162,65090,65296,65035,65026,65169,65305,65152,233,65082,65301,65042,87,65239,65309,65294,65077,65129,65314,65304,65146,65025,65315,65300,65268,
65204,65033,65308,65220,65289,65120,65136,65298,65029,65170,65185,65306,65039,65287,65110,65302,65282,65240,65256,65310,65053,59,65535,65286,65535,65137,65161,65535,65535,65068,65067,65056,65535,65211,65231,65032,65535,65248,65037,65535,65177,65535,65028,65194,65097,65535,65047,65121,65247,65535,65279,65270,65100,65535,65535,65159,65535,65316,65535,65084,65138,65535,65535,65230,65535,65278,65535,65059,65212,65034,65193,65535,65041,65535,65154,65535,65030,65178,65269,65535,65058,65101,65119,65535,
65283,65249,65535,65226,65228,65535,65049,65535,65207,65535,65535,65155,65065,65535,65535,65535,65132,65535,65261,65535,65535,65094,65116,65045,65535,65243,65190,65535,65535,65092,65535,65036,65535,65173,65276,65535,65535,65208,5833,65535,65264,65535,65080,65535,65535,65133,65150,65535,65535,65535,65535,65115,65244,65535,65535,65260,65095,65055,65535,65151,65174,65535,65535,65189,65535,65040,65088,65074,65215,65535,65535,65236,65265,65535,65535,65535,65141,65535,65535,65165,65073,65535,65125,65051,
65535,65252,65275,65535,65535,65106,65535,65038,65535,65181,65199,65535,65535,65105,65235,65535,65312,65535,65071,65535,65535,65217,65164,65535,65535,65535,65087,65535,65535,65142,65535,65274,65107,65061,65535,65124,65253,65535,65535,65198,65535,65043,65535,65160,65182,65535,65091,65535,65535,65188,65171,65535,65535,65535,65085,65535,65535,65259,65241,65535,65044,65114,65535,65064,65149,65535,65535,65130,65535,65535,65281,65222,65224,65535,65535,65205,65535,65535,65535,65172,65144,65535,65535,65535,
65187,65535,65535,65242,65112,65535,65054,65093,65258,65535,65131,65535,65535,65079,65535,65535,65535,65148,65206,65535,65535,65272,65535,65535,65535,65223,65179,65535,65535,65535,65104,65535,65535,65197,65250,65535,65050,65123,65102,65535,65535,65273,65535,65139,65535,65535,65535,65072,65163,65535,65535,65213,65070,256,65535,65262,65234,65535,65535,65535,65196,65535,65535,65180,65156,65535,65060,65103,65271,65535,65535,65251,65122,65535,65535,65535,65535,65162,65140,65535,65535,65086,65535,65535,
65535,65233,65214,65535,65535,65069,65535,65098,65267,65535,65535,65245,65118,65046,65535,65096,65192,65535,65195,65175,65535,65535,65232,65535,65535,65229,65209,65535,65535,65535,65066,65535,65535,65158,65134,65535,65535,65535,65246,65535,65535,65117,65099,65057,65535,65263,65176,65535,65535,65153,65535,65535,65535,65191,65535,65210,65277,65535,65535,65535,65227,65535,65535,65135,65081,65535,65535,65535,65157,65535,268,65254,65127,65052,65535,65108,65202,65535,65535,65183,65535,65535,65535,65113,
65201,65535,65218,65535,65535,65078,65266,65535,65535,65238,65143,65535,65535,65535,65075,65535,65535,65167,65109,65062,266,65284,65255,65535,289,65126,65535,65535,65535,65200,65184,65535,271,65168,65535,65535,65237,65535,65535,65219,65076,65535,65535,65535,65166,65535,273,65145,65089,267],aa=[511,0,508,448,494,347,486,482],r=[4,2,3,4,3,4,4,5,4,5,5,6,6,7,7,8,7,8,8,9,9,8,9,9,9,9,9,9,9,9,9,9],B=[4065,4064,4066,4072,14,4069,4068,4074,4081,4067,21,4071,4079,70,4080,4077,4095,4087,4091,25,4093,4084,300,
4075,4094,4086,4090,137,4092,4083,4088,4082],A=[0,4,10,19],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,32769,49153,65537],y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,6,6,8,8,14,14],p=[2,3,4,5,6,7,8,9,10,12,14,16,18,22,26,30,34,42,50,58,66,82,98,114,130,194,258,514,2,2],l=new hi5.DataBuffer(X,0,1),k=hi5.Arrays.arraycopy,h=hi5.Arrays.fill;this.reset=
function(){S=0;X=new Uint8Array(65536);N=va=0;l=new hi5.DataBuffer(X,0,1)};this.release=function(){X=l=U=null};this.getArrayBuffer=function(){return X.buffer.slice(va,va+N)};this.getData=function(){l.setPosition(va);l.markEnd(va+N);return l};this.toPDU=function(){var e=new Uint8Array(65576);e[0]=29;e[2]=1;e[3]=2;e[4]=S;e[5]=S>>8;e[6]=S>>16;e[7]=S>>24;e.set(X,8);e.set(new Uint8Array(U.buffer),65544);return e};this.fromStream=function(e){S=e.getLittleEndian32();var n=e.getPosition();X.set(e.getData().subarray(n,
n+65536));e.skipPosition(65536);for(n=0;8>n;n++)U[n]=e.getLittleEndian32()};this.getDecompressedLength=function(){return N};this.dec5=function(e,n,x,g){return M(e,n,x,g)};this.dec=function(e,n,x,g){if(2==(g&15)){var f=X,z=U,m=S,t=0,L=n,C=0,u=0,G=0;N=0;va=m;0!=(g&64)&&(k(f,m-32768,f,0,32768),va=S=m=32768);0!=(g&128)&&(m=0,h(f,0,65536,0),h(z,0,z.length,0),va=0);if(32!=(g&32))k(e,0,f,m,x),m+=x,N=m-S;else{var I=0;for(var D=n+x;L<D&&!(G=e[L++],t|=G<<I,u+=8,I+=8,32<=I););t=K(t);L<D?(C=K(e[L++])&255,x=8):
x=0;for(;8<=u;){n=0;for(I=5;13>=I;I++)if(12!=I){G=K(t&4294967295<<32-I);var b=ca[G&511^G>>>9^G>>>4^G>>>7];0!=(b^G)>>>9?G=b&511:(b=(G>>>8^G&255)>>>2&15,0!=G>>>9&&(b=~b),G=ca[aa[(b&65535)%12]]);if(I==Ka[G])break}t<<=I;u-=I;if(256>G)f[m++]=G&255;else if(256<G&&289>G){b=G-257;I=q[b];n=d[b]-1;0!=I&&(n+=K(t&4294967295<<32-I));b=z;var W=n;var wa=b[2]|b[3]<<16;wa<<=16;b[2]=wa&65535;b[3]=wa>>>16&65535;var pa=b[0]|b[1]<<16;wa|=pa>>>16;b[2]=wa&65535;b[3]=wa>>>16&65535;pa=pa<<16|W;b[0]=pa&65535;b[1]=pa>>>16&
65535;t<<=I;u-=I}else if(288<G&&293>G)b=G-289,n=z[b],0!=b&&(I=z,W=I[0],I[0]=I[b],I[b]=W);else if(256==G)break;for(I=32-u;0<I;)if(x<I)G=C>>>8-x,t|=G<<32-u-x,u+=x,I-=x,L<D?(C=K(e[L++])&255,x=8):x=I=0;else{x>I?(t|=C>>>8-I,C<<=I,C&=255,x-=I,u=32):(t|=C>>>8-I,u=32,L<D?(C=K(e[L++])&255,x=8):x=0);break}if(0!=n){for(I=2;9>=I&&(G=K(t&4294967295<<32-I),b=B[G&31^G>>>5^G>>>9],0!=(b^G)>>>5?G=b&31:(G=G>>>4&15,G=B[A[(G^G>>>2^G>>>3)&3]]),I!=r[G]);I++);t<<=I;u-=I;I=y[G];b=p[G];0!=I&&(b+=K(t&4294967295<<32-I));t<<=
I;u-=I;W=m-n;I=b>n?n:b;for(G=0;0<I;)f[m++]=f[W++],I--;for(;b>n;)G=G>=n?0:G,f[m++]=f[W+G++],b--;for(I=32-u;0<I;)if(x<I)G=C>>>8-x,t|=G<<32-u-x,u+=x,I-=x,L<D?(C=K(e[L++])&255,x=8):x=I=0;else{x>I?(t|=C>>>8-I,C<<=I,C&=255,x-=I,u=32):(t|=C>>>8-I,u=32,L<D?(C=K(e[L++])&255,x=8):x=0);break}}}N=0!=(g&128)?m:m-S}S=m;return 0}return M(e,n,x,g)}}
function Bulk61Data(){var K=0,M=new Uint8Array(2E6),S=0,X=0,U=new hi5.DataBuffer(M,0,1),va=hi5.Arrays.arraycopy;this.reset=function(){K=0;M=new Uint8Array(2E6);X=S=0;U=new hi5.DataBuffer(M,0,1)};this.release=function(){M=U=null};this.getArrayBuffer=function(){return M.buffer.slice(S,S+X)};this.getData=function(){U.setPosition(S);U.markEnd(S+X);return U};this.toPDU=function(){var N=new Uint8Array(2000008);N[0]=29;N[2]=1;N[3]=9;N[4]=K;N[5]=K>>8;N[6]=K>>16;N[7]=K>>24;N.set(M,8);return N};this.fromStream=
function(N){K=N.getLittleEndian32();var Ka=N.getPosition();M.set(N.getData().subarray(Ka,Ka+2E6))};this.getDecompressedLength=function(){return X};this.dec=function(N,Ka,ca,aa){0!=(aa&4)&&(K=0);S=K;X=0;var r=Ka;if(0==(aa&2)){var B=N[r++]|N[r++]<<8;aa=r+8*B;for(var A=0;A<B;A++){var q=N[r++]|N[r++]<<8,d=N[r++]|N[r++]<<8,y=N[r++]|N[r++]<<8|N[r++]<<16|N[r++]<<24;var p=d-X;va(N,aa,M,K,p);K+=p;aa+=p;X=d;for(p=0;p<q;p++)M[K++]=M[y++],X++}}else aa=r;if(p=Ka+ca-aa)va(N,aa,M,K,p),X+=p,K+=p;return 0}}
var rdpBitmap=rdpcodecs.bitmap;
function MSGSMEncoder(){function K(b,W){return-32768==b&&-32768==W?32767:b*W>>15<<16>>16}function M(b,W){return-32768==b&&-32768==W?32767:b*W+16384>>15<<16>>16}function S(b,W){if(0>=b){if(0<=W)return b+W;b=-(b+1)-(W+1);return 2147483647<=b?-2147483648:-b-2}if(0>=W)return b+W;b+=W;return 2147483647<b?2147483647:b}function X(b){if(0>b){if(-1073741824>=b)return 0;b=~b}return(0!=(b&4294901760)?0!=(b&4278190080)?-1+z[255&b>>24]:7+z[255&b>>16]:0!=(b&65280)?15+z[255&b>>8]:23+z[255&b])<<16>>16}function U(b,
W){return 16<=W?0>b?-1:-0:-16>=W?0:0>W?b<<-W<<16>>16:b>>W<<16>>16}function va(b,W,wa,pa,Ha,Aa){b=K(b<<16>>16,Ha[Aa]);W=b+(W<<16>>16);W=(-32768>W?-32768:32767<W?32767:W)+256;b=(-32768>W?-32768:32767<W?32767:W)>>9<<16>>16;Ha[Aa]=(b>wa?wa-pa:b<pa?0:b-pa)<<16>>16}function N(b,W){b=D[b+3*W]>>2<<16>>16;return b*b}function Ka(b,W,wa,pa,Ha,Aa,Fa){b=b[wa]+Aa;Ha=((-32768>b?-32768:32767<b?32767:b)<<26>>16)-(Ha<<17>>16);pa=M(Fa,-32768>Ha?-32768:32767<Ha?32767:Ha);Fa=pa+pa;W[wa]=-32768>Fa?-32768:32767<Fa?32767:
Fa}function ca(b){for(var W,wa,pa=0;8>pa;pa++)0>b[pa]?(W=(-32768==b[pa]?32767:-b[pa])<<16>>16,wa=(W>>2<<16>>16)+26112,b[pa]=-(11059>W?W<<1:20070>W?W+11059:-32768>wa?-32768:32767<wa?32767:wa)<<16>>16):(W=b[pa],wa=(W>>2<<16>>16)+26112,b[pa]=(11059>W?W<<1:20070>W?W+11059:-32768>wa?-32768:32767<wa?32767:wa)<<16>>16)}function aa(b,W,wa,pa,Ha){for(var Aa=b.u,Fa,F,ub,zb,hb,Qb;0!=wa;){wa--;Fa=zb=pa[Ha];for(Qb=0;8>Qb;Qb++)ub=Aa[Qb],hb=W[Qb],Aa[Qb]=zb,F=M(hb,Fa),zb=ub+F,zb=-32768>zb?-32768:32767<zb?32767:zb,
F=M(hb,ub),Fa+=F,Fa=-32768>Fa?-32768:32767<Fa?32767:Fa;pa[Ha++]=Fa}b.u=Aa}var r=[6554,16384,26214,32767],B=[29128,26215,23832,21846,20165,18725,17476,16384],A=[18431,20479,22527,24575,26623,28671,30719,32767],q=new function(){this.dp0=new Int16Array(280);this.mp=this.l_z2=this.z1=0;this.u=new Int16Array(8);this.larpp=[new Int16Array(8),new Int16Array(8)];this.j=0;this.nrp=40;this.v=new Int16Array(9);this.msr=0},d=new Int16Array(8),y=new Int16Array(4),p=new Int16Array(4),l=new Int16Array(4),k=new Int16Array(4),
h=new Int16Array(52),e=new Int16Array(160),n=new Uint8Array(33),x=0,g=hi5.Arrays.arraycopy;this.encode=function(b,W,wa,pa){for(var Ha=W,Aa,Fa=0;160>Fa;Fa++)Aa=b[Ha++],e[Fa]=0>Aa?32768*Aa:32767*Aa;f=!f;for(var F=0,ub=0,zb=0,hb=0,Qb=120,ad=new Int16Array(50),V=new Int16Array(160),od=0,bd=0,Y=q.z1,Lb=q.l_z2,Uc=q.mp,hc,Ga,ld,za,Sa,Na,xc=160;0!=xc;){xc--;za=e[od++]>>3<<2<<16>>16;hc=za-Y<<16>>16;Y=za;Sa=hc;Sa<<=15;Ga=Lb>>15<<16>>16;ld=Lb-(Ga<<15)<<16>>16;Sa+=M(ld,32735);Na=32735*Ga;Lb=S(Na,Sa);Na=S(Lb,
16384);Ga=M(Uc,-28180);Uc=Na>>15<<16>>16;var md=Uc+Ga;V[bd++]=-32768>md?-32768:32767<md?32767:md}q.z1=Y;q.l_z2=Lb;q.mp=Uc;var Hb,ka=0,Oc=0,Z;for(Z=0;159>=Z;Z++){var Rb=V[Z]+0;var Mc=-32768>Rb?-32768:32767<Rb?32767:Rb;Mc>Oc&&(Oc=Mc)}var oa=0==Oc?0:4-X(Oc<<16)<<16>>16;if(0<oa)switch(oa){case 1:for(Z=0;159>=Z;Z++)V[Z]=M(V[Z],16384);break;case 2:for(Z=0;159>=Z;Z++)V[Z]=M(V[Z],8192);break;case 3:for(Z=0;159>=Z;Z++)V[Z]=M(V[Z],4096);break;case 4:for(Z=0;159>=Z;Z++)V[Z]=M(V[Z],2048)}var Q=V[ka];g([0,0,0,
0,0,0,0,0,0],0,m,0,m.length);m[0]+=Q*V[ka-0];Q=V[++ka];m[0]+=Q*V[ka-0];m[1]+=Q*V[ka-1];Q=V[++ka];m[0]+=Q*V[ka-0];m[1]+=Q*V[ka-1];m[2]+=Q*V[ka-2];Q=V[++ka];m[0]+=Q*V[ka-0];m[1]+=Q*V[ka-1];m[2]+=Q*V[ka-2];m[3]+=Q*V[ka-3];Q=V[++ka];m[0]+=Q*V[ka-0];m[1]+=Q*V[ka-1];m[2]+=Q*V[ka-2];m[3]+=Q*V[ka-3];m[4]+=Q*V[ka-4];Q=V[++ka];m[0]+=Q*V[ka-0];m[1]+=Q*V[ka-1];m[2]+=Q*V[ka-2];m[3]+=Q*V[ka-3];m[4]+=Q*V[ka-4];m[5]+=Q*V[ka-5];Q=V[++ka];m[0]+=Q*V[ka-0];m[1]+=Q*V[ka-1];m[2]+=Q*V[ka-2];m[3]+=Q*V[ka-3];m[4]+=Q*V[ka-
4];m[5]+=Q*V[ka-5];m[6]+=Q*V[ka-6];Q=V[++ka];m[0]+=Q*V[ka-0];m[1]+=Q*V[ka-1];m[2]+=Q*V[ka-2];m[3]+=Q*V[ka-3];m[4]+=Q*V[ka-4];m[5]+=Q*V[ka-5];m[6]+=Q*V[ka-6];m[7]+=Q*V[ka-7];++ka;for(Hb=ka;160>Hb;++Hb)Q=V[Hb],m[0]+=Q*V[Hb-0],m[1]+=Q*V[Hb-1],m[2]+=Q*V[Hb-2],m[3]+=Q*V[Hb-3],m[4]+=Q*V[Hb-4],m[5]+=Q*V[Hb-5],m[6]+=Q*V[Hb-6],m[7]+=Q*V[Hb-7],m[8]+=Q*V[Hb-8];for(Z=0;9>Z;Z++)m[Z]<<=1;if(0<oa)for(Z=0;160>Z;Z++)V[Z]<<=oa;var fa=new Int16Array(1),na=0,db,Tb=new Int16Array(9),Ra=new Int16Array(9),dc=new Int16Array(9);
if(0==m[0])for(db=0;8>db;db++)d[db]=0;else{fa[0]=X(m[0]);for(db=0;8>=db;db++)Tb[db]=m[db]<<fa[0]>>16;g(Tb,0,dc,0,7);g(Tb,0,Ra,0,8);for(var Cc=1;8>=Cc;Cc++,na++){fa[0]=Ra[1];fa[0]=(0>fa[0]?-32768==fa[0]?32767:-fa[0]:fa[0])<<16>>16;if(Ra[0]<fa[0]){for(db=Cc;8>db;db++)d[db]=0;break}var Ec=na;var nd=fa[0],ta=nd,Sb=Ra[0],xb=0,Rc=15;if(0==nd)var ed=0;else{for(;0!=Rc;)Rc--,xb=xb<<17>>16,ta<<=1,ta>=Sb&&(ta-=Sb,xb++);ed=xb<<16>>16}d[Ec]=ed;0<Ra[1]&&(d[na]=-d[na]);if(8==Cc)break;fa[0]=M(Ra[1],d[na]);var qc=
Ra[0]+fa[0];Ra[0]=-32768>qc?-32768:32767<qc?32767:qc;for(var bc=1;bc<=8-Cc;bc++){fa[0]=M(dc[bc],d[na]);var fd=Ra[bc+1]+fa[0];Ra[bc]=-32768>fd?-32768:32767<fd?32767:fd;fa[0]=M(Ra[bc+1],d[na]);var Dc=dc[bc]+fa[0];dc[bc]=-32768>Dc?-32768:32767<Dc?32767:Dc}}}for(var a,v=0;8>v;v++)a=d[v],a=(0>a?-32768==a?32767:-a:a)<<16>>16,22118>a?a>>=1:31130>a?a-=11059:(a-=26112,a<<=2),d[v]=0>d[v]?-a:a;var w=0;va(20480,0,31,-32,d,w++);va(20480,0,31,-32,d,w++);va(20480,2048,15,-16,d,w++);va(20480,-2560,15,-16,d,w++);
va(13964,94,7,-8,d,w++);va(15360,-1792,7,-8,d,w++);va(8534,-341,3,-4,d,w++);va(9036,-1144,3,-4,d,w++);var E=new Int16Array(8),H=q.j;var J=H^1;q.j=J;var P=q.larpp[H],O=q.larpp[J],ba=0;Ka(d,P,ba++,0,0,-32,13107);Ka(d,P,ba++,0,0,-32,13107);Ka(d,P,ba++,0,2048,-16,13107);Ka(d,P,ba++,0,-2560,-16,13107);Ka(d,P,ba++,0,94,-8,19223);Ka(d,P,ba++,0,-1792,-8,17476);Ka(d,P,ba++,0,-341,-4,31454);Ka(d,P,ba++,0,-1144,-4,29708);for(var ha=0;8>ha;ha++){var xa=(O[ha]>>2<<16>>16)+(P[ha]>>2<<16>>16);E[ha]=-32768>xa?-32768:
32767<xa?32767:xa;var eb=E[ha]+(O[ha]>>1<<16>>16);E[ha]=-32768>eb?-32768:32767<eb?32767:eb}ca(E);aa(q,E,13,V,0);for(var ya=0;8>ya;ya++){var ua=(O[ya]>>1<<16>>16)+(P[ya]>>1<<16>>16);E[ya]=-32768>ua?-32768:32767<ua?32767:ua}ca(E);aa(q,E,14,V,13);for(var R=0;8>R;R++){var yb=(O[R]>>2<<16>>16)+(P[R]>>2<<16>>16);E[R]=-32768>yb?-32768:32767<yb?32767:yb;var ic=E[R]+(P[R]>>1<<16>>16);E[R]=-32768>ic?-32768:32767<ic?32767:ic}ca(E);aa(q,E,13,V,27);for(var Ab=0;8>Ab;Ab++)E[Ab]=P[Ab];ca(E);aa(q,E,120,V,40);for(var Mb=
q.dp0,Ia,Ub,jc=0;3>=jc;jc++,ub+=13){for(var Vb=V,Bb=40*jc,Cb=ad,kc=Mb,dd=Mb,Nc=Qb,wc=y,Zb=l,Xa=zb++,ma=void 0,mb=void 0,lc=void 0,ec=void 0,Db=void 0,Eb=void 0,Nb=void 0,ia=void 0,Pc=Vb,Qc=Bb,ea=kc,da=Nc,Ya=Zb,Ob=wc,$b=Xa,ja=new Int16Array(40),mc=0,ib=0;39>=ib;ib++)ma=Pc[ib+Qc],ma=(0>ma?-32768==ma?32767:-ma:ma)<<16>>16,ma>mc&&(mc=ma);ma=0;0!=mc&&(ma=X(mc<<16));mb=6<ma?0:6-ma<<16>>16;for(ib=0;39>=ib;ib++)ja[ib]=Pc[ib+Qc]>>mb;Eb=0;for(ia=Nb=40;120>=ia;ia++){var T=1;var la=ja[0]*ea[da-ia];la+=ja[1]*
ea[T+da-ia];T++;la+=ja[2]*ea[T+da-ia];T++;la+=ja[3]*ea[T+da-ia];T++;la+=ja[4]*ea[T+da-ia];T++;la+=ja[5]*ea[T+da-ia];T++;la+=ja[6]*ea[T+da-ia];T++;la+=ja[7]*ea[T+da-ia];T++;la+=ja[8]*ea[T+da-ia];T++;la+=ja[9]*ea[T+da-ia];T++;la+=ja[10]*ea[T+da-ia];T++;la+=ja[11]*ea[T+da-ia];T++;la+=ja[12]*ea[T+da-ia];T++;la+=ja[13]*ea[T+da-ia];T++;la+=ja[14]*ea[T+da-ia];T++;la+=ja[15]*ea[T+da-ia];T++;la+=ja[16]*ea[T+da-ia];T++;la+=ja[17]*ea[T+da-ia];T++;la+=ja[18]*ea[T+da-ia];T++;la+=ja[19]*ea[T+da-ia];T++;la+=ja[20]*
ea[T+da-ia];T++;la+=ja[21]*ea[T+da-ia];T++;la+=ja[22]*ea[T+da-ia];T++;la+=ja[23]*ea[T+da-ia];T++;la+=ja[24]*ea[T+da-ia];T++;la+=ja[25]*ea[T+da-ia];T++;la+=ja[26]*ea[T+da-ia];T++;la+=ja[27]*ea[T+da-ia];T++;la+=ja[28]*ea[T+da-ia];T++;la+=ja[29]*ea[T+da-ia];T++;la+=ja[30]*ea[T+da-ia];T++;la+=ja[31]*ea[T+da-ia];T++;la+=ja[32]*ea[T+da-ia];T++;la+=ja[33]*ea[T+da-ia];T++;la+=ja[34]*ea[T+da-ia];T++;la+=ja[35]*ea[T+da-ia];T++;la+=ja[36]*ea[T+da-ia];T++;la+=ja[37]*ea[T+da-ia];T++;la+=ja[38]*ea[T+da-ia];T++;
la+=ja[39]*ea[T+da-ia];la>Eb&&(Nb=ia<<16>>16,Eb=la)}Ob[$b]=Nb;Eb=Eb<<1>>6-mb;for(ib=Db=0;39>=ib;ib++){var jb=ea[ib-Nb+da]>>3<<16>>16;Db+=jb*jb}Db<<=1;if(0>=Eb)Ya[$b]=0;else if(Eb>=Db)Ya[$b]=3;else{ma=X(Db);ec=Eb<<ma>>16<<16>>16;lc=Db<<ma>>16<<16>>16;for(var fc=0;2>=fc&&!(ec<=K(lc,r[fc]));fc++)Ya[$b]=fc}var La=void 0,ra=void 0,nb=void 0,ob=wc[Xa],Za=kc,Ea=Vb,Fb=Bb,kb=dd,Pb=Cb,Ma=Nc;switch(Zb[Xa]){case 0:nb=3277;for(ra=0;39>=ra;ra++)kb[ra+Ma]=M(nb,Za[ra-ob+Ma]),La=Ea[ra+Fb]-kb[ra+Ma],Pb[ra+5]=-32768>
La?-32768:32767<La?32767:La;break;case 1:nb=11469;for(ra=0;39>=ra;ra++)kb[ra+Ma]=M(nb,Za[ra-ob+Ma]),La=Ea[ra+Fb]-kb[ra+Ma],Pb[ra+5]=-32768>La?-32768:32767<La?32767:La;break;case 2:nb=21299;for(ra=0;39>=ra;ra++)kb[ra+Ma]=M(nb,Za[ra-ob+Ma]),La=Ea[ra+Fb]-kb[ra+Ma],Pb[ra+5]=-32768>La?-32768:32767<La?32767:La;break;case 3:for(nb=32767,ra=0;39>=ra;ra++)kb[ra+Ma]=M(nb,Za[ra-ob+Ma]),La=Ea[ra+Fb]-kb[ra+Ma],Pb[ra+5]=-32768>La?-32768:32767<La?32767:La}for(var Ba=ad,nc=k,Sc=p,gc=hb++,oc=h,Fc=ub,Gc=new Int16Array(13),
ab=new Int16Array(13),qa=void 0,Ua=Ba,$a=0;39>=$a;$a++)qa=4096,qa+=-134*Ua[$a+0]+-374*Ua[$a+1]+2054*Ua[$a+3]+5741*Ua[$a+4]+8192*Ua[$a+5]+5741*Ua[$a+6]+2054*Ua[$a+7]+-374*Ua[$a+9]+-134*Ua[$a+10],qa=qa>>13<<16>>16,D[$a]=-32768>qa?-32768:32767<qa?32767:qa;var Hc=void 0,ac=void 0,Ca=void 0,pb=Gc,Wb=Sc,yc=gc,pc=0;Hc=Ca=0+(N(0,1)+N(0,2)+N(0,3)+N(0,4)+N(0,5)+N(0,6)+N(0,7)+N(0,8)+N(0,9)+N(0,10)+N(0,11)+N(0,12));Ca+=N(0,0);ac=Ca<<1;Ca=0+(N(1,0)+N(1,1)+N(1,2)+N(1,3)+N(1,4)+N(1,5)+N(1,6)+N(1,7)+N(1,8)+N(1,9)+
N(1,10)+N(1,11)+N(1,12));Ca<<=1;Ca>ac&&(pc=1,ac=Ca);Ca=0+(N(2,0)+N(2,1)+N(2,2)+N(2,3)+N(2,4)+N(2,5)+N(2,6)+N(2,7)+N(2,8)+N(2,9)+N(2,10)+N(2,11)+N(2,12));Ca<<=1;Ca>ac&&(pc=2,ac=Ca);Ca=Hc+N(3,12);Ca<<=1;Ca>ac&&(pc=3);for(var Ic=0;12>=Ic;Ic++)pb[Ic]=D[pc+3*Ic];Wb[yc]=pc;var Gb=void 0,Oa=void 0,bb=void 0,qb=void 0,zc=void 0,Xb=void 0,sa=void 0,Ib=void 0,cb=void 0,Ac=Gc,Tc=oc,rc=Fc,Pa=nc,sc=gc,Ja=0;for(Oa=0;12>=Oa;Oa++)sa=Ac[Oa],sa=0>sa?-32768==sa?32767:-sa:sa,sa>Ja&&(Ja=sa);qb=0;sa=Ja>>9<<16>>16;for(Oa=
cb=0;5>=Oa;Oa++)cb=0>=sa?cb|1:cb|0,sa=sa>>1<<16>>16,0==cb&&qb++;var tc=(Ja>>(qb+5<<16>>16)<<16>>16)+(qb<<3<<16>>16);Ib=-32768>tc?-32768:32767<tc?32767:tc;var Yb=0;15<Ib&&(Yb=(Ib>>3<<16>>16)-1<<16>>16);Gb=Ib-(Yb<<3)<<16>>16;if(0==Gb)Yb=-4,Gb=7;else{for(;7>=Gb;)Gb=(Gb<<1|1)<<16>>16,Yb--;Gb-=8}I==I?(t=Yb,L=Gb):(C=Yb,u=Gb);qb=t;bb=L;Xb=6-qb<<16>>16;zc=B[bb];for(Oa=0;12>=Oa;Oa++)sa=Ac[Oa]<<Xb<<16>>16,sa=K(sa,zc),sa=sa>>12<<16>>16,Tc[Oa+rc]=sa+4<<16>>16;L=bb;t=qb;Pa[sc]=Ib;var rb=void 0,Qa=void 0,Da=void 0,
tb=void 0,uc=void 0,Jb=void 0,Jc=oc,Vc=ab,Wc=Fc;I==I?(uc=A[L],Qa=6-t<<16>>16):(uc=A[u],Qa=6-C<<16>>16);tb=-32768>Qa?-32768:32767<Qa?32767:Qa;Qa=tb-1;var Kc=-32768>Qa?-32768:32767<Qa?32767:Qa;Da=16<=Kc?0:-16>=Kc?-0:0>Kc?U(1,-Kc):1<<Kc<<16>>16;for(var gd=G=0;13>gd;gd++)Jb=(Jc[Wc++]<<1)-7<<16>>16,Jb=Jb<<28>>16,Jb=M(uc,Jb),rb=Jb+Da,Jb=-32768>rb?-32768:32767<rb?32767:rb,Vc[G++]=U(Jb,tb);var lb=void 0,Xc=ab,Va=Ba,fb=I,Kb=13,Yc=0;lb=fb==I?5:0;switch(Sc[gc]){case 3:Va[lb++]=0;do Va[lb++]=0,Va[lb++]=0,Va[lb++]=
Xc[Yc++],--Kb;while(0!=Kb);break;case 2:do Va[lb++]=0,Va[lb++]=0,Va[lb++]=Xc[Yc++],--Kb;while(0!=Kb);break;case 1:do Va[lb++]=0,Va[lb++]=Xc[Yc++],Va[lb++]=0,--Kb;while(0!=Kb);break;case 0:do Va[lb++]=Xc[Yc++],Va[lb++]=0,Va[lb++]=0,--Kb;while(0!=Kb)}fb==I&&(Va[lb++]=0);for(Ia=0;39>=Ia;Ia++)Ub=ad[5+Ia]+Mb[Ia+Qb],Mb[Ia+Qb]=-32768>Ub?-32768:32767<Ub?32767:Ub;Qb+=40}for(Ia=0;120>Ia;Ia++)Mb[Ia]=Mb[160+Ia];if(f){var c=d[0]<<4|d[1]<<10;n[F++]=c>>4;c=c>>5|d[2]<<11;n[F++]=c>>7;c=c>>5|d[3]<<11;c=c>>4|d[4]<<
12;n[F++]=c>>6;c=c>>4|d[5]<<12;c=c>>3|d[6]<<13;n[F++]=c>>7;c=c>>3|d[7]<<13;c=c>>7|y[0]<<9;n[F++]=c>>5;c=c>>2|l[0]<<14;c=c>>2|p[0]<<14;c=c>>6|k[0]<<10;n[F++]=c>>3;c=c>>3|h[0]<<13;n[F++]=c>>8;c=c>>3|h[1]<<13;c=c>>3|h[2]<<13;c=c>>3|h[3]<<13;n[F++]=c>>7;c=c>>3|h[4]<<13;c=c>>3|h[5]<<13;c=c>>3|h[6]<<13;n[F++]=c>>6;c=c>>3|h[7]<<13;c=c>>3|h[8]<<13;n[F++]=c>>8;c=c>>3|h[9]<<13;c=c>>3|h[10]<<13;c=c>>3|h[11]<<13;n[F++]=c>>7;c=c>>3|h[12]<<13;c=c>>7|y[1]<<9;n[F++]=c>>5;c=c>>2|l[1]<<14;c=c>>2|p[1]<<14;c=c>>6|k[1]<<
10;n[F++]=c>>3;c=c>>3|h[13]<<13;n[F++]=c>>8;c=c>>3|h[14]<<13;c=c>>3|h[15]<<13;c=c>>3|h[16]<<13;n[F++]=c>>7;c=c>>3|h[17]<<13;c=c>>3|h[18]<<13;c=c>>3|h[19]<<13;n[F++]=c>>6;c=c>>3|h[20]<<13;c=c>>3|h[21]<<13;n[F++]=c>>8;c=c>>3|h[22]<<13;c=c>>3|h[23]<<13;c=c>>3|h[24]<<13;n[F++]=c>>7;c=c>>3|h[25]<<13;c=c>>7|y[2]<<9;n[F++]=c>>5;c=c>>2|l[2]<<14;c=c>>2|p[2]<<14;c=c>>6|k[2]<<10;n[F++]=c>>3;c=c>>3|h[26]<<13;n[F++]=c>>8;c=c>>3|h[27]<<13;c=c>>3|h[28]<<13;c=c>>3|h[29]<<13;n[F++]=c>>7;c=c>>3|h[30]<<13;c=c>>3|h[31]<<
13;c=c>>3|h[32]<<13;n[F++]=c>>6;c=c>>3|h[33]<<13;c=c>>3|h[34]<<13;n[F++]=c>>8;c=c>>3|h[35]<<13;c=c>>3|h[36]<<13;c=c>>3|h[37]<<13;n[F++]=c>>7;c=c>>3|h[38]<<13;c=c>>7|y[3]<<9;n[F++]=c>>5;c=c>>2|l[3]<<14;c=c>>2|p[3]<<14;c=c>>6|k[3]<<10;n[F++]=c>>3;c=c>>3|h[39]<<13;n[F++]=c>>8;c=c>>3|h[40]<<13;c=c>>3|h[41]<<13;c=c>>3|h[42]<<13;n[F++]=c>>7;c=c>>3|h[43]<<13;c=c>>3|h[44]<<13;c=c>>3|h[45]<<13;n[F++]=c>>6;c=c>>3|h[46]<<13;c=c>>3|h[47]<<13;n[F++]=c>>8;c=c>>3|h[48]<<13;c=c>>3|h[49]<<13;c=c>>3|h[50]<<13;n[F++]=
c>>7;c=c>>3|h[51]<<13;n[F]=c>>12;x=n[F]}else c=x<<6|d[0]<<10,n[F++]=c>>6,c=c>>6|d[1]<<10,n[F++]=c>>8,c=c>>5|d[2]<<11,c=c>>5|d[3]<<11,n[F++]=c>>6,c=c>>4|d[4]<<12,c=c>>4|d[5]<<12,n[F++]=c>>6,c=c>>3|d[6]<<13,c=c>>3|d[7]<<13,n[F++]=c>>8,c=c>>7|y[0]<<9,c=c>>2|l[0]<<14,n[F++]=c>>7,c=c>>2|p[0]<<14,c=c>>6|k[0]<<10,n[F++]=c>>7,c=c>>3|h[0]<<13,c=c>>3|h[1]<<13,c=c>>3|h[2]<<13,n[F++]=c>>6,c=c>>3|h[3]<<13,c=c>>3|h[4]<<13,n[F++]=c>>8,c=c>>3|h[5]<<13,c=c>>3|h[6]<<13,c=c>>3|h[7]<<13,n[F++]=c>>7,c=c>>3|h[8]<<13,c=
c>>3|h[9]<<13,c=c>>3|h[10]<<13,n[F++]=c>>6,c=c>>3|h[11]<<13,c=c>>3|h[12]<<13,n[F++]=c>>8,c=c>>7|y[1]<<9,c=c>>2|l[1]<<14,n[F++]=c>>7,c=c>>2|p[1]<<14,c=c>>6|k[1]<<10,n[F++]=c>>7,c=c>>3|h[13]<<13,c=c>>3|h[14]<<13,c=c>>3|h[15]<<13,n[F++]=c>>6,c=c>>3|h[16]<<13,c=c>>3|h[17]<<13,n[F++]=c>>8,c=c>>3|h[18]<<13,c=c>>3|h[19]<<13,c=c>>3|h[20]<<13,n[F++]=c>>7,c=c>>3|h[21]<<13,c=c>>3|h[22]<<13,c=c>>3|h[23]<<13,n[F++]=c>>6,c=c>>3|h[24]<<13,c=c>>3|h[25]<<13,n[F++]=c>>8,c=c>>7|y[2]<<9,c=c>>2|l[2]<<14,n[F++]=c>>7,c=
c>>2|p[2]<<14,c=c>>6|k[2]<<10,n[F++]=c>>7,c=c>>3|h[26]<<13,c=c>>3|h[27]<<13,c=c>>3|h[28]<<13,n[F++]=c>>6,c=c>>3|h[29]<<13,c=c>>3|h[30]<<13,n[F++]=c>>8,c=c>>3|h[31]<<13,c=c>>3|h[32]<<13,c=c>>3|h[33]<<13,n[F++]=c>>7,c=c>>3|h[34]<<13,c=c>>3|h[35]<<13,c=c>>3|h[36]<<13,n[F++]=c>>6,c=c>>3|h[37]<<13,c=c>>3|h[38]<<13,n[F++]=c>>8,c=c>>7|y[3]<<9,c=c>>2|l[3]<<14,n[F++]=c>>7,c=c>>2|p[3]<<14,c=c>>6|k[3]<<10,n[F++]=c>>7,c=c>>3|h[39]<<13,c=c>>3|h[40]<<13,c=c>>3|h[41]<<13,n[F++]=c>>6,c=c>>3|h[42]<<13,c=c>>3|h[43]<<
13,n[F++]=c>>8,c=c>>3|h[44]<<13,c=c>>3|h[45]<<13,c=c>>3|h[46]<<13,n[F++]=c>>7,c=c>>3|h[47]<<13,c=c>>3|h[48]<<13,c=c>>3|h[49]<<13,n[F++]=c>>6,c=c>>3|h[50]<<13,c=c>>3|h[51]<<13,n[F++]=c>>8;var Bc,Zc=f?32:33;for(Bc=0;Bc<Zc;Bc++)wa[Bc+pa]=n[Bc];return Zc};var f=!1,z=[8,7,6,6,5,5,5,5,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=new Int32Array(9),t=0,L=0,C=0,u=0,G=0,I=0,D=new Int16Array(40)}
function MSGSM(){function K(g,f,z,m,t,L,C,u){var G=0;h(e,0,160,0);h(n,0,40,0);for(var I=0;3>=I;I++,G+=13){var D=t[I],b=z[I],W=G,wa=L,pa=n,Ha=new Int32Array(13);Ha.buffer||h(Ha,0,13,0);var Aa=0;15<D&&(Aa=(D>>3)-1);D-=Aa<<3;if(0==D)Aa=-4,D=7;else{for(;7>=D;)D=D<<1|1,Aa--;D-=8}var Fa=Array(2);Fa[0]=Aa;Fa[1]=D;Aa=Ha;D=W;W=ca[Fa[1]];Fa=N(6,Fa[0]);var F=N(Fa,1);F=16<=F?0:-16>=F?-0:0>F?Ka(1,-F):1<<F;for(var ub=0,zb=0;13>zb;zb++){var hb=(wa[D++]<<1)-7;hb<<=12;hb=U(W,hb);hb+=F;-32768>hb?hb=-32768:32767<hb&&
(hb=32767);Aa[ub++]=Ka(hb,Fa)}wa=13;W=Aa=0;switch(b){case 3:pa[W++]=0;case 2:pa[W++]=0;case 1:pa[W++]=0;case 0:pa[W++]=Ha[Aa++],wa--}do pa[W++]=0,pa[W++]=0,pa[W++]=Ha[Aa++];while(0<--wa);for(;4>++b;)pa[W++]=0;Ha=f[I];b=m[I];pa=n;q=Ha=40>Ha||120<Ha?q:Ha;wa=aa[b];for(Aa=0;39>=Aa;Aa++)b=U(wa,r[Aa-Ha+120]),b+=pa[Aa],-32768>b?b=-32768:32767<b&&(b=32767),r[Aa+120]=b;k(r,40,r,0,120);k(r,120,e,40*I,39)}f=B[A];z=B[A^=1];m=0;M(g,f,m++,0,0,-32,13107);M(g,f,m++,0,0,-32,13107);M(g,f,m++,0,2048,-16,13107);M(g,
f,m++,0,-2560,-16,13107);M(g,f,m++,0,94,-8,19223);M(g,f,m++,0,-1792,-8,17476);M(g,f,m++,0,-341,-4,31454);M(g,f,m++,0,-1144,-4,29708);g=x;for(t=0;8>t;t++)m=(z[t]>>2)+(f[t]>>2),-32768>m?m=-32768:32767<m&&(m=32767),m+=z[t]>>1,-32768>m?m=-32768:32767<m&&(m=32767),g[t]=m;S(x);X(x,13,e,C,0,u);g=x;for(t=0;8>t;t++)m=(z[t]>>1)+(f[t]>>1),-32768>m?m=-32768:32767<m&&(m=32767),g[t]=m;S(x);X(x,14,e,C,13,u);g=x;for(t=0;8>t;t++)m=(z[t]>>2)+(f[t]>>2),-32768>m?m=-32768:32767<m&&(m=32767),m+=f[t]>>1,-32768>m?m=-32768:
32767<m&&(m=32767),g[t]=m;S(x);X(x,13,e,C,27,u);g=x;for(z=0;8>z;z++)g[z]=f[z];S(x);X(x,120,e,C,40,u);f=u;for(z=u+160;z-- >u;f++)g=U(y,28180),y=C[f]+g,-32768>y?y=-32768:32767<y&&(y=32767),g=y<<1,-32768>g?g=-32768:32767<g&&(g=32767),C[f]=g}function M(g,f,z,m,t,L,C){m=g[z]+L;-32768>m?m=-32768:32767<m&&(m=32767);m=N(m<<10,t<<1);m=U(C,m);m+=m;-32768>m?m=-32768:32767<m&&(m=32767);f[z]=m}function S(g){for(var f,z=0;8>z;z++)0>g[z]?(f=-32768==g[z]?32767:-g[z],g[z]=-(11059>f?f<<1:20070>f?f+11059:va(f>>2,26112))):
(f=g[z],g[z]=11059>f?f<<1:20070>f?f+11059:va(f>>2,26112))}function X(g,f,z,m,t,L){for(var C,u,G;0!=f;){f--;C=z[t];for(var I=7;0<=I;I--)u=g[I],G=d[I],G=((-32768==u&&-32768==G?32767:65535&u*G+16384>>15)&65535)<<16>>16,C=N(C,G),u=((-32768==u&&-32768==C?32767:65535&u*C+16384>>15)&65535)<<16>>16,u=d[I]+u,-32768>u?u=-32768:32767<u&&(u=32767),d[I+1]=u;m[L+t++]=d[0]=C}}function U(g,f){return-32768==g&&-32768==f?32767:(g*f+16384>>15&65535)<<16>>16}function va(g,f){g+=f;return-32768>g?-32768:32767<g?32767:
g}function N(g,f){g-=f;return-32768>g?-32768:32767<g?32767:g}function Ka(g,f){return 16<=f?0>g?-1:0:-16>=f?0:0>f?g<<-f:g>>f}var ca=[18431,20479,22527,24575,26623,28671,30719,32767],aa=[3277,11469,21299,32767],r=new Int32Array(280),B=[new Int32Array(8),new Int32Array(8)],A=0,q=40,d=new Int32Array(9),y=0,p=new Int32Array(320);p[0]=0;var l=[.1],k=hi5.Arrays.arraycopy,h=hi5.Arrays.fill;this.decode=function(g,f,z){var m=0,t;z=f+z;for(var L=new Int32Array(8),C=new Int32Array(4),u=new Int32Array(4),G=new Int32Array(4),
I=new Int32Array(4),D=new Int32Array(52);f<z;){var b=g[f++]&255;L[0]=b&63;b>>>=6;b|=g[f++]<<2&1023;L[1]=b&63;b>>>=6;b|=g[f++]<<4&4095;L[2]=b&31;b>>>=5;L[3]=b&31;b>>>=5;b|=g[f++]<<2&1023;L[4]=b&15;b>>>=4;L[5]=b&15;b>>>=4;b|=g[f++]<<2&1023;L[6]=b&7;b>>>=3;L[7]=b&7;b>>>=3;b|=g[f++]<<4&4095;C[0]=b&127;b>>>=7;G[0]=b&3;b>>>=2;u[0]=b&3;b>>>=2;b|=g[f++]<<1&511;I[0]=b&63;b>>>=6;D[0]=b&7;b=g[f++]&255;D[1]=b&7;b>>>=3;D[2]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[3]=b&7;b>>>=3;D[4]=b&7;b>>>=3;D[5]=b&7;b>>>=3;b|=g[f++]<<
1&511;D[6]=b&7;b>>>=3;D[7]=b&7;b>>>=3;D[8]=b&7;b=g[f++]&255;D[9]=b&7;b>>>=3;D[10]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[11]=b&7;b>>>=3;D[12]=b&7;b>>>=3;b|=g[f++]<<4&4095;C[1]=b&127;b>>>=7;G[1]=b&3;b>>>=2;u[1]=b&3;b>>>=2;b|=g[f++]<<1&511;I[1]=b&63;b>>>=6;D[13]=b&7;b=g[f++]&255;D[14]=b&7;b>>>=3;D[15]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[16]=b&7;b>>>=3;D[17]=b&7;b>>>=3;D[18]=b&7;b>>>=3;b|=g[f++]<<1&511;D[19]=b&7;b>>>=3;D[20]=b&7;b>>>=3;D[21]=b&7;b=g[f++]&255;D[22]=b&7;b>>>=3;D[23]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[24]=
b&7;b>>>=3;D[25]=b&7;b>>>=3;b|=g[f++]<<4&4095;C[2]=b&127;b>>>=7;G[2]=b&3;b>>>=2;u[2]=b&3;b>>>=2;b|=g[f++]<<1&511;I[2]=b&63;b>>>=6;D[26]=b&7;b=g[f++]&255;D[27]=b&7;b>>>=3;D[28]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[29]=b&7;b>>>=3;D[30]=b&7;b>>>=3;D[31]=b&7;b>>>=3;b|=g[f++]<<1&511;D[32]=b&7;b>>>=3;D[33]=b&7;b>>>=3;D[34]=b&7;b=g[f++]&255;D[35]=b&7;b>>>=3;D[36]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[37]=b&7;b>>>=3;D[38]=b&7;b>>>=3;b|=g[f++]<<4&4095;C[3]=b&127;b>>>=7;G[3]=b&3;b>>>=2;u[3]=b&3;b>>>=2;b|=g[f++]<<1&511;
I[3]=b&63;b>>>=6;D[39]=b&7;b=g[f++]&255;D[40]=b&7;b>>>=3;D[41]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[42]=b&7;b>>>=3;D[43]=b&7;b>>>=3;D[44]=b&7;b>>>=3;b|=g[f++]<<1&511;D[45]=b&7;b>>>=3;D[46]=b&7;b>>>=3;D[47]=b&7;b=g[f++]&255;D[48]=b&7;b>>>=3;D[49]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[50]=b&7;b>>>=3;D[51]=b&7;b>>>=3;K(L,C,u,G,I,D,p,0);b&=15;b|=g[f++]<<4&4095;L[0]=b&63;b>>>=6;L[1]=b&63;b=g[f++]&255;L[2]=b&31;b>>>=5;b|=g[f++]<<3&2047;L[3]=b&31;b>>>=5;L[4]=b&15;b>>>=4;b|=g[f++]<<2&1023;L[5]=b&15;b>>>=4;L[6]=b&7;b>>>=
3;L[7]=b&7;b=g[f++]&255;C[0]=b&127;b>>>=7;b|=g[f++]<<1&511;G[0]=b&3;b>>>=2;u[0]=b&3;b>>>=2;b|=g[f++]<<5&8191;I[0]=b&63;b>>>=6;D[0]=b&7;b>>>=3;D[1]=b&7;b>>>=3;b|=g[f++]<<1&511;D[2]=b&7;b>>>=3;D[3]=b&7;b>>>=3;D[4]=b&7;b=g[f++]&255;D[5]=b&7;b>>>=3;D[6]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[7]=b&7;b>>>=3;D[8]=b&7;b>>>=3;D[9]=b&7;b>>>=3;b|=g[f++]<<1&511;D[10]=b&7;b>>>=3;D[11]=b&7;b>>>=3;D[12]=b&7;b=g[f++]&255;C[1]=b&127;b>>>=7;b|=g[f++]<<1&511;G[1]=b&3;b>>>=2;u[1]=b&3;b>>>=2;b|=g[f++]<<5&8191;I[1]=b&63;b>>>=
6;D[13]=b&7;b>>>=3;D[14]=b&7;b>>>=3;b|=g[f++]<<1&511;D[15]=b&7;b>>>=3;D[16]=b&7;b>>>=3;D[17]=b&7;b=g[f++]&255;D[18]=b&7;b>>>=3;D[19]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[20]=b&7;b>>>=3;D[21]=b&7;b>>>=3;D[22]=b&7;b>>>=3;b|=g[f++]<<1&511;D[23]=b&7;b>>>=3;D[24]=b&7;b>>>=3;D[25]=b&7;b=g[f++]&255;C[2]=b&127;b>>>=7;b|=g[f++]<<1&511;G[2]=b&3;b>>>=2;u[2]=b&3;b>>>=2;b|=g[f++]<<5&8191;I[2]=b&63;b>>>=6;D[26]=b&7;b>>>=3;D[27]=b&7;b>>>=3;b|=g[f++]<<1&511;D[28]=b&7;b>>>=3;D[29]=b&7;b>>>=3;D[30]=b&7;b=g[f++]&255;D[31]=
b&7;b>>>=3;D[32]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[33]=b&7;b>>>=3;D[34]=b&7;b>>>=3;D[35]=b&7;b>>>=3;b|=g[f++]<<1&511;D[36]=b&7;b>>>=3;D[37]=b&7;b>>>=3;D[38]=b&7;b=g[f++]&255;C[3]=b&127;b>>>=7;b|=g[f++]<<1&511;G[3]=b&3;b>>>=2;u[3]=b&3;b>>>=2;b|=g[f++]<<5&8191;I[3]=b&63;b>>>=6;D[39]=b&7;b>>>=3;D[40]=b&7;b>>>=3;b|=g[f++]<<1&511;D[41]=b&7;b>>>=3;D[42]=b&7;b>>>=3;D[43]=b&7;b=g[f++]&255;D[44]=b&7;b>>>=3;D[45]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[46]=b&7;b>>>=3;D[47]=b&7;b>>>=3;D[48]=b&7;b>>>=3;b|=g[f++]<<1&511;
D[49]=b&7;b>>>=3;D[50]=b&7;b>>>=3;D[51]=b&7;K(L,C,u,G,I,D,p,160);b=320*m++;for(t=0;320>t;t++)l[b++]=p[t]/32768}l.length=320*m;return l};var e=new Int32Array(160),n=new Int32Array(40),x=new Int32Array(8)};
