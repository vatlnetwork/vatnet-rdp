var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(p,C,D){if(null==p)throw new TypeError("The 'this' value for String.prototype."+D+" must not be null or undefined");if(C instanceof RegExp)throw new TypeError("First argument to String.prototype."+D+" must not be a regular expression");return p+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(p,C,D){if(p==Array.prototype||p==Object.prototype)return p;p[C]=D.value;return p};
$jscomp.getGlobal=function(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var C=0;C<p.length;++C){var D=p[C];if(D&&D.Math==Math)return D}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(p,C){var D=$jscomp.propertyToPolyfillSymbol[C];if(null==D)return p[C];D=p[D];return void 0!==D?D:p[C]};$jscomp.polyfill=function(p,C,D,G){C&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(p,C,D,G):$jscomp.polyfillUnisolated(p,C,D,G))};
$jscomp.polyfillUnisolated=function(p,C,D,G){D=$jscomp.global;p=p.split(".");for(G=0;G<p.length-1;G++){var F=p[G];if(!(F in D))return;D=D[F]}p=p[p.length-1];G=D[p];C=C(G);C!=G&&null!=C&&$jscomp.defineProperty(D,p,{configurable:!0,writable:!0,value:C})};
$jscomp.polyfillIsolated=function(p,C,D,G){var F=p.split(".");p=1===F.length;G=F[0];G=!p&&G in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var X=0;X<F.length-1;X++){var ia=F[X];if(!(ia in G))return;G=G[ia]}F=F[F.length-1];D=$jscomp.IS_SYMBOL_NATIVE&&"es6"===D?G[F]:null;C=C(D);null!=C&&(p?$jscomp.defineProperty($jscomp.polyfills,F,{configurable:!0,writable:!0,value:C}):C!==D&&($jscomp.propertyToPolyfillSymbol[F]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(F):$jscomp.POLYFILL_PREFIX+F,
F=$jscomp.propertyToPolyfillSymbol[F],$jscomp.defineProperty(G,F,{configurable:!0,writable:!0,value:C})))};$jscomp.polyfill("String.prototype.startsWith",function(p){return p?p:function(C,D){var G=$jscomp.checkStringArgs(this,C,"startsWith");C+="";var F=G.length,X=C.length;D=Math.max(0,Math.min(D|0,G.length));for(var ia=0;ia<X&&D<F;)if(G[D++]!=C[ia++])return!1;return ia>=X}},"es6","es3");$jscomp.arrayIteratorImpl=function(p){var C=0;return function(){return C<p.length?{done:!1,value:p[C++]}:{done:!0}}};
$jscomp.arrayIterator=function(p){return{next:$jscomp.arrayIteratorImpl(p)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(p){if(p)return p;var C=function(F,X){this.$jscomp$symbol$id_=F;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:X})};C.prototype.toString=function(){return this.$jscomp$symbol$id_};var D=0,G=function(F){if(this instanceof G)throw new TypeError("Symbol is not a constructor");return new C("jscomp_symbol_"+(F||"")+"_"+D++,F)};return G},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(p){if(p)return p;p=Symbol("Symbol.iterator");for(var C="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),D=0;D<C.length;D++){var G=$jscomp.global[C[D]];"function"===typeof G&&"function"!=typeof G.prototype[p]&&$jscomp.defineProperty(G.prototype,p,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return p},"es6",
"es3");$jscomp.iteratorPrototype=function(p){p={next:p};p[Symbol.iterator]=function(){return this};return p};$jscomp.iteratorFromArray=function(p,C){p instanceof String&&(p+="");var D=0,G=!1,F={next:function(){if(!G&&D<p.length){var X=D++;return{value:C(X,p[X]),done:!1}}G=!0;return{done:!0,value:void 0}}};F[Symbol.iterator]=function(){return F};return F};$jscomp.polyfill("Array.prototype.keys",function(p){return p?p:function(){return $jscomp.iteratorFromArray(this,function(C){return C})}},"es6","es3");
var svManager={getInstance:function(){var p=window.$vnc;return p&&p.running&&p.running()?p:null}};function connvertServer(p){var C={};C.id=p.id;C.server=p.id;C.displayName=p.displayName||p.id;if(p=p.vnc){for(var D in p)C[D]=p[D];C.pwd=p.password||""}return C}
svGlobal.Vnc=function(p,C,D,G){function F(a){return"on"==a||"true"==a||1==a}function X(a){k.loadbalanceToken||(N.randomAppId&&(a=hi5.tool.uuid()),k.loadbalanceToken=N.loadbalanceTokenName?N.loadbalanceTokenName+"="+a:"")}function ia(a,b){function c(g){!z&&g-H>q&&0<h.width&&(w.repaint(h.x,h.y,h.width,h.height),h.width=0,H=g);I=requestAnimationFrame(c)}var e=[],d=null,f=null,h=new hi5.graphic.Rectangle(0,0,0,0),n="Uint8ClampedArray"in window;this.width=a;this.height=b;var q=N.animation||62,v=null,z=
!1,w=this,A=null,H=0,I=0;this.pause=function(g){(z=g)?(window.OffscreenCanvas?v=new OffscreenCanvas(a,b):(v=document.createElement("canvas"),v.width=a,v.height=b),f=d,g=v.getContext("2d",{alpha:!1}),g.drawImage(d.canvas,0,0),w.setContext(g)):f&&(f.drawImage(d.canvas,0,0),w.setContext(f))};this.release=function(){cancelAnimationFrame(I);A=e=d=w=null};this.isPaused=function(){return z};this.setContext=function(g){g!=d&&(d||!g||g.createImageData(1,1).data.buffer||(n=!1),d=g,null!=d&&(A=d.createImageData(a,
b)))};this.getContext=function(){return d};this.resize=function(g,l){for(var m=0;m<l;m++)e[m]=new Uint32Array(g);w.width=a=g;w.height=b=l;null!=d&&(A=d.createImageData(a,b))};w.resize(a,b);this.getBuffer=function(){return e};this.setRGB=function(g,l,m){e[l][g]=m|4278190080};this.getRGB=function(g,l){return e[l][g]};this.setRGBs=function(g,l,m,r,t,x,u){var B=g+m;r=l+r;if(t.subarray)for(;l<r;l++,x+=u)e[l].set(t.subarray(x,x+m),g);else for(var P;l<r;l++,x+=u){var K=x;P=e[l];for(m=g;m<B;m++)P[m]=t[K++]}};
this.moveArea=function(g,l,m,r,t,x){if(0<x)for(t=g+t,x=l+x,--r;0<=r;r--)e[x+r].set(e[l+r].subarray(g,g+m),t);else if(0>x){t=g+t;x=l+x;for(var u=0;u<r;u++)e[x+u].set(e[l+u].subarray(g,g+m),t)}else if(0<t){t=g+t;x=l+x;u=e;var B;for(--m;0<=m;m--){var P=t+m;var K=g+m;for(B=0;B<r;B++)u[x+B][P]=u[l+B][K]}}else for(t=g+t,x=l+x,u=e,B=0;B<m;B++){K=t+B;var Z=g+B;for(P=0;P<r;P++)u[x+P][K]=u[l+P][Z]}};this.getRGBs=function(g,l,m,r){var t=_Uint32Array(m*r);t[0]=0;var x=e;m=g+m;r=l+r;for(var u=0,B=l;B<r;B++)for(l=
g;l<m;l++)t[u++]=x[B][l];return t};this.repaint=function(g,l,m,r){var t=A.data,x=0,u,B;0>g&&(m+=g,g=0);0>l&&(r+=l,l=0);g+m>a&&(m=a-g);l+r>b&&(r=b-l);var P=g+m;var K=l+r;if(n)for(t=new Uint32Array(t.buffer),B=l;B<K;B++)t.set(e[B].subarray(g,P),x),x+=a;else{var Z=4*(a-m)|0;for(B=l;B<K;B++){for(u=g;u<P;u++){var E=e[B][u];t[x++]=E&255;t[x++]=E>>8&255;t[x++]=E>>16&255;t[x++]=255}x+=Z}}d.putImageData(A,g,l,0,0,m,r)};this.postPaint=function(g,l,m,r){0<h.width?h.union(g,l,m,r):(h.x=g,h.y=l,h.width=m,h.height=
r)};this.commitPaint=function(){0<h.width&&(this.repaint(h.x,h.y,h.width,h.height),h.width=0)};this.startAnimation=function(){I=requestAnimationFrame(c)};this.fillRect=function(g,l,m,r,t){m=g+m;r=l+r;for(var x=l;x<r;x++)if(e[x].fill)e[x].fill(t,g,m);else{var u=e[x];for(l=g;l<m;l++)u[l]=t}}}function Ba(){var a=p.indexOf("://"),b=p.substring(a+3);a=b.indexOf("/");0<a&&(b=b.substring(0,a));return location.protocol+"//"+b}function L(a){U&&Q.send(a)}function eb(a){if(!wa)return"";a=hi5.browser.httpGet(Ba()+
"/CLIP?s="+wa+"&t="+Date.now(),!1);setTimeout(function(){Q.send("883")},999);return a}function Ca(){return y.displayName||y.server||y.symlink||y.id||"undefined"}function V(a,b,c){this.need=a;this.handler=b;this.repeat=c||1}function Qa(a){var b=0,c=0,e=new Uint8Array(a),d=this,f=new V(0,null,0);this.release=function(){d=e=f=null};this.getHandler=function(){return f};this.getData=function(){return e};this.getPosition=function(){return b};this.setPosition=function(h){b=h};this.getEnd=function(){return c};
this.set=function(h,n,q){e=h;b=n;c=q};this.handle=function(){f.handler(d,f)};this.setHandler=function(h){h&&1>h.need&&svGlobal.logger.warn("need < 1");(f=h)&&c-b>=h.need&&h.handler(d,h)};this.getByte=function(){return e[b++]};this.peekByte=function(){return e[b]};this.getBE32=function(){return e[b++]<<24|e[b++]<<16|e[b++]<<8|e[b++]};this.getBE16=function(){return e[b++]<<8|e[b++]};this.skip=function(h){b+=h};this.skipBack=function(h){b-=h};this.getBytes=function(h,n){if(n)for(var q=0;q<h;q++)n[q]=
e[b++];else return n=b,b+=h,e.subarray(n,b)};this.copyToByteArray=function(h,n,q,v){hi5.Arrays.arraycopy(e,q,h,n,v)};this.getString16LE=function(h,n){for(var q="";h<n;){var v=e[h++]|e[h++]<<8;q+=String.fromCharCode(v)}return q}}function Ra(){var a="";y&&F(y.connectif)&&y.symlink&&"sessionStorage"in window&&(a="SV_"+y.symlink,y.user&&(a+=y.user));return a}function fb(){var a=Ra(),b="";a&&(b=sessionStorage[a]||"")&&(b="&preSymJoin="+b);return b}function gb(){if(!U){if(xa)Q=xa,ra(y.width,y.height);else{var a=
hi5.tool.replaceQuery(p,"pwd","x")+fb();hi5.browser.binaryWS()&&(a+="&binary=on");var b=window.opener;if(b){var c=null;try{c=b.__sparkUser}catch(d){}c&&(b=c.account,c=c.session,b&&(a+="&account="+b),c&&(a+="&session="+c))}a=k.modifyURL(a+("&pasteCap="+(hi5.browser.isChrome&&hi5.browser.isDesktop?3:0)));(c=hi5.browser.cookie.get("__SV_TOKEN_A"))&&(a+="&__SV_TOKEN_A="+encodeURIComponent(c));Q=new WebSocket(a,"vnc");Q.binaryType="arraybuffer"}ja.ws=Q;Q.onopen=hb;var e=new hi5.DataBuffer([],0,0);Q.onmessage=
function(d){d=d.data;if("string"!=typeof d){var f=new Uint8Array(d);null!=da&&da.add(new RecordingObj(f,0,d.byteLength));switch(f[0]){case 48:O.set(f,2,f-2);O.handle();break;case 56:e.attach(f,2,f.length-2);Sa(e.getUnicodeString(e.getEnd()-e.getPosition(),!1));break;case 60:if(ya||za)switch(e.attach(f,2,f.length-2),e.getByte()){case 32:if(M&&!M.isPaused()){d=e.getLittleEndian16();f=e.getLittleEndian16();var h=e.getLittleEndian16();var n=e.getLittleEndian32(),q=k.sessionInfo.appInfo?k.sessionInfo.appInfo.sessions[n]:
null;J&&J.moveCursor(f,h,!0,q,n,d)}}break;case 62:e.attach(f,2,f.length-2);Da(e.getUnicodeString(e.getEnd()-e.getPosition(),!1));break;case 146:e.attach(f,2,f.length-2);switch(e.getByte()){case 0:d=new Uint8Array(2);d[0]=146;d[1]=1;L(d.buffer);break;case 1:ba&&ba.check();break;case 6:ja.remoteLockFlags=e.getLittleEndian32(),ja.checkLockFlags=!0}break;default:svGlobal.logger.warn("invalid type:"+f[0])}}else switch(h=parseInt(d.substring(0,2),16),f=d.substring(2),h){case 26:d=JSON.parse(f);if(d.name){svGlobal.logger.info("msg="+
f);if(k.onerror)k.onerror(d);f=__svi18n.errorCode["S"+d.name]||"";f+=d.message||d.msg;k.showMessage(f)}else 0<svGlobal.log&&console.erro("No error code for message:"+f);break;case 27:0!=N.drawLicense&&J.drawLicense(f);break;case 56:Sa(f);break;case 59:d=hi5.Base64.dec(f,0);Ea=d[3]<<24|d[2]<<16|d[1]<<8|d[0];Ea&64&&k.showMessage(__svi18n.info.recording);J.setFeature(Ea);break;case 61:d=JSON.parse(f);switch(d.type){case 0:ra(d.width,d.height);T=d.color/8|0;"ignoreCursor"in d&&(Fa=d.ignoreCursor);"trackCursorLocally"in
d&&(ya=d.trackCursorLocally,Ta(J));d.server&&(k.server=d.server,f=Ca(),k.setTitle&&(document.title=f));Ua=d.length;J&&J.setAutoScale(!0);if(k.onopened)k.onopened(d);break;case 1:d=d.duration;if(k.onprogress)k.onprogress(d,Ua);break;case 2:2==d.status?(Ga(),U=!0):(f=0==d.status,M.pause(f),aa=M.getContext(),d.warn&&k.showMessage(f?__svi18n.info.sessionPaused:__svi18n.info.sessionResumed))}break;case 62:Da(f);break;default:svGlobal.logger.warn("@TODO:"+d+"\n")}};Q.onclose=na;Q.onerror=ib}}function jb(a,
b){var c=0,e=!1;this.width=a;this.interval=b;var d=0;this.start=function(){e||(e=!0,c=setInterval(function(){if(J&&U){var f=J.getThumbnail(a);f&&f.length!=d&&(L("8E7"+f),d=f.length)}},b))};this.stop=function(){clearInterval(c)}}function kb(a,b){!Y||Y.width==a&&Y.interval==b||(Y.stop(),Y=null);Y||(Y=new jb(a,b));Y.start()}function lb(a){var b=N.page&&N.page.join||"";if(b.startsWith("http://")||b.startsWith("https://"))return b;if(b.startsWith("/"))return location.origin+b;var c=location.href,e=c.lastIndexOf("/");
if(b)return c.substring(0,e+1)+b;b=Ba();c.toLowerCase().startsWith(b.toLowerCase())&&(b=c.substring(0,e));return b+"/"+a}function Sa(a){var b=a.indexOf('"sessions":{,');0<b&&(b+=13,a=a.substring(0,b-1)+a.substring(b));a=JSON.parse(a);wa=a.session;X(a.appId);a.server||(a.server=Ca());if(b=hi5.$("joinSelect"))b.value=a.joinMode;if(b=hi5.$("requestControl"))b.disabled=a.hasControl;a.joined||za||(k.mode=0,O.setHandler(Ha),ka=new Ia);b=lb("joinvnc.html")+"?id="+a.numericId;b=k.modifyURL(b);var c=a.webAddress;
if(c&&0<c.length){var e=c.indexOf("://");c=c.substring(e+3);e=c.indexOf("/");0<e&&(c=c.substring(0,e));c.toLowerCase()!=location.host.toLowerCase()&&(b+="&gateway="+c)}a.joinLink=b;k.sessionInfo.appInfo=a;a.ver&&a.ver!=svGlobal.version&&svGlobal.logger.info("Client:"+svGlobal.version+" server:"+a.ver);if(k.onsessionstart)k.onsessionstart(k.sessionInfo)}function Ta(a){ya?Fa&&a.setCursor({system:"default",none:!1,result:"default"}):hi5.browser.isIE?a.setCursor({system:"none",none:!0,result:"none"}):
a.setCursor({result:"url(data:image/x-icon;base64,AAACAAEAICACAAAAAAAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAgAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAABQUFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAOAAAADgAAAA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8f////H////x////8=) 0 0, none"})}
function Va(a,b){var c=__svi18n.errorCode[a];c||(c="Error "+a,b&&(c+=", "+b));if(k.onerror)k.onerror({name:a,message:c});k.displayMsg&&k.showMessage(c);0<svGlobal.log&&console.error(c)}function hb(a){svGlobal.logger.info("opened...");U=!0;L("87"+navigator.userAgent);if(k.onopen)k.onopen()}function ib(a){svGlobal.logger.warn(a)}function na(a){if(k){svGlobal.logger.warn("closed ...");(a=Ra())&&k.sessionInfo.appInfo&&0==k.mode&&(sessionStorage[a]=k.sessionInfo.appInfo.session);O&&O.getHandler()&&O.getHandler().handler==
sa&&k.onautherror&&k.onautherror();oa=U=!1;ba&&(ba.stop(),ba=null);if(k&&k.onclose)k.onclose(Wa);try{null!=da&&(da.exit(),da=null),J&&(J.onclipdata=null,J.close(),J=null)}catch(b){}Xa=Ya=y=Ja=Za=W=R=p=null;Y&&(Y.stop(),Y=null);ea=xa=null;hi5.browser.isChromeApp?chrome.runtime.onSuspend.remvoeListener(na):window.removeEventListener("unload",na,!1);Q&&(Q.onopen=null,Q.onmessage=null,Q.onclose=null,Q=Q.onerror=null);O&&(O.release(),O=null);ca&&(ca.release(),ca=null);ka&&(ka.release(),ka=null);J=ja=Ka=
Ha=S=W=null;M&&(M.release(),M=null);aa=null;k&&(k=null);window&&window.$vnc&&(window.$vnc=null);null!=da&&(da.exit(),da=null)}}function La(){var a=new Uint8Array(2);a[0]=147;a[1]=void 0==y.share||F(y.share)?1:0;L(a.buffer);O.setHandler(new V(24,function(b){if(k.onloggedin)k.onloggedin();L("8D");if(U){var c=k.sessionInfo;c.width=la=b.getBE16();c.height=ma=b.getBE16();c.bpp=b.getByte();c.depth=b.getByte();c.bigEndian=0!=b.getByte();c.trueColor=0!=b.getByte();c.redMax=b.getBE16();c.greenMax=b.getBE16();
c.blueMax=b.getBE16();c.redShift=b.getByte();c.greenShift=b.getByte();c.blueShift=b.getByte();b.skip(3);for(var e=b.getBE32(),d="",f=0;f<e;f++)d+=String.fromCharCode(b.getByte());c.name=d;svGlobal.logger.info("server name:"+d);k.setTitle&&(document.title=d);ra(la,ma);b=[];if(y){c=y.encoding;8==y.color&&"Tight"==c&&(c="ZRLE");switch(c){case "Tight":b.push(7);b.push(16);b.push(5);b.push(0);break;case "Raw":b.push(0);b.push(16);b.push(7);b.push(5);b.push(0);16==y.color&&(y.color=32);break;case "Hextile":b.push(5);
b.push(16);b.push(7);b.push(0);16==y.color&&(y.color=32);break;default:b.push(16),b.push(7),b.push(5),b.push(0),16==y.color&&(y.color=32)}b.push(1);ya&&(b.push(4294967057),b.push(4294967064));N.vnc&&!1===N.vnc.qemuExtKey||b.push(4294967038);b.push(4294967035);"0"!=y.compression&&b.push(4294967040+parseInt(y.compression||6));"0"!=y.quality&&b.push(4294967264+parseInt(y.quality||5));b.push(4294967073);b.push(4294966988);c=b.length;e=new Uint8Array(5+4*c);e[0]=147;e[1]=2;e[3]=c>>8&255;e[4]=c&255;for(d=
0;d<c;d++)e[5+4*d]=b[d]>>24&255,e[6+4*d]=b[d]>>16&255,e[7+4*d]=b[d]>>8&255,e[8+4*d]=b[d]&255;L(e.buffer);b=parseInt(y.color);switch(b){case 32:Ma(32,24,!1,!0,255,255,255,0,8,16);break;case 16:Ma(16,16,!1,!0,31,63,31,11,5,0);break;case 8:Ma(8,8,!1,!0,7,7,3,0,3,6);break;default:svGlobal.logger.warn("invliad color depath:"+b)}T=b/8|0;ca&&ca.setBytesPerPixel(T);Na(0,0,la,ma,!1);O&&O.setHandler(Ka);oa=!0;void 0!=y.recording&&"on"==y.recording&&(b=y,da=new RecordingManager,da.setHeader({name:"rec",width:b.width,
height:b.height,color:b.server_bpp,namesuffix:".vncv",filetag:"VNCV",duration:0}));if(k&&(N.pingInterval&&k.startPing(N.pingInterval),k.onready))k.onready()}}}))}function sa(a){a=a.getBE32();svGlobal.logger.info("sec rst: "+a);var b={code:a,message:""};switch(a){case 0:La();return;case 1:b.message=__svi18n.vnc.authError;break;case 2:b.message="Too many failed authentication";break;default:b.message="Unknown auth error"+a}O.setHandler(null);k.onautherror&&k.onautherror(b)||(k.showMessage(b.message),
k.close())}function Ma(a,b,c,e,d,f,h,n,q,v){var z=new Uint8Array(21);z[0]=147;z[1]=0;z[5]=a;z[6]=b;z[7]=c?1:0;z[8]=e?1:0;z[9]=d>>8&255;z[10]=d&255;z[11]=f>>8&255;z[12]=f&255;z[13]=h>>8&255;z[14]=h&255;z[15]=n;z[16]=q;z[17]=v;L(z.buffer)}function Na(a,b,c,e,d){var f=new Uint8Array(11);f[0]=147;f[1]=3;f[2]=d?1:0;f[3]=a>>8&255;f[4]=a&255;f[5]=b>>8&255;f[6]=b&255;f[7]=c>>8&255;f[8]=c&255;f[9]=e>>8&255;f[10]=e&255;L(f.buffer)}function Ia(){var a=new TINF;a.init(2==k.mode?120:0);var b=new Qa(0),c=new Uint32Array(4096),
e=new Uint32Array(128);this.release=function(){e=c=null;a.release();a=null;b.release();b=null};this.getHistory=function(){var d=[90],f=a.getHistory().length,h=f&255;d.push(f>>8&255);d.push(h);return d=d.concat(a.getHistory())};this.setHistory=function(d){a.setHistory(d)};this.decode=function(d,f,h,n,q,v){var z=d.getBE32();d=d.getBytes(z);d=a.uncompress(d,0);var w;b.set(d.dest,0,d.destIndex);var A=e,H=b.getByte,I=c;2==T&&(T=4);for(d=h;d<h+q;d+=64){var g=Math.min(h+q-d,64);for(z=f;z<f+n;z+=64){var l=
Math.min(f+n-z,64);var m=H();var r=0!=(m&128);m&=127;if(1==T)for(w=0;w<m;w++)A[w]=ea[H()];else for(w=0;w<m;w++)A[w]=H()|H()<<8|H()<<16|4278190080;if(1!=m||v){if(r)if(0==m)for(r=0,w=r+l*g;r<w;){var t=1==T?ea[H()]:H()|H()<<8|H()<<16|4278190080;var x=1;do m=H(),x+=m;while(255==m);if(I.fill)I.fill(t,r,r+x),r+=x;else for(;0<x--;)I[r++]=t}else for(r=0,w=r+l*g;r<w;){t=H();x=1;if(0!=(t&128)){do m=H(),x+=m;while(255==m)}t&=127;t=A[t];if(I.fill)I.fill(t,r,r+x),r+=x;else for(;0<x--;)I[r++]=t}else if(r=l*g,0==
m)if(1==T)for(w=0;w<r;w++)I[w]=ea[H()];else for(w=0;w<r;w++)I[w]=H()|H()<<8|H()<<16|4278190080;else for(x=16<m?8:4<m?4:2<m?2:1,w=r=0;w<g;w++){t=r+l;for(var u=m=0;r<t;)0==u&&(m=H(),u=8),u-=x,I[r++]=A[m>>u&(1<<x)-1&127]}v||M.setRGBs(z,d,l,g,I,0,l)}else M.fillRect(z,d,l,g,A[0])}}v||M.postPaint(f,h,n,q)}}function $a(){function a(g,l,m,r,t){this.draw=function(){aa.fillStyle=t;aa.fillRect(g,l,m,r)};this.type=0;this.ready=function(){return!0}}function b(g,l,m){this.draw=function(){aa.putImageData(m,g,l)};
this.type=1;this.ready=function(){return!0}}function c(g,l,m){this.draw=function(){aa.drawImage(m,g,l);URL.revokeObjectURL(m.src)};this.type=2;this.ready=function(){return!!m.src&&m.complete};this.image=m}function e(g,l,m,r){var t=null;m=new Blob([m],{type:"image/jpeg"});var x=!1;this.draw=function(){t&&(aa.drawImage(t,g,l),t.close())};this.type=3;this.ready=function(){return x};createImageBitmap(m).then(function(u){t=u;x=!0;r()}).catch(function(u){x=!0;svGlobal.logger.warn("Failed to load JPEG:"+
u)})}function d(){var g=v[n];g||(g=new TINF,g.init(2==k.mode?120:0),v[n]=g);return g}function f(g){var l=g.getByte(),m=l&127;l&128&&(l=g.getByte(),m|=(l&127)<<7,l&128&&(m|=g.getByte()<<14));return m}function h(g){var l=g>>8&248,m=g>>3&252;g=g<<3&255;return l|l>>5|(m|m>>6)<<8|(g|g>>5)<<16|4278190080}var n=0,q=3,v={},z={data:[0],length:0},w=Array(256);w[0]=0;this.inUse=!1;var A=this,H=!!window.createImageBitmap;this.setBytesPerPixel=function(g){q=3<g?3:g};var I=new function(){function g(){for(;0<l.length;){var m=
l[0];if(!m.ready())break;m.draw();l.shift()}}var l=[];this.check=g;this.push=function(m){l.push(m);2==m.type?m.image.onload=g:g()};this.release=function(){l=[]}};this.release=function(){I.release();v=z=w=A=I=null};this.getHistory=function(){var g=[84],l=Object.keys(v).length;g.push(l);for(var m in v)if(v.hasOwnProperty(m)){g.push(parseInt(m));l=v[m].getHistory();var r=l.length,t=r&255;g.push(r>>8&255);g.push(t);g=g.concat(l)}return g};this.setHistory=function(g){for(var l=0,m=g[l++],r=0;r<m;r++){var t=
g[l++],x=g[l++],u=g[l++];u=(x&255)<<8|u&255;x=g.slice(l,l+u);l+=u;u=v[t];u||(u=new TINF,u.init(2==k.mode?120:0),v[t]=u);u.setHistory(x)}};this.drawImageData=function(g,l,m){I.push(new b(l,m,g))};this.decode=function(g,l,m,r,t,x){A.inUse||(A.inUse=!0);var u=g.getByte();switch(u>>4){case 8:if(x)g.skip(q);else{x=I;u=x.push;if(3==q)g="rgb("+g.getByte()+","+g.getByte()+","+g.getByte()+")";else{var B=g.getByte()|g.getByte()<<8;g=B>>8&248;var P=B>>3&252;B=B<<3&255;g="rgb("+(g|g>>5)+","+(P|P>>6)+","+(B|B>>
5)+")"}u.call(x,new a(l,m,r,t,g))}break;case 9:u=f(g);x?g.skip(u):H?I.push(new e(l,m,g.getBytes(u),I.check)):(r=g.getBytes(u),r=new Blob([r],{type:"image/jpeg"}),r=URL.createObjectURL(r),t=new Image,I.push(new c(l,m,t)),t.src=r);break;default:if(n=(u&48)>>4,u=u&64?g.getByte():0,1==u){u=g.getByte;var K=u()+1,Z=2!=K?r*t:t*((r+7)/8|0),E=0;if(3==q)for(;E<K;E++)w[E]=u()|u()<<8|u()<<16|4278190080;else for(;E<K;E++)w[E]=h(u()|u()<<8);12>Z?(z.data=g.getBytes(Z),z.length=Z):(u=f(g),g=d().uncompress(g.getBytes(u),
0),z.data=g.dest,z.length=g.destIndex);u=z.data;P=aa.createImageData(r,t);if("Uint8ClampedArray"in window)if(B=new Uint32Array(P.data.buffer),2!=K)for(E=0;E<Z;E++)B[E]=w[u[E]];else{g=0;Z=(r+7)/8|0;for(var ta,pa=0;pa<t;pa++){ta=pa*Z;for(var ha=0;ha<(r/8|0);ha++)for(K=u[ta+ha],E=7;0<=E;E--)B[g++]=w[K>>E&1];K=8-r%8;for(E=7;E>=K;E--)B[g++]=w[u[ta+ha]>>E&1]}}else if(B=P.data,g=0,2!=K)for(E=0;E<Z;E++)K=w[u[E]],B[g++]=K&255,B[g++]=K>>8&255,B[g++]=K>>16&255,B[g++]=255;else for(g=0,Z=(r+7)/8|0,pa=0;pa<t;pa++){ta=
pa*Z;for(ha=0;ha<(r/8|0);ha++)for(K=u[ta+ha],E=7;0<=E;E--){var qa=w[K>>E&1];B[g++]=qa&255;B[g++]=qa>>8&255;B[g++]=qa>>16&255;B[g++]=255}K=8-r%8;for(E=7;E>=K;E--)qa=w[u[ta+ha]>>E&1],B[g++]=qa&255,B[g++]=qa>>8&255,B[g++]=qa>>16&255,B[g++]=255}x||I.push(new b(l,m,P))}else if(0==u){u=r*t*q;11<u&&(u=f(g));K=r*t;P=K*q;u=11<P?d().uncompress(g.getBytes(u),0).dest:g.getBytes(P);P=aa.createImageData(r,t);B=P.data;r=g=0;if(3==q)for(E=0;E<K;E++)B[g++]=u[r++],B[g++]=u[r++],B[g++]=u[r++],B[g++]=255;else for(E=
0;E<K;E++)t=h(u[r++]|u[r++]<<8),B[g++]=t&255,B[g++]=t>>8&255,B[g++]=t>>16&255,B[g++]=255;x||I.push(new b(l,m,P))}else svGlobal.logger.info("xx filter:"+u)}}}function Da(a){var b=parseInt(a.substring(0,1),16),c=a.substring(1),e=!1;var d=k.sessionInfo.appInfo;switch(b){case 0:var f=JSON.parse(c);Ga();U=!0;e=f.width;d=f.height;if(e==la&&d==ma)break;ra(e,d);break;case 1:k.reconnectOnResize=!1;f=JSON.parse(c);d.sessions[f.numericId]=f.name||f.__ip;k.onsessionjoin&&(e=k.onsessionjoin(f));if(e)break;k.showMessage(__svi18n.info.joinsession.applyArgs([f.numericId,
f.__ip,f.name]));break;case 2:f=JSON.parse(c);delete d.sessions[f.numericId];k.onsessionexit&&(e=k.onsessionexit(f));if(e)break;k.showMessage(__svi18n.info.exitsession.applyArgs([f.numericId,f.__ip,f.name]));break;case 3:f=JSON.parse(c);d.joinMode!=f.mode&&(d.joinMode=f.mode,a=hi5.$("joinSelect"))&&(a.value=f.mode);if(d.hasControl)break;J.setReadOnly(!1,2==f.mode);if(d=hi5.$("requestControl"))d.disabled=!0;k.ongivecontrol&&(e=k.ongivecontrol());if(e)break;k.showMessage(__svi18n.info.givecontrol);
break;case 4:f=JSON.parse(c);J.setReadOnly(!0,2==f.mode);d.hasControl=!1;if(d=hi5.$("requestControl"))d.disabled=!1;k.ontakebackcontrol&&(e=k.ontakebackcontrol());if(e)break;k.showMessage(__svi18n.info.nocontrol);break;case 5:f=JSON.parse(c);k.onrequirecontrol&&(e=k.onrequirecontrol(f));if(e)break;e=__svi18n.info.title.applyArgs([f.name,f.numericId,f.__ip]);k.showMessage({title:e,msg:__svi18n.info.recontrol,cbYes:function(){k.giveControl(f.numericId);this.destroy()},cbNo:function(){k.refuseControl(f.numericId);
this.destroy()}});break;case 9:f=JSON.parse(c);0<f.interval&&0<f.width?kb(f.width,f.interval):Y&&(Y.stop(),Y=null);break;case 10:if(1==a.length)L("8E8"+hi5.Base64.enc(mb()));else if(nb(hi5.Base64.dec(a.substring(1),0)),k.refreshOutput(),oa=!0,k.onloggedin)k.onloggedin();ba&&ba.check(15555);break;case 11:f=JSON.parse(c),k.onrequirejoin&&(e=k.onrequirejoin(f)),e||(e=__svi18n.info.title.applyArgs([f.name,f.numericId,f.__ip]),k.showMessage({title:e,msg:__svi18n.info.reqjoin,cbYes:function(){k.allowJoin(f.numericId,
!0);this.destroy()},cbNo:function(){k.allowJoin(f.numericId,!1);this.destroy()}}))}}function mb(){var a=ka.getHistory(),b=ca.getHistory();return a.concat(b)}function nb(a){var b=0,c=a[b++];if(90==c){c=a[b++];var e=a[b++];if(c=(c&255)<<8|e&255)ka.setHistory(a.slice(b,b+c)),b+=c}c=a[b++];84==c&&ca.setHistory(a.slice(b))}function ob(a){if(!k.openLink)return!1;var b=a;a=a.toLowerCase();var c=0==a.indexOf("http://")||0==a.indexOf("https://")||0==a.indexOf("ftp://")||0==a.indexOf("mailto:")||0==a.indexOf("tel:")||
0==a.indexOf("callto:");c||(0==a.indexOf("www.")?(c=!0,a="http://"+a):0==a.indexOf("ftp.")&&(c=!0,a="ftp://"+a));if(c){if(0<a.indexOf("\r")||0<a.indexOf("\n"))return!1;if(k.onurlredirection&&k.onurlredirection(c))return!0;J.processLink(b);return!0}return!1}function pb(a,b,c,e,d,f,h,n,q){this.cache_idx=a;this.rawData=b;this.none=!b;this.hotX=c;this.hotY=e;this.width=d;this.height=f;this.xorSize=n;this.andSize=q;this.result="";this.distance=0;this.bpp=h;this.system="";this.init=function(){if(this.distance){var w=
0;if(b)for(var A=0,H=b.length;A<H;A++)0!=b[A]&&(w+=A%d+(A/d|0));this.distance=w}this.system||(w=507==this.distance?"text":"",this.system=w)};a="";if(!this.system&&b){var v=d*f*4;h=62+v+n+q;var z=new Uint8Array(h);h=new hi5.DataBuffer(z,0,h);h.setLittleEndian16(0);h.setLittleEndian16(2);h.setLittleEndian16(1);h.setByte(d);h.setByte(f);h.setByte(0);h.setByte(0);h.setLittleEndian16(c);h.setLittleEndian16(e);h.setLittleEndian32(40+v+n+q);h.setLittleEndian32(22);h.setLittleEndian32(40);h.setLittleEndian32(d);
h.setLittleEndian32(2*f);h.setLittleEndian16(1);h.setLittleEndian16(32);h.setLittleEndian32(0);h.setLittleEndian32(n+q);h.setLittleEndian32(0);h.setLittleEndian32(0);h.setLittleEndian32(0);h.setLittleEndian32(0);for(c=f-1;0<=c;c--)for(e=0;e<d;e++)f=b[d*c+e],h.setByte(f&255),h.setByte(f>>8&255),h.setByte(f>>16&255),h.setByte(f>>24&255);hi5.browser.isIE||(a="data:image/x-icon;base64,"+hi5.Base64.enc(h.getData()))}this.url=a}function ab(a,b,c,e,d){var f=null,h=e*d,n=0,q=a.getPosition(),v=a.getData();
if(ca.inUse){d=aa.createImageData(e,d);if(4==T){if("Uint8ClampedArray"in window)for(e=new Uint32Array(d.data.buffer),n=0;n<h;n++)e[n]=v[q++]<<16|v[q++]<<8|v[q++]|4278190080,q++;else for(e=d.data,f=4*h;n<f;)e[n++]=v[q+2],e[n++]=v[q+1],e[n++]=v[q],e[n++]=255,q+=4;a.skip(4*h)}else if(1==T){if("Uint8ClampedArray"in window)for(e=new Uint32Array(d.data.buffer),n=0;n<h;n++)e[n]=ea[v[q++]];else{e=d.data;f=4*h;for(var z;n<f;)z=ea[v[q++]],e[n++]=z&255,e[n++]=z>>8&255,e[n++]=z>>16&255,e[n++]=255}a.skip(h)}ca.drawImageData(d,
b,c)}else{switch(T){case 4:if(0==q%4){q+=3;for(n=0;n<h;n++)v[q]=255,q+=4;f=new Uint32Array(a.getData().buffer,a.getPosition(),h)}else for(f=new Uint32Array(h),n=0;n<h;n++)f[n]=v[q++]|v[q++]<<8|v[q++]<<16|4278190080,q++;a.skip(4*h);break;case 1:f=new Uint32Array(h);for(n=0;n<h;n++)f[n]=ea[v[q++]];a.skip(h)}M.setRGBs(b,c,e,d,f,0,e);M.postPaint(b,c,e,d)}}function ra(a,b){if(a&&b){if(la=a,ma=b,y.width=a,y.height=b,M.resize(a,b),J&&J.setSize(a,b),k.onresolutionchange)k.onresolutionchange(a,b)}else Va("C_1",
"Invalid monitor size, width:"+a+" h:"+b)}function bb(a,b){if(Oa){var c=new Int8Array(25);c[0]=147;c[1]=251;c[2]=0;c[3]=a>>8;c[4]=a;c[5]=b>>8;c[6]=b;c[7]=1;c[8]=0;c[9]=ua>>24;c[10]=ua>>16;c[11]=ua>>8;c[12]=ua;c[13]=0;c[14]=0;c[15]=0;c[16]=0;c[17]=a>>8;c[18]=a;c[19]=b>>8;c[20]=b;c[21]=va>>24;c[22]=va>>16;c[23]=va>>8;c[24]=va;L(c.buffer)}}function qb(a){if(oa&&a&&(a=a.getData("text/plain"))){var b=a.length,c=new Int8Array(9+b);c[0]=147;c[1]=6;c[5]=b>>24&255;c[6]=b>>16&255;c[7]=b>>8&255;c[8]=b&255;for(var e=
0;e<b;e++)c[9+e]=a.charCodeAt(e);L(c.buffer)}}function Ga(){U=!1;ca=new $a;ka=new Ia}function Pa(a,b,c,e){oa&&(cb=a,(a?1<<b:0)!=W[1]||c!=(W[2]<<8|W[3])||e!=(W[4]<<8|W[5]))&&(W[2]=a?1<<b:0,W[3]=c>>8&255,W[4]=c&255,W[5]=e>>8&255,W[6]=e&255,L(W.buffer))}function fa(a,b,c){if(Aa){if(1>c||170==c)return}else if(1>b)return;R[2]=a?1:0;R[5]=b>>24;R[6]=b>>16;R[7]=b>>8;R[8]=b;183==c?c=84:197==c&&(c=198);Aa&&(R[2]=0,R[3]=0,R[4]=a?1:0,R[9]=c>>24,R[10]=c>>16,R[11]=c>>8,R[12]=c);L(R.buffer);if(k.onkey)k.onkey(a,
b,c)}function db(a,b){var c=Za[b.toLowerCase()];c?k.writeScancode(a,c):(c=b.length,0!=c&&(1==c?k.writeKeyCode(a,b.toUpperCase().charCodeAt(0)):a&&k.writeText(b)))}this.displayMsg=!0;this.reconnectTimes=0;this.setTitle=this.openLink=!0;this.mode=0;this.CAP_QEMU_KEY=1;var xa="object"==typeof p?p:null,za="object"==typeof p||0<p.indexOf("/PLAY?");za?(this.mode=1,xa&&(p=""),p+="&touchpad=on"):0<p.indexOf("/JOIN?")&&(this.mode=2,this.reconnectOnResize=!1);hi5.appcfg||(hi5.appcfg={img:{},toolbar:{fadable:!0},
displayMsg:!0});var N=hi5.appcfg,y=hi5.tool.queryToObj(p.substring(p.indexOf("?")+1)),ba=null,Wa=!1,wa="",Aa=!1;!y.width&&C&&(y.width=C,p+="&width="+C);!y.wHeight&&D&&(y.height=D,p+="&height="+D);!y.color&&G&&(y.color=G,p+="&color="+G);y.color||(y.color=32);var Fa=void 0==y.ignoreCursor||F(y.ignoreCursor),ya=void 0==y.trackCursorLocally||F(y.trackCursorLocally),k=this;this.server=y.server;this.port=parseInt(y.port,10);this.loadbalanceToken="";N.loadbalanceTokenName&&y[N.loadbalanceTokenName]&&X(y[N.loadbalanceTokenName]);
this.sessionInfo={major:0,minor:0,width:0,height:0,bpp:0,bigEndian:!0,trueColor:!0};this.modifyURL=function(a){k.loadbalanceToken&&(a+="&"+k.loadbalanceToken);return a};var J=null,U=!1,oa=!1,Ea=0,Oa=!1,ua=0,va=0,da=null;window.$vnc=this;var O=new Qa(4194304);this.setLinks=function(a){};this.running=function(){return U};var Q=null,T=4,la=1024,ma=768,ea=[-16777216,-16777180,-16777143,-16777107,-16777070,-16777034,-16776997,-16776961,-16768E3,-16767964,-16767927,-16767891,-16767854,-16767818,-16767781,
-16767745,-16758528,-16758492,-16758455,-16758419,-16758382,-16758346,-16758309,-16758273,-16749312,-16749276,-16749239,-16749203,-16749166,-16749130,-16749093,-16749057,-16739840,-16739804,-16739767,-16739731,-16739694,-16739658,-16739621,-16739585,-16730624,-16730588,-16730551,-16730515,-16730478,-16730442,-16730405,-16730369,-16721152,-16721116,-16721079,-16721043,-16721006,-16720970,-16720933,-16720897,-16711936,-16711900,-16711863,-16711827,-16711790,-16711754,-16711717,-16711681,-11206656,-11206620,
-11206583,-11206547,-11206510,-11206474,-11206437,-11206401,-11197440,-11197404,-11197367,-11197331,-11197294,-11197258,-11197221,-11197185,-11187968,-11187932,-11187895,-11187859,-11187822,-11187786,-11187749,-11187713,-11178752,-11178716,-11178679,-11178643,-11178606,-11178570,-11178533,-11178497,-11169280,-11169244,-11169207,-11169171,-11169134,-11169098,-11169061,-11169025,-11160064,-11160028,-11159991,-11159955,-11159918,-11159882,-11159845,-11159809,-11150592,-11150556,-11150519,-11150483,-11150446,
-11150410,-11150373,-11150337,-11141376,-11141340,-11141303,-11141267,-11141230,-11141194,-11141157,-11141121,-5636096,-5636060,-5636023,-5635987,-5635950,-5635914,-5635877,-5635841,-5626880,-5626844,-5626807,-5626771,-5626734,-5626698,-5626661,-5626625,-5617408,-5617372,-5617335,-5617299,-5617262,-5617226,-5617189,-5617153,-5608192,-5608156,-5608119,-5608083,-5608046,-5608010,-5607973,-5607937,-5598720,-5598684,-5598647,-5598611,-5598574,-5598538,-5598501,-5598465,-5589504,-5589468,-5589431,-5589395,
-5589358,-5589322,-5589285,-5589249,-5580032,-5579996,-5579959,-5579923,-5579886,-5579850,-5579813,-5579777,-5570816,-5570780,-5570743,-5570707,-5570670,-5570634,-5570597,-5570561,-65536,-65500,-65463,-65427,-65390,-65354,-65317,-65281,-56320,-56284,-56247,-56211,-56174,-56138,-56101,-56065,-46848,-46812,-46775,-46739,-46702,-46666,-46629,-46593,-37632,-37596,-37559,-37523,-37486,-37450,-37413,-37377,-28160,-28124,-28087,-28051,-28014,-27978,-27941,-27905,-18944,-18908,-18871,-18835,-18798,-18762,
-18725,-18689,-9472,-9436,-9399,-9363,-9326,-9290,-9253,-9217,-256,-220,-183,-147,-110,-74,-37,-1],M;M?M.resize(1024,768):M=new ia(1024,768);var aa=M.getContext();this.getDesktop=function(){return M};this.writeKeyComb=function(a){a=a.split("+");var b=a.length;if(0!=b){for(var c=null,e=0;e<b;e++){var d=a[e];""==d&&""==c&&(d="Add");""!=d&&db(!0,d);c=d}for(e=b-1;0<=e;e--)d=a[e],""==d&&""==c&&(d="Add"),""!=d&&db(!1,d),c=d}};var ja=new function(){this.ws=null;this.capsLock=this.numLock=!1;this.setJoinMode=
k.setJoinMode;this.requestControl=k.requestControl;this.writeKeyComb=k.writeKeyComb;this.remoteLockFlags=this.localLockFlags=0;this.checkLockFlags=!0;this.getAppMode=function(){return k.mode};this.send=function(a){U&&this.ws.send(a)};this.sendInput=function(a){k.writeRawInput(a);if(k.onactivity)k.onactivity(a)};this.getAppInfo=function(){return k.sessionInfo.appInfo};this.onresize=function(a){(a=a.target.svSurface)?(a=a.getFreeSpace(),setTimeout(bb(a.width,a.height),500)):console.warn("==== no surface for browser resizing")};
this.onorientationchange=function(a){};this.getClipData=eb;this.onfocus=function(a){};this.fileCallback=[];this.getShareFiles=function(a,b){this.ws.send("3A5"+a);this.fileCallback.push(b)};this.notifyFiles=function(a){for(var b=this.fileCallback,c=0,e=b.length;c<e;c++)b[c](a)};this.getFile=function(a){window.open(k.getFileUrl(a))};this.removeFile=function(a){uploadMgr&&uploadMgr.fileService.remove(a)};this.getFileLink=function(a){return Ba()+"/DOWNLOAD?s="+wa+"&f="+a};this.getGateway=function(){return p};
this.reconnect=function(a,b,c){};this.sendKeyboardSyncFlags=function(a){if(U){var b=this.remoteLockFlags;(b&7)!=a&&((b&4)!=(a&4)&&(fa(!0,65549,58),fa(!1,65549,58)),(b&2)!=(a&2)&&(fa(!0,65407,69),fa(!1,65407,69)),(b&1)!=(a&1)&&(fa(!0,65300,70),fa(!1,65300,70)));this.remoteLockFlags=this.localLockFlags=a;return!0}return!1}};void 0!=N.displayMsg?this.displayMsg=N.displayMsg:N.displayMsg=this.displayMsg;void 0!=N.reconnectTimes&&(this.reconnectTimes=N.reconnectTimes);void 0!=N.openLink&&(this.openLink=
N.openLink);void 0!=N.setTitle&&(this.setTitle=N.setTitle);"boolean"==typeof N.useWSS&&(p=(N.useWSS?"wss":"ws")+p.substring(p.indexOf("://")));this.getURL=function(){return p};var rb=parseInt(y.server_bpp||y.color||24);this.getColor=function(){return rb};this.getDisplayName=Ca;this.sendPing=function(a){var b=new Uint8Array(a?2+a.length:2);b[0]=146;b[1]=0;a&&b.set(a,2);L(b.buffer)};this.startPing=function(a,b){b=b||0;ba||(ba=new hi5.tool.ResponseMonitor(function(){k.sendPing()},function(){if(U&&k.onnoresponse)return k.onnoresponse()}));
ba.setInterval(a,b);var c=new Uint8Array(4);c[0]=146;c[1]=2;c[2]=a;c[3]=b;L(c.buffer);k.sendPing()};this.stopPing=function(){ba&&ba.stop()};var Y=null;this.setJoinMode=function(a){L("8E1"+a)};this.refuseControl=function(a){L("8E3"+a)};this.giveControl=function(a){L("8E4"+a)};this.requestControl=function(){L("8E2")};this.allowJoin=function(a,b){L("8EA"+a+"\t"+(b?1:0))};this.play=function(){L("F3")};this.pause=function(){L("F2")};this.scan=function(a){L("F4"+(a?"1":"0"))};this.seek=function(a){J&&U&&
(L("F4"+(a?"1":"0")+"\t"+(a/J.getScale().x|0)),M.pause(!0))};var Ua=0;this.run=function(){gb();M.startAnimation()};this.hide=function(){J&&J.hide()};this.showMessage=function(a,b){k.displayMsg&&a&&(J?J.showMessage(a,b):("string"==typeof a&&(a={msg:a,timeout:b||0}),hi5.notifications.notify(a)))};this.close=function(){Wa=!0;if(Q&&U)try{for(;Q&&Q.readyState!=WebSocket.CLOSING&&Q.readyState!=WebSocket.CLOSED;)L("85"),Q.close()}finally{na()}else na()};hi5.browser.isChromeApp?chrome.runtime.onSuspend.addListener(na):
window.addEventListener("unload",na,!1);var Ha=new V(12,function(a){if(82!=a.getByte()||70!=a.getByte()||66!=a.getByte())k.showMessage(__svi18n.vnc.notvnc),k.close();else if(a.skip(1),k.sessionInfo.major=100*(a.getByte()-48)+10*(a.getByte()-48)+(a.getByte()-48),a.skip(1),k.sessionInfo.minor=100*(a.getByte()-48)+10*(a.getByte()-48)+(a.getByte()-48),svGlobal.logger.info("RFB major: "+k.sessionInfo.major+" minor: "+k.sessionInfo.minor),a.skip(1),3==k.sessionInfo.major&&7<=k.sessionInfo.minor){a="\u0093RFB 003.007\n";
for(var b=new Uint8Array(13),c=0;13>c;c++)b[c]=a.charCodeAt(c);L(b.buffer);O.setHandler(new V(1,function(e){e=e.getByte();console.log("==== secType received = "+e);switch(e){case 1:La();break;case 2:O.setHandler(new V(16,function(q){svGlobal.logger.info("vnc auth");var v=new Uint8Array(17);v[0]=32;q.copyToByteArray(v,1,q.getPosition(),16);q.skip(16);q=y.pwd||"";8<q.length&&(q=q.substring(0,8));var z=[0,0,0,0,0,0,0,0],w=q.length;for(c=0;c<w;c++)z[c]=q.charCodeAt(c);q=new DesCipher(z);q.encrypt(v,1,
v,1);q.encrypt(v,9,v,9);Q.send(v.buffer);O.setHandler(new V(4,sa))}));break;case 113:O.setHandler(new V(24,function(q){svGlobal.logger.info("NTLM auth");var v=new Uint8Array(345);v[0]=33;q.copyToByteArray(v,1,q.getPosition(),24);q.skip(24);q=y.user;var z=25,w=q.length;if(q)for(c=0;c<w;c++){var A=q.charCodeAt(c);v[z++]=A&255;v[z++]=A>>8&255}if(178<w)k.showMessage("User name is too long: > 178"),k.close();else{z=281;if(q=y.pwd){w=q.length;if(32<w){k.showMessage("Password is too long: > 32");k.close();
return}for(c=0;c<w;c++)A=q.charCodeAt(c),v[z++]=A&255,v[z++]=A>>8&255}Q.send(v.buffer);O.setHandler(new V(4,sa))}}));break;case 19:break;case 30:svGlobal.logger.info("Apple auth");e=new Uint8Array(321);e[0]=34;var d=y.user,f=0,h=1,n=d.length;if(d){if(178<n){k.showMessage("User name is too long: > 178");k.close();break}for(c=0;c<n;c++)f=d.charCodeAt(c),e[h++]=f&255,e[h++]=f>>8&255}h=257;if(d=y.pwd){n=d.length;if(32<n){k.showMessage("Password is too long: > 32");k.close();break}for(c=0;c<n;c++)f=d.charCodeAt(c),
e[h++]=f&255,e[h++]=f>>8&255}Q.send(e.buffer);O.setHandler(new V(4,sa));break;default:k.showMessage(__svi18n.vnc.securityError),k.close()}}))}else{a="\u0093RFB 003.003\n";b=new Uint8Array(13);for(c=0;13>c;c++)b[c]=a.charCodeAt(c);L(b.buffer);O.setHandler(new V(4,function(e){e=e.getBE32();var d=0,f=0;svGlobal.logger.info("sec type:"+e);switch(e){case 1:La();break;case 2:O.setHandler(new V(12,function(h){svGlobal.logger.info("vnc auth");var n=new Uint8Array(17);n[0]=32;h.copyToByteArray(n,1,h.getPosition(),
16);h.skip(16);h=y.pwd||"";8<h.length&&(h=h.substring(0,8));var q=[0,0,0,0,0,0,0,0];d=0;for(f=h.length;d<f;d++)q[d]=h.charCodeAt(d);h=new DesCipher(q);h.encrypt(n,1,n,1);h.encrypt(n,9,n,9);L(n.buffer);O.setHandler(new V(4,sa))}));break;case -6:O.setHandler(new V(24,function(h){svGlobal.logger.info("NTLM auth");var n=new Uint8Array(345);n[0]=33;h.copyToByteArray(n,1,h.getPosition(),24);h.skip(24);h=y.user;var q=25;if(h)for(d=0,f=h.length;d<f;d++){var v=h.charCodeAt(d);n[q++]=v&255;n[q++]=v>>8&255}q=
281;if(h=y.pwd)for(d=0,f=h.length;d<f;d++)v=h.charCodeAt(d),n[q++]=v&255,n[q++]=v>>8&255;L(n.buffer);O.setHandler(new V(4,sa))}));break;default:k.showMessage(__svi18n.vnc.securityError),k.close()}}))}});O.setHandler(Ha);this.refreshOutput=function(a,b,c,e){a=a||0;b=b||0;Na(a,b,c?c-a+1:la,e?e-b+1:ma,!1)};var Ka=new V(1,function(a){var b=a.getByte();switch(b){case 0:a.skip(1);b=a.getBE16();for(var c=0;c<b;c++){var e=a.getBE16();var d=a.getBE16();var f=a.getBE16();var h=a.getBE16();var n=a.getBE32()>>>
0;switch(n){case 4294967073:ra(f,h);break;case 4294966988:n=a;var q=n.getByte();n.skip(3);Oa||(Oa=!0,f=Math.floor(window.innerWidth),h=Math.floor(window.innerHeight),bb(f,h));for(var v=0;v<q;v++)0==v?(ua=n.getBE32(),n.skip(8),va=n.getBE32()):n.skip(16);if(1==e&&0!=d){switch(d){case 1:n="Resize is administratively prohibited";break;case 2:n="Out of resources";break;case 3:n="Invalid screen layout";break;default:n="Unknown reason"}Va("C_2","Resize request has been rejected by the server:"+n)}else ra(f,
h);break;case 240:case 4294967056:0!=f*h&&a.skip(((f+7)/8|0)*h*2+6);break;case 4294967057:if(0!=f*h)if(Fa)a.skip(f*h*T+((f+7)/8|0)*h);else{var z;var w=a;n=e;e=(f+7)/8|0;var A=e*h;q=f*h;v=new Uint32Array(q);var H=w.getBytes(q*T),I=w.getBytes(A),g=0,l=0;for(A=0;A<h;A++){for(z=0;z<f/8;z++){var m=I[A*e+z];for(w=7;0<=w;w--)0!=(m>>w&1)?1!=T&&(g=4278190080|(H[4*l+2]&255)<<16|(H[4*l+1]&255)<<8|H[4*l]&255):g=0,v[l++]=g}for(w=7;w>=8-f%8;w--)g=0!=(I[A*e+z]>>w&1)?1==T?0:4278190080|(H[4*l+2]&255)<<16|(H[4*l+1]&
255)<<8|H[4*l]&255:0,v[l++]=g}n=new pb(0,v,n,d,f,h,4,4*q,q/8|0);J.setCursor(n)}break;case 4294967064:break;case 0:0<f*h&&ab(a,e,d,f,h);break;case 1:n=a.getBE16();q=a.getBE16();ca.inUse?aa.putImageData(aa.getImageData(n,q,f,h),e,d):(M.moveArea(n,q,f,h,e-n,d-q),M.postPaint(e,d,f,h));break;case 5:Xa.decode(a,e,d,f,h);break;case 7:ca.decode(a,e,d,f,h,!1);break;case 16:ka.decode(a,e,d,f,h,!1);break;case 4294967035:n=a.getByte();d=0!=(n&4);f=0!=(n&2);h=0!=(n&1);ja.remoteLockFlags=n;ja.checkLockFlags=!0;
if(k.onLockKeyState)k.onLockKeyState({capsLock:d,numLock:f,scrollLock:h});svGlobal.logger.info("LED state, capsLock:"+d+" numLock:"+f+" scrollLock:"+h);break;case 4294967038:R=new Uint8Array(13);R[0]=147;R[1]=255;R[2]=0;Aa=!0;J.setUnicode(!1);if(k.oncapability)k.oncapability(k.CAP_QEMU_KEY);svGlobal.logger.warn("QEMU Ext Key enabled");break;default:svGlobal.logger.warn("Encoding "+n+" is not supported")}}Na(0,0,la,ma,!0);break;case 1:svGlobal.logger.warn("xxx color map");break;case 2:break;case 3:a.skip(3);
b=a.getBE32();0<b&&(a=a.getBytes(b),b=String.fromCharCode.apply(null,a),k.onservercopy&&k.onservercopy(b)||ob(b)||J.copyToClip("text/plain;"+b));break;case 48:b=a.getString16LE(0,a.getEnd());Da(b);a.skip(a.getEnd()-a.getPosition());break;default:svGlobal.logger.warn("XX PDU:"+b)}});2!=k.mode&&1!=k.mode||O.setHandler(Ka);var ca=new $a,ka=new Ia,Xa=new function(){var a=0,b=0;this.decode=function(c,e,d,f,h){var n=e+f,q=d+h;b=a=0;for(var v=d;v<q;v+=16)for(var z=Math.min(16,q-v),w=e;w<n;w+=16){var A=c,
H=w,I=v,g=Math.min(16,n-w),l=z,m=A.getByte();if(0!=(m&1))ab(A,H,I,g,l,!1);else if(0!=(m&2)&&(1==T?a=ea[A.getByte()]:(a=A.getByte()|A.getByte()<<8|A.getByte()<<16|4278190080,A.skip(1))),M.fillRect(H,I,g,l,a),0!=(m&4)&&(1==T?b=ea[A.getByte()]:(b=A.getByte()|A.getByte()<<8|A.getByte()<<16|4278190080,A.skip(1))),0!=(m&8)){g=A.getByte();var r;if(0!=(m&16))if(1==T)for(r=0;r<g;r++){b=ea[A.getByte()];var t=A.getByte();m=t>>4;l=t&15;t=A.getByte();var x=1+(t>>4);t=1+(t&15);M.fillRect(H+m,I+l,x,t,b)}else for(r=
0;r<g;r++)b=A.getByte()|A.getByte()<<8|A.getByte()<<16|4278190080,A.skip(1),t=A.getByte(),m=t>>4,l=t&15,t=A.getByte(),x=1+(t>>4),t=1+(t&15),M.fillRect(H+m,I+l,x,t,b);else for(r=0;r<g;r++)t=A.getByte(),m=t>>4,l=t&15,t=A.getByte(),x=1+(t>>4),t=1+(t&15),M.fillRect(H+m,I+l,x,t,b)}}M.postPaint(e,d,f,h)}};this.resetStatus=Ga;this.addSurface=function(a){J=a;za&&a.setPlayerMode();M.setContext(J.context);aa=M.getContext();a.setAutoScale(0<k.mode);a.setSize(la,ma);a.setController(ja);a.setFastCopy(F(y.fastCopy));
a.setTouchpad(F(y.touchpad));a.setClipboard(F(y.mapClipboard));var b=void 0!=y.ctrlToWin?F(y.ctrlToWin):void 0!=N.ctrlToWin?N.ctrlToWin:!0;a.run(99997,b);J.setImageCursor(!1);Ta(J);a.onclipdata=qb};var W=new Uint8Array(7);W[0]=147;W[1]=5;var cb=!1,S=new Uint8Array(13);S[0]=147;S[1]=5;S[7]=5;S[8]=0;this.mouseDown=function(a,b,c){Pa(!0,c,a,b)};this.mouseMove=function(a,b){Pa(cb,0,a,b)};this.mouseUp=function(a,b,c){Pa(!1,c,a,b)};this.writeKeyCode=function(a,b){k.writeRawInput("8B"+(a?0:49152)+"\t"+b)};
this.writeScancode=function(a,b){U&&("number"==typeof a?(k.writeRawInput("840\t"+a),k.writeRawInput("8449152\t"+a)):k.writeRawInput("84"+(a?0:49152)+"\t"+b))};this.writeText=function(a){k.writeRawInput("86"+a)};var Ja={57:32,201:65365,209:65366,207:65367,199:65360,203:65361,200:65362,205:65363,208:65364,183:65377,84:65377,197:65299,198:65299,210:65379,211:65535,184:65514,219:65515,220:65516,1:65307,14:65288,15:65289,28:65293,29:65507,42:65505,54:65506,56:65513,59:65470,60:65471,61:65472,62:65473,
63:65474,64:65475,65:65476,66:65477,67:65478,68:65479,87:65480,88:65481,55:65450,69:65407,70:65300,71:65429,72:65431,73:65434,74:65453,75:65430,76:65437,77:65432,78:65451,79:65436,80:65433,81:65435,82:65438,83:65439,156:65421,157:65508,181:65455,toKeySym:function(a){a=Ja[a];if(ja.localLockFlags&2)switch(a){case 65429:a=55;break;case 65431:a=56;break;case 65434:a=57;break;case 65430:a=52;break;case 65437:a=53;break;case 65432:a=54;break;case 65436:a=49;break;case 65433:a=50;break;case 65435:a=51;break;
case 65438:a=48;break;case 65439:a=46}return a||0}},Ya={260:417,728:418,321:419,317:421,346:422,352:425,350:426,356:427,377:428,381:430,379:431,261:433,731:434,322:435,318:437,347:438,711:439,353:441,351:442,357:443,378:444,733:445,382:446,380:447,340:448,258:451,313:453,262:454,268:456,280:458,282:460,270:463,272:464,323:465,327:466,336:469,344:472,366:473,368:475,354:478,341:480,259:483,314:485,263:486,269:488,281:490,283:492,271:495,273:496,324:497,328:498,337:501,345:504,367:505,369:507,355:510,
729:511,294:673,292:678,304:681,286:683,308:684,295:689,293:694,305:697,287:699,309:700,266:709,264:710,288:725,284:728,364:733,348:734,267:741,265:742,289:757,285:760,365:765,349:766,312:930,342:931,296:933,315:934,274:938,290:939,358:940,343:947,297:949,316:950,275:954,291:955,359:956,330:957,331:959,256:960,302:967,278:972,298:975,325:977,332:978,310:979,370:985,360:989,362:990,257:992,303:999,279:1004,299:1007,326:1009,333:1010,311:1011,371:1017,361:1021,363:1022,8254:1150,12290:1185,12300:1186,
12301:1187,12289:1188,12539:1189,12530:1190,12449:1191,12451:1192,12453:1193,12455:1194,12457:1195,12515:1196,12517:1197,12519:1198,12483:1199,12540:1200,12450:1201,12452:1202,12454:1203,12456:1204,12458:1205,12459:1206,12461:1207,12463:1208,12465:1209,12467:1210,12469:1211,12471:1212,12473:1213,12475:1214,12477:1215,12479:1216,12481:1217,12484:1218,12486:1219,12488:1220,12490:1221,12491:1222,12492:1223,12493:1224,12494:1225,12495:1226,12498:1227,12501:1228,12504:1229,12507:1230,12510:1231,12511:1232,
12512:1233,12513:1234,12514:1235,12516:1236,12518:1237,12520:1238,12521:1239,12522:1240,12523:1241,12524:1242,12525:1243,12527:1244,12531:1245,12443:1246,12444:1247,1548:1452,1563:1467,1567:1471,1569:1473,1570:1474,1571:1475,1572:1476,1573:1477,1574:1478,1575:1479,1576:1480,1577:1481,1578:1482,1579:1483,1580:1484,1581:1485,1582:1486,1583:1487,1584:1488,1585:1489,1586:1490,1587:1491,1588:1492,1589:1493,1590:1494,1591:1495,1592:1496,1593:1497,1594:1498,1600:1504,1601:1505,1602:1506,1603:1507,1604:1508,
1605:1509,1606:1510,1607:1511,1608:1512,1609:1513,1610:1514,1611:1515,1612:1516,1613:1517,1614:1518,1615:1519,1616:1520,1617:1521,1618:1522,1106:1697,1107:1698,1105:1699,1108:1700,1109:1701,1110:1702,1111:1703,1112:1704,1113:1705,1114:1706,1115:1707,1116:1708,1118:1710,1119:1711,8470:1712,1026:1713,1027:1714,1025:1715,1028:1716,1029:1717,1030:1718,1031:1719,1032:1720,1033:1721,1034:1722,1035:1723,1036:1724,1038:1726,1039:1727,1102:1728,1072:1729,1073:1730,1094:1731,1076:1732,1077:1733,1092:1734,1075:1735,
1093:1736,1080:1737,1081:1738,1082:1739,1083:1740,1084:1741,1085:1742,1086:1743,1087:1744,1103:1745,1088:1746,1089:1747,1090:1748,1091:1749,1078:1750,1074:1751,1100:1752,1099:1753,1079:1754,1096:1755,1101:1756,1097:1757,1095:1758,1098:1759,1070:1760,1040:1761,1041:1762,1062:1763,1044:1764,1045:1765,1060:1766,1043:1767,1061:1768,1048:1769,1049:1770,1050:1771,1051:1772,1052:1773,1053:1774,1054:1775,1055:1776,1071:1777,1056:1778,1057:1779,1058:1780,1059:1781,1046:1782,1042:1783,1068:1784,1067:1785,1047:1786,
1064:1787,1069:1788,1065:1789,1063:1790,1066:1791,902:1953,904:1954,905:1955,906:1956,938:1957,908:1959,910:1960,939:1961,911:1963,901:1966,8213:1967,940:1969,941:1970,942:1971,943:1972,970:1973,912:1974,972:1975,973:1976,971:1977,944:1978,974:1979,913:1985,914:1986,915:1987,916:1988,917:1989,918:1990,919:1991,920:1992,921:1993,922:1994,923:1995,924:1996,925:1997,926:1998,927:1999,928:2E3,929:2001,931:2002,932:2004,933:2005,934:2006,935:2007,936:2008,937:2009,945:2017,946:2018,947:2019,948:2020,949:2021,
950:2022,951:2023,952:2024,953:2025,954:2026,955:2027,956:2028,957:2029,958:2030,959:2031,960:2032,961:2033,963:2034,962:2035,964:2036,965:2037,966:2038,967:2039,968:2040,969:2041,9143:2209,9484:2210,9472:2211,8992:2212,8993:2213,9474:2214,9121:2215,9123:2216,9124:2217,9126:2218,9115:2219,9117:2220,9118:2221,9120:2222,9128:2223,9132:2224,8804:2236,8800:2237,8805:2238,8747:2239,8756:2240,8733:2241,8734:2242,8711:2245,8764:2248,8771:2249,8660:2253,8658:2254,8801:2255,8730:2262,8834:2266,8835:2267,8745:2268,
8746:2269,8743:2270,8744:2271,8706:2287,402:2294,8592:2299,8593:2300,8594:2301,8595:2302,9670:2528,9618:2529,9225:2530,9228:2531,9229:2532,9226:2533,9252:2536,9227:2537,9496:2538,9488:2539,9492:2541,9532:2542,9146:2543,9147:2544,9148:2546,9149:2547,9500:2548,9508:2549,9524:2550,9516:2551,8195:2721,8194:2722,8196:2723,8197:2724,8199:2725,8200:2726,8201:2727,8202:2728,8212:2729,8211:2730,8230:2734,8229:2735,8531:2736,8532:2737,8533:2738,8534:2739,8535:2740,8536:2741,8537:2742,8538:2743,8453:2744,8210:2747,
9001:2748,9002:2750,8539:2755,8540:2756,8541:2757,8542:2758,8482:2761,9747:2762,9665:2764,9655:2765,9675:2766,9647:2767,8216:2768,8217:2769,8220:2770,8221:2771,8478:2772,8242:2774,8243:2775,10013:2777,9644:2779,9664:2780,9654:2781,9679:2782,9646:2783,9702:2784,9643:2785,9645:2786,9651:2787,9661:2788,9734:2789,8226:2790,9642:2791,9650:2792,9660:2793,9756:2794,9758:2795,9827:2796,9830:2797,9829:2798,10016:2800,8224:2801,8225:2802,10003:2803,10007:2804,9839:2805,9837:2806,9794:2807,9792:2808,9742:2809,
8981:2810,8471:2811,8248:2812,8218:2813,8222:2814,60:2979,62:2982,175:3008,8869:3010,8970:3012,95:3014,8728:3018,9109:3020,8868:3022,8968:3027,8866:3036,8867:3068,8215:3295,1488:3296,1489:3297,1490:3298,1491:3299,1492:3300,1493:3301,1494:3302,1495:3303,1496:3304,1497:3305,1498:3306,1499:3307,1500:3308,1501:3309,1502:3310,1503:3311,1504:3312,1505:3313,1506:3314,1507:3315,1508:3316,1509:3317,1510:3318,1511:3319,1512:3320,1513:3321,1514:3322,3585:3489,3586:3490,3587:3491,3588:3492,3589:3493,3590:3494,
3591:3495,3592:3496,3593:3497,3594:3498,3595:3499,3596:3500,3597:3501,3598:3502,3599:3503,3600:3504,3601:3505,3602:3506,3603:3507,3604:3508,3605:3509,3606:3510,3607:3511,3608:3512,3609:3513,3610:3514,3611:3515,3612:3516,3613:3517,3614:3518,3615:3519,3616:3520,3617:3521,3618:3522,3619:3523,3620:3524,3621:3525,3622:3526,3623:3527,3624:3528,3625:3529,3626:3530,3627:3531,3628:3532,3629:3533,3630:3534,3631:3535,3632:3536,3633:3537,3634:3538,3635:3539,3636:3540,3637:3541,3638:3542,3639:3543,3640:3544,3641:3545,
3642:3546,3647:3551,3648:3552,3649:3553,3650:3554,3651:3555,3652:3556,3653:3557,3654:3558,3655:3559,3656:3560,3657:3561,3658:3562,3659:3563,3660:3564,3661:3565,3664:3568,3665:3569,3666:3570,3667:3571,3668:3572,3669:3573,3670:3574,3671:3575,3672:3576,3673:3577,12593:3745,12594:3746,12595:3747,12596:3748,12597:3749,12598:3750,12599:3751,12600:3752,12601:3753,12602:3754,12603:3755,12604:3756,12605:3757,12606:3758,12607:3759,12608:3760,12609:3761,12610:3762,12611:3763,12612:3764,12613:3765,12614:3766,
12615:3767,12616:3768,12617:3769,12618:3770,12619:3771,12620:3772,12621:3773,12622:3774,12623:3775,12624:3776,12625:3777,12626:3778,12627:3779,12628:3780,12629:3781,12630:3782,12631:3783,12632:3784,12633:3785,12634:3786,12635:3787,12636:3788,12637:3789,12638:3790,12639:3791,12640:3792,12641:3793,12642:3794,12643:3795,4520:3796,4521:3797,4522:3798,4523:3799,4524:3800,4525:3801,4526:3802,4527:3803,4528:3804,4529:3805,4530:3806,4531:3807,4532:3808,4533:3809,4534:3810,4535:3811,4536:3812,4537:3813,4538:3814,
4539:3815,4540:3816,4541:3817,4542:3818,4543:3819,4544:3820,4545:3821,4546:3822,12653:3823,12657:3824,12664:3825,12671:3826,12673:3827,12676:3828,12678:3829,12685:3830,12686:3831,4587:3832,4592:3833,4601:3834,8361:3839,8364:5028,338:5052,339:5053,376:5054},R=new Uint8Array(9);R[0]=147;R[1]=4;this.writeRawInput=function(a){if(oa){var b=parseInt(a.substring(0,2),16);a=a.substring(2).split("\t");switch(b){case 128:k.mouseDown(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]));break;case 129:k.mouseUp(parseInt(a[0]),
parseInt(a[1]),parseInt(a[2]));break;case 130:k.mouseMove(parseInt(a[0]),parseInt(a[1]));break;case 131:b=0!=parseInt(a[2]);var c=parseInt(a[0]);a=parseInt(a[1]);oa&&(S[2]=b?16:8,S[3]=c>>8&255,S[4]=c&255,S[5]=a>>8&255,S[6]=a&255,S[9]=S[3],S[10]=S[4],S[11]=S[5],S[12]=S[6],L(S.buffer));break;case 132:b=Ja.toKeySym(a[1]);c=0==a[0];fa(c,b,parseInt(a[1],10));break;case 139:c=0==a[0];b=parseInt(a[1]);b=String.fromCharCode(b).toLocaleLowerCase().charCodeAt(0);fa(c,b,parseInt(a[2]));break;case 134:if(!Aa){c=
0;for(var e=a[0].length;c<e;c++){b=a[0].charCodeAt(c);if(255<b){var d=Ya[b];b=d?d:b|16777216}fa(!0,b,0);fa(!1,b,0)}}}}};var Za={" ":57,space:57,pageup:201,pagedown:209,end:207,home:199,left:203,up:200,right:205,down:208,printscreen:183,insert:210,del:211,"delete":211,altgr:184,windows:219,windowsright:220,context:221,esc:1,backspace:14,tab:15,enter:28,meta:29,command:29,ctrl:29,shift:42,alt:56,capslock:58,f1:59,f2:60,f3:61,f4:62,f5:63,f6:64,f7:65,f8:66,f9:67,f10:68,f11:87,f12:88,numlock:69,scrolllock:70,
add:78}};
